{"version":3,"sources":["webpack:///./node_modules/vuetify/lib/components/VGrid/VRow.js","webpack:///./src/components/mdedit.vue?86b0","webpack:///./node_modules/vuetify/lib/components/VAutocomplete/VAutocomplete.js","webpack:///./node_modules/vuetify/lib/components/VCombobox/VCombobox.js","webpack:///./node_modules/vuetify/lib/components/VGrid/VCol.js","webpack:///./src/components/mdedit.vue?ebb8","webpack:///src/components/mdedit.vue","webpack:///./src/components/mdedit.vue?0b14","webpack:///./src/components/mdedit.vue","webpack:///./node_modules/vuetify/lib/components/VGrid/grid.js","webpack:///./node_modules/vuetify/lib/components/VGrid/VContainer.js","webpack:///./node_modules/vditor/dist/index.min.js"],"names":["breakpoints","ALIGNMENT","makeProps","prefix","def","reduce","props","val","alignValidator","str","includes","alignProps","type","String","default","validator","justifyValidator","justifyProps","alignContentValidator","alignContentProps","propMap","align","Object","keys","justify","alignContent","classMap","breakpointClass","prop","className","breakpoint","replace","toLowerCase","cache","Map","extend","name","functional","tag","dense","Boolean","noGutters","h","data","children","cacheKey","classList","get","forEach","value","push","set","staticClass","class","defaultMenuProps","VSelect","offsetY","offsetOverflow","transition","allowOverflow","autoSelectFirst","filter","Function","item","queryText","itemText","toLocaleLowerCase","indexOf","hideNoData","menuProps","options","noFilter","searchInput","lazySearch","this","computed","classes","call","selectedIndex","filteredItems","selectedItems","map","getValue","hideSelected","some","hasItem","length","selectedItem","getText","isSearching","internalSearch","allItems","text","$emit","searchIsDirty","multiple","isFocused","hasDisplayedItems","$_menuProps","contentClass","trim","find","i","valueComparator","internalValue","listData","items","virtualizedItems","watch","document","addEventListener","onCopy","$refs","input","select","removeEventListener","blur","updateSelf","hasSlot","oldVal","isMenuActive","activateMenu","setSearch","methods","setMenuIndex","$nextTick","menu","getTiles","updateMenuDimensions","updateDimensions","keyCode","left","right","backspace","delete","deleteCurrentItem","curIndex","curItem","isInteractive","getDisabled","lastIndex","nextIndex","nextItem","selectItem","setValue","clearableCallback","VTextField","genInput","mergeData","attrs","autocomplete","domProps","slot","genInputSlot","role","genSelections","e","onFocus","isAppendInner","target","badInput","validity","ctrlKey","home","end","onKeyDown","changeSelectedIndex","onTabDown","preventDefault","setSelectedItems","selectedValues","event","_event$clipboardData","_event$clipboardData2","currentItem","currentItemText","clipboardData","setData","delimiters","Array","returnObject","editingIndex","toString","$slots","delimiter","d","endsWith","slice","updateTags","on","paste","onPaste","index","chip","genChipSelection","componentOptions","listeners","dblclick","onChipInput","getMenuIndex","onFilteredItemsChanged","selectionStart","enter","onEnterDown","stopPropagation","updateEditing","findIndex","assign","splice","isUsingSlot","$scopedSlots","selection","hasChips","updateCombobox","menuIndex","itemToSelect","pastedItemText","getData","findExistingIndex","breakpointProps","Number","offsetProps","orderProps","col","offset","order","cols","alignSelf","parent","hasColClasses","startsWith","render","_vm","_h","$createElement","_c","_self","directives","rawName","expression","staticStyle","staticRenderFns","isLoading","isMobile","window","innerWidth","vditor","components","initVditor","height","icon","IHljs","lineNumber","style","toolbarConfig","pin","enable","outline","getHTML","content","html2md","theme","component","id","key","join","fluid","concat","root","factory","module","exports","__webpack_modules__","694","diff_match_patch","Diff_Timeout","Diff_EditCost","Match_Threshold","Match_Distance","Patch_DeleteThreshold","Patch_Margin","Match_MaxBits","DIFF_DELETE","DIFF_INSERT","DIFF_EQUAL","Diff","op","prototype","diff_main","text1","text2","opt_checklines","opt_deadline","MAX_VALUE","Date","getTime","deadline","Error","checklines","commonlength","diff_commonPrefix","commonprefix","substring","diff_commonSuffix","commonsuffix","diffs","diff_compute_","unshift","diff_cleanupMerge","longtext","shorttext","hm","diff_halfMatch_","text1_a","text1_b","text2_a","text2_b","mid_common","diffs_a","diffs_b","diff_lineMode_","diff_bisect_","a","diff_linesToChars_","chars1","chars2","linearray","lineArray","diff_charsToLines_","diff_cleanupSemantic","pointer","count_delete","count_insert","text_delete","text_insert","subDiff","j","pop","text1_length","text2_length","max_d","Math","ceil","v_offset","v_length","v1","v2","x","delta","front","k1start","k1end","k2start","k2end","k1","k1_offset","x1","y1","charAt","k2_offset","x2","diff_bisectSplit_","k2","y2","y","text1a","text2a","text1b","text2b","diffsb","lineHash","diff_linesToCharsMunge_","chars","lineStart","lineEnd","lineArrayLength","line","hasOwnProperty","undefined","fromCharCode","maxLines","charCodeAt","pointermin","pointermax","min","pointermid","pointerstart","floor","pointerend","diff_commonOverlap_","text_length","best","pattern","found","dmp","diff_halfMatchI_","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","seed","best_common","prefixLength","suffixLength","hm1","hm2","changes","equalities","equalitiesLength","lastEquality","length_insertions1","length_deletions1","length_insertions2","length_deletions2","max","diff_cleanupSemanticLossless","deletion","insertion","overlap_length1","overlap_length2","diff_cleanupSemanticScore_","one","two","char1","char2","nonAlphaNumeric1","match","nonAlphaNumericRegex_","nonAlphaNumeric2","whitespace1","whitespaceRegex_","whitespace2","lineBreak1","linebreakRegex_","lineBreak2","blankLine1","blanklineEndRegex_","blankLine2","blanklineStartRegex_","equality1","edit","equality2","commonOffset","commonString","bestEquality1","bestEdit","bestEquality2","bestScore","score","diff_cleanupEfficiency","pre_ins","pre_del","post_ins","post_del","diff_xIndex","loc","last_chars1","last_chars2","diff_prettyHtml","html","pattern_amp","pattern_lt","pattern_gt","pattern_para","diff_text1","diff_text2","diff_levenshtein","levenshtein","insertions","deletions","diff_toDelta","encodeURI","diff_fromDelta","diffsLength","tokens","split","param","decodeURI","ex","n","parseInt","isNaN","match_main","match_bitap_","s","match_alphabet_","match_bitapScore_","accuracy","proximity","abs","score_threshold","best_loc","lastIndexOf","bin_min","bin_mid","matchmask","last_rd","bin_max","start","finish","rd","charMatch","patch_addContext_","patch","start2","length1","padding","suffix","start1","length2","patch_make","opt_b","opt_c","patches","patch_obj","patchDiffLength","char_count1","char_count2","prepatch_text","postpatch_text","diff_type","diff_text","patch_deepCopy","patchesCopy","patchCopy","patch_apply","nullPadding","patch_addPadding","patch_splitMax","results","start_loc","expected_loc","end_loc","index2","index1","mod","paddingLength","extraLength","patch_size","bigpatch","precontext","empty","shift","postcontext","patch_toText","patch_fromText","textline","textPointer","patchHeader","m","sign","coords1","coords2","157","857","__unused_webpack_module","__webpack_exports__","__webpack_require__","abcRender","adapterRender","chartRender","codeRender","flowchartRender","graphvizRender","highlightRender","lazyLoadImageRender","element","loadImg","it","testImage","createElement","src","getAttribute","naturalHeight","naturalWidth","querySelector","clientWidth","innerHeight","removeAttribute","querySelectorAll","imgElement","vditorImageIntersectionObserver","disconnect","observe","IntersectionObserver","entries","entrie","isIntersecting","intersectionRatio","mathRender","mediaRender","mermaidRender","mindmapRender","outlineRender","plantumlRender","constants","setContentTheme","addScript","hasClosest","merge","anchorRender","anchor","add","onclick","substr","top","getElementById","offsetTop","scrollTop","onhashchange","decodeURIComponent","location","hash","setLute","speechRender","lang","speechSynthesis","SpeechSynthesisUtterance","playSVG","pauseSVG","speechDom","body","insertAdjacentElement","getVoice","currentVoice","defaultVoice","voices","getVoices","onvoiceschanged","voice_1","utterThis","voice","onend","cancel","innerHTML","speak","speaking","paused","resume","pause","Hc","vditorSpeechRange","getSelection","display","getRangeAt","cloneRange","rect","getBoundingClientRect","screenX","setAttribute","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","next","rejected","result","done","then","apply","__generator","f","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","TypeError","mergeOptions","defaultOption","cdn","CDN","customEmoji","emojiPath","hljs","HLJS_OPTIONS","markdown","MARKDOWN_OPTIONS","math","MATH_OPTIONS","mode","speech","THEME_OPTIONS","T","md2html","mdText","mergedOptions","G","lute","X","autoSpace","codeBlockPreview","emojiSite","emojis","fixTermTypo","footnotes","headingAnchor","inlineMathDigit","inlineDigit","lazyLoadImage","linkBase","linkPrefix","listStyle","mark","mathBlockPreview","paragraphBeginningSpace","sanitize","toc","renderers","SetJSRenderers","Md2HTML","SetHeadingID","previewRender","previewElement","_a","transform","i18n","VditorI18n","J","Z","current","path","O","H","p","B","Q","Y","after","spanElement","lG","fb","headingElement","scrollTo","scrollX","preview_image","setCodeTheme","Vditor","previewImage","E","k","preview","method","260","_VDITOR_VERSION","Constants","ZWSP","DROP_EDITOR","MOBILE_WIDTH","CLASS_MENU_DISABLED","EDIT_TOOLBARS","CODE_THEME","CODE_LANGUAGES","engine","macros","list","369","_constants__WEBPACK_IMPORTED_MODULE_0__","_util_addScript__WEBPACK_IMPORTED_MODULE_2__","_adapterRender__WEBPACK_IMPORTED_MODULE_1__","abcElements","abcRenderAdapter","getElements","parentElement","contains","ABCJS","renderAbc","getCode","overflowX","46","r","mathRenderAdapter","mathElement","textContent","mermaidRenderAdapter","el","mindmapRenderAdapter","chartRenderAdapter","innerText","graphvizRenderAdapter","flowchartRenderAdapter","plantumlRenderAdapter","726","echartsElements","option","JSON","parse","echarts","init","setOption","error","23","_util_code160to32__WEBPACK_IMPORTED_MODULE_0__","maxHeight","codeText","codeElement","remove","divElement","copy","copied","textarea","before","outerHeight","383","flowchartElements","flowchartObj","flowchart","drawSVG","890","graphvizElements","code","blob","Blob","url","URL","webkitURL","blobUrl","createObjectURL","worker","Worker","Viz","renderSVGElement","outerHTML","catch","console","93","_util_addStyle__WEBPACK_IMPORTED_MODULE_1__","hljsOption","vditorHljsStyle","href","c","codes","block","highlightElement","linenNumberTemp","whiteSpace","getComputedStyle","isSoftWrap","lineNumberHTML","lineList","lineHeight","insertAdjacentHTML","323","_util_addScript__WEBPACK_IMPORTED_MODULE_3__","_util_addStyle__WEBPACK_IMPORTED_MODULE_2__","_util_code160to32__WEBPACK_IMPORTED_MODULE_4__","mathElements","defaultOptions","katex","renderToString","displayMode","tagName","output","message","vditorMathElement","currentTarget","closest","chainAsync_1","fns","curr","last","fn","MathJax","loader","paths","mathjax","startup","typeset","tex","renderMath_1","mathOptions","getMetricsFor","tex2svgPromise","node","append","clear","updateDocument","errorTextElement","promise","chains","_loop_1","207","videoRender","audioRender","iframeRender","youtubeMatch","youkuMatch","qqMatch","coubMatch","facebookMatch","dailymotionMatch","bilibiliMatch","tedMatch","encodeURIComponent","aElement","765","mermaidElements","config","altFontFamily","htmlLabels","useMaxWidth","fontFamily","gantt","leftPadding","rightPadding","securityLevel","sequence","boxMargin","diagramMarginX","diagramMarginY","startOnLoad","themeVariables","activationBkgColor","activationBorderColor","activeTaskBkgColor","activeTaskBorderColor","actorBkg","actorBorder","actorLineColor","actorTextColor","altBackground","altSectionBkgColor","arrowheadColor","background","border1","border2","classText","clusterBkg","clusterBorder","critBkgColor","critBorderColor","darkTextColor","defaultLinkColor","doneTaskBkgColor","doneTaskBorderColor","edgeLabelBackground","errorBkgColor","errorTextColor","fillType0","fillType1","fillType2","fillType3","fillType4","fillType5","fillType6","fillType7","fontSize","gridColor","labelBackground","labelBoxBkgColor","labelBoxBorderColor","labelColor","labelTextColor","lineColor","loopTextColor","mainBkg","mainContrastColor","nodeBkg","nodeBorder","noteBkgColor","noteBorderColor","noteTextColor","primaryBorderColor","primaryColor","primaryTextColor","secondBkg","secondaryBorderColor","secondaryColor","secondaryTextColor","sectionBkgColor","sectionBkgColor2","sequenceNumberColor","signalColor","signalTextColor","taskBkgColor","taskBorderColor","taskTextClickableColor","taskTextColor","taskTextDarkColor","taskTextLightColor","taskTextOutsideColor","tertiaryBorderColor","tertiaryColor","tertiaryTextColor","textColor","titleColor","todayLineColor","mermaid","initialize","894","mindmapElements","series","initialTreeDepth","itemStyle","borderWidth","color","backgroundColor","borderColor","borderRadius","position","lineStyle","width","roam","symbol","params","tooltip","trigger","triggerOn","198","_util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__","_mathRender__WEBPACK_IMPORTED_MODULE_0__","contentElement","targetElement","tocHTML","ids","from","W","tempElement","SetToC","currentMode","HTML2VditorDOM","SpinVditorIRDOM","SpinVditorDOM","Lute","New","headingsElement","firstElementChild","nextElementSibling","isEqualNode","idElement","windowScrollY","toolbar","offsetHeight","scrollY","583","plantumlElements","plantumlEncoder","encode","792","PutEmojis","SetEmojiSite","SetHeadingAnchor","SetInlineMathAllowDigitAfterOpenMarker","SetAutoSpace","SetFootnotes","SetFixTermTypo","SetVditorCodeBlockPreview","SetVditorMathBlockPreview","SetSanitize","SetChineseParagraphBeginningSpace","SetRenderListStyle","SetLinkBase","SetLinkPrefix","SetMark","SetImageLazyLoading","264","oldImgElement","oldImgRect","spin","close","overflow","translate3d","setTimeout","scrollWidth","scrollHeight","clientHeight","btnElement","deg","968","codeTheme","958","_util_addStyle__WEBPACK_IMPORTED_MODULE_0__","contentTheme","vditorContentTheme","cssPath","228","addScriptSync","xhrObj","XMLHttpRequest","open","setRequestHeader","send","scriptElement","responseText","head","appendChild","async","onload","946","addStyle","styleElement","rel","getElementsByTagName","769","code160to32","931","isSafari","navigator","userAgent","isFirefox","accessLocalStorage","localStorage","getEventName","isCtrl","platform","toUpperCase","metaKey","updateHotkeyTip","hotkey","test","isChrome","vendor","713","_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__","hasTopClosestByClassName","hasClosestByClassName","parentClosest","findTop","hasTopClosestByTag","nodeName","S","getTopList","topUlElement","topOlElement","topListElement","hasClosestByAttribute","attr","nodeType","isClosest","hasClosestBlock","blockElement","hasClosestByMatchTag","getLastNode","lastChild","615","hasClosestByTag","hasClosestByHeadings","224","_i","arguments","merger","obj","187","_compatibility__WEBPACK_IMPORTED_MODULE_2__","_hasClosest__WEBPACK_IMPORTED_MODULE_1__","getEditorRange","range","rangeCount","startContainer","focus","ownerDocument","createRange","setStart","collapse","getCursorPosition","editor","cursorRect","parentRect","getClientRects","parent_1","startOffset","childNodes","selectNode","setEnd","endContainer","endOffset","selectIsEditor","container","commonAncestorContainer","setSelectionFocus","removeAllRanges","addRange","getSelectPosition","selectElement","editorElement","preSelectionRange","selectNodeContents","setSelectionByPosition","charIndex","pNode","foundStart","stop","nextCharIndex","nextSibling","setStartBefore","setStartAfter","setEndBefore","setEndAfter","setRangeByWbr","wbrElement","previousElementSibling","isSameNode","previousSibling","i7","insertNode","createTextNode","insertHTML","tempBlockElement","pasteElement","preventInput","execCommand","lastElementChild","F9","pasteTemplate","cloneNode","__webpack_module_cache__","moduleId","cachedModule","definition","o","defineProperty","enumerable","toStringTag","templateObject_1","getMarkdown","sv","VditorDOM2Md","wysiwyg","VditorIRDOM2Md","ir","DevTools","renderEchart","_this","devtools","ASTChart","RenderEChartsJSON","verticalAlign","orient","toolbox","bottom","emphasis","iconStyle","feature","restore","show","saveAsImage","resize","compatibility","removeCurrentToolbar","names","itemElement","setCurrentToolbar","enableToolbar","disableToolbar","hideToolbar","showToolbar","hidePanel","panels","exceptElement","elements","emoji","hint","popover","toggleSubMenu","panelElement","actionBtn","level","Le","log","print","processPasteCode","isCode","childElementCount","pres","processCodeRender","previewPanel","language","renderToc","clickToc","keydownToc","im","execAfterRender","insertBeforeBlock","trimRight","insertAfterBlock","tocElement","ignoreSpace","isHrMD","isHeadingMD","startSpace","endSpace","markerElement","previousNode","previewRenderElement","firstLinkRefDefElement","isIRElement","footnoteElement","a1","blockquoteElement","O9","listPrevElement","listNextElement","inputType","debugger","footnoteItemElement","footnoteItemText","marker","footnoteRefElement","firstFootnoteElement","allLinkRefDefsElement","allFootnoteElement","ib","process_processAfterRender","enableAddUndoStack","enableHint","enableInput","matchHotKey","hotKey","yl","altKey","shiftKey","hotKeys","hasShift","vU","nextIsNode","nodeValue","nextNode","parentNextNode","previousIsNode","expandMarker","nodeElement","JQ","nodeElementEnd","collapsed","processKeydown","composingLock","isComposing","undo","recordFirstPosition","zh","fixGSKeyBackspace","fixCJKPosition","fixHR","newlineElement","beforeMarkerElement","afterMarkerElement","pElement","fixMarkdown","fixList","fixBlockquote","preRenderElement","codeRenderElement","firstChild","fixCodeBlock","preBeforeElement","recentLanguage","cellElement","tableElement","isFirstCell","table2Element","isLastCell","fixTable","fixTask","fixTab","headingMarkerElement","process_processHeading","fixDelete","rangeStart","headingLength","fixFirefoxArrowUpTable","fixCursorDownInlineMath","inputEvent","processAfterRender","codeBlockMarkerElement","openMarkerElement","getSideByType","mathBlockMarkerElement","mathBlockCloseElement","Caret","isSVElement","processSpinVditorSVDOM","scrollCenter","processKeydown_processKeydown","_b","_d","_e","textElement","blockquoteMarkerElement","listMarkerElement","taskMarkerElement","listLastMarkerElement","startIndex","isTask","listFirstMarkerElement","isFirst","newLineMatch","newLineText","processPreviousMarkers","extractContents","previousLastElement","setTheme","initUI","minHeight","upload","tip","export","setEditMode","afterRender","visualViewport","pendingUpdate_1","viewportHandler","requestAnimationFrame","layoutViewport","setPadding","minPadding","maxWidth","paddingLeft","offsetWidth","setTypewriterPosition","typewriterMode","setProperty","initValue","pK","getItem","originalInnerHTML","HTML2Md","highlightToolbarIR","clearTimeout","hlToolbarTimeoutId","Gb","typeElement","quoteElement","strongElement","emElement","sElement","liElement","codeBlockElement","afterRenderEvent","afterRenderTimeoutId","counter","setItem","addToUndoStack","undoDelay","previoueIsEmptyA","nextIsCode","getNextHTML","getPreviousHTML","getRenderElementNextNode","blockCodeElement","splitElement","previousHTML","nextHTML","beforeHTML","afterHTML","modifyPre","cloneRangeOffset","parentNode","insertBefore","setHeading","removeHeading","showCode","first","previousElement","wysiwyg_processKeydown_processKeydown","inputElemment","topBQElement","E2","pTempElement","linRefElement","inputElement","removeBlockElement","click","rangeStartOffset","nextElement","highlightToolbarWYSIWYG","footnotesElement","genClose","setPopoverPosition","commentElement","ids_1","nextIds_1","genUp","genDown","updateTable_1","oldRow","rows","oldColumn","cells","row","input_1","column","input2_1","columnDiff","rowDiff","rowHTML","l","setAlign_1","setTableAlign","left_1","center_1","right_1","td","th","alignType","alignLeft","ns","alignCenter","alignRight","insertRowElement","insertRowBelow","insertRow","insertRowBElement","insertRowAbove","insertColumnElement","insertColumnRight","insertColumn","insertColumnBElement","insertColumnLeft","deleteRowElement","deleteRow","deleteColumnElement","deleteColumn","inputWrap","textAlign","oninput","onkeydown","input2Wrap","linkRefElement","genLinkRefPopover","footnotesRefElement","footnoteRef","input_2","blockRenderElement","languageWrap","language_1","codeElement_1","onkeyup","matchLangData","keyName","genHTML","input_3","genAPopover","backslashElement","offsetLeft","updateLinkRef","input1","textIsNotEmpty","linkHotkey","input1Wrap","linkRef","upElement","up","downElement","down","nextInputElement","updateA","input2","link","tooltipText","genImagePopover","updateImg","alt","title","imageURL","elementEvent","altWrap","alternateText","titleWrap","highlightToolbar","renderDomByMd","md","Md2VditorDOM","cancelBES","commandName","jump","lastTagName","lastEndTagName","splitHTML","lastBeforeHTML","lastAfterHTML","toolbarEvent","CustomEvent","useHighlight","useRender","inlineCodeElement","listToggle","surroundContents","deleteContents","textInputElement","textInputElements","tableHTML_1","tableText","delimiter_1","header","subIndex","cell","hrHTML","MenuItem","menuItem","iconElement","tipPosition","process_processToolbar","processToolbar","__extends","extendStatics","b","setPrototypeOf","__proto__","__","constructor","create","markdownText","SetVditorIR","SetVditorWYSIWYG","SetVditorSV","Md2VditorIRDOM","svHTML","resetIcon","toggle","EditMode","_super","instantRendering","splitView","_bindEvent","getSelectText","focusEvent","dblclickEvent","blurEvent","expandElement","selectPopover","relatedTarget","hideComment","dropEvent","dataTransfer","types","pasteCode","copyEvent","cutEvent","comment","getComments","adjustTop","cursorTop","Ny","hotkeyEvent","ctrlEnter","redo","esc","processHeading","repeat","sub","subMenuItem","dispatchEvent","selectEvent","onmouseup","selectText","showComment","processPaste","Md2VditorSVDOM","spanNode","isPrevious","sideElement","SpinVditorSVDOM","spanType","markerText","hasNL","previousType","previousText","openMarker","processTimeoutId","newLine","insertAdjacentText","getElement","setHeaders","xhr","headers","Upload","isUploading","validateFile","files","hide","uploadFileList","errorTip","uploadingStr","iMax","file","validate","nameEmpty","size","over","fileExt","filename","accept","isAccept","fileTypeError","uploading","genUploadedLabel","response","msg","errFiles","uploadError","succFileText","succMap","uploadFiles","fileList","filesMax","fileItem","isValidate","validateResult","formData","extraData","DataTransferItem","getAsFile","handler","FormData","fieldName","token","withCredentials","onreadystatechange","readyState","DONE","status","success","format","onprogress","lengthComputable","progress","loaded","total","progressBar","input_input","previousAEmptyElement","wbr","html_1","firstLinkRefDefElement_1","isWYSIWYGElement","firstFootnoteElement_1","triggerRemoveComment","__makeTemplateObject","cooked","raw","fixBrowserBehavior_awaiter","fixBrowserBehavior_generator","pLiElement","zwspNode","inlineElement","insertEmptyBlock","goPreviousCell","isSelected","pHTML","trimLeft","replaceChild","listIndent","liElements_1","cloneContents","liParentElement","liHTML_1","tempTopListElement","listOutdent","liParentLiElement","liParentAfterElement","liElements_2","isMatch_1","afterHTML_1","reverse","columnCnt","rowCnt","currentColumn","textArray","tab","pText","pTextList","tableHeaderMD","pInnerHTML","innerHTMLList","lastElement","DX","theadHTML","tbodyElement","brElement","trElement","previousCellElement","codePosition","isEmpty","taskItemElement","checked","lastNode","afterHTML_2","beforeHTML_1","isAfter_1","taskItem","parentTagName","dataMarker","startAttribute","rangeElement","lastCellElement","callback","textHTML","textPlain","renderLinkDest","doc","entering","WalkContinue","TokensStr","__internal_object__","Parent","Type","linkToImgUrl","xhr_1","linkToImgFormat","responseJSON_1","original_1","originalURL","linkToImgCallback","stringify","DOMParser","parseFromString","$j","HTML2VditorIRDOM","oC","processHint","matchLangData_1","key_1","removeInline","aTextElement","Hint","hintExtends","splitChar","fillEmoji","preElement","timeId","focusNode","currentLineValue","getKey","emojiHint_1","GetEmojis","matchEmojiData_1","delay","textareaPosition","hintsHTML","hintData","replaceHtml","replaceIndex","defaultView","getPropertyValue","currentHintElement","length_1","currentLastIndex","lastItem","maxLength","preChar","IR","placeholder","bindEvent","linkElement","lastRect","VditorDOM2HTML","VditorIRDOM2HTML","Outline","outlineLabel","Preview","copyToX","actions","actionElement","actionHtml","action","btn","actionCustom","w","mdTimeoutId","renderStartTime","responseJSON","startTime","time","performanceTip","cmtFocusElement","copyElement","backgroundImage","Resize","documentSelf","clientY","ondragstart","captureEvents","onmousemove","moveEvent","paddingBottom","onselectstart","onselect","Editor","textScrollTop","textHeight","textScrollHeight","parseFloat","Tip","setPreviewMode","Both_extends","Both","Br","CodeTheme_extends","CodeTheme","ContentTheme_extends","ContentTheme","Counter","Custom_extends","Custom","Devtools_extends","Devtools","Divider","Emoji_extends","Emoji","commonEmojiHTML","emojiValue","tailHTML","emojiTail","download","downloadTip","exportMarkdown","exportPDF","generate","iframe","contentDocument","write","contentWindow","postMessage","exportHTML","Export_extends","Export","Fullscreen_extends","Fullscreen","zIndex","svgElement","fullscreen","Headings_extends","Headings","heading1","heading2","heading3","heading4","heading5","heading6","Help_extends","Help","Indent_extends","Indent","Info_extends","Info","Version","InsertAfter_extends","InsertAfter","InsertBefore_extends","InsertBefore","Outdent_extends","Outdent","Outline_extends","Outline_Outline","Preview_extends","Preview_Preview","toolbars","RecordMedia","context","SAMPLE_RATE","isRecording","readyFlag","leftChannel","rightChannel","recordingLength","AudioContext","webkitAudioContext","DEFAULT_SAMPLE_RATE","sampleRate","volume","createGain","audioInput","createMediaStreamSource","connect","recorder","createScriptProcessor","onaudioprocess","destination","cloneChannelData","leftChannelData","rightChannelData","Float32Array","startRecordingNewWavFile","stopRecording","buildWavFileBlob","leftBuffer","mergeBuffers","rightBuffer","interleaved","downSampleBuffer","totalByteCount","buffer","ArrayBuffer","view","DataView","writeUTFBytes","setUint32","setUint16","subChunk2ByteCount","lng","setInt16","rate","sampleRateRatio","newLength","round","offsetResult","offsetBuffer","nextOffsetBuffer","accum","count","desiredChannelBuffer","setUint8","Record_extends","Record","mediaRecorder","File","recording","mediaDevices","getUserMedia","audio","mediaStream","inputBuffer","getChannelData","Redo_extends","Redo","Undo_extends","Undo","Upload_extends","Upload_Upload","inputHTML","Toolbar","genItem","panelElement_1","subI","menuItemObj","undo_Undo","stackSize","resetStack","clearStack","undoStack","redoStack","state","renderDiff","hasUndo","G6","addCaret","lastText","diff","patchList","isRedo","redoPatchList","setFocus","cloneElement","Options","mergeToolbar","toolbarItem","toolbarResult","currentMenuItem","defaultMenuItem","WYSIWYG","commentIds","blockStartElement","blockEndElement","NewNodeID","rangeClone","contents","removeStart","removeEnd","wrap","startElement","endElement","Set","comments_1","difference","has","oldIds","removedIds","codeEndElement","aEndElement","aTitle","popoverTop1","popoverTop","scroll","topPx","checkElement","nextRenderElement","src_extends","version","getOptions","contentThemePath","getCurrentMode","disabled","renderPreview","clearCache","removeItem","disabledCache","enableCache","exportJSON","RenderJSON","deleteValue","isCollapsed","updateValue","insertValue","tmpElement","destroy","getCommentIds","hlCommentIds","hlItem","unHlCommentIds","unHlItem","removeCommentIds","removeIds","removeId","_lutePath"],"mappings":"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","file":"js/chunk-74bb30d8.eb8c0fc3.js","sourcesContent":["import \"../../../src/components/VGrid/VGrid.sass\";\nimport Vue from 'vue';\nimport mergeData from '../../util/mergeData';\nimport { upperFirst } from '../../util/helpers'; // no xs\n\nconst breakpoints = ['sm', 'md', 'lg', 'xl'];\nconst ALIGNMENT = ['start', 'end', 'center'];\n\nfunction makeProps(prefix, def) {\n  return breakpoints.reduce((props, val) => {\n    props[prefix + upperFirst(val)] = def();\n    return props;\n  }, {});\n}\n\nconst alignValidator = str => [...ALIGNMENT, 'baseline', 'stretch'].includes(str);\n\nconst alignProps = makeProps('align', () => ({\n  type: String,\n  default: null,\n  validator: alignValidator\n}));\n\nconst justifyValidator = str => [...ALIGNMENT, 'space-between', 'space-around'].includes(str);\n\nconst justifyProps = makeProps('justify', () => ({\n  type: String,\n  default: null,\n  validator: justifyValidator\n}));\n\nconst alignContentValidator = str => [...ALIGNMENT, 'space-between', 'space-around', 'stretch'].includes(str);\n\nconst alignContentProps = makeProps('alignContent', () => ({\n  type: String,\n  default: null,\n  validator: alignContentValidator\n}));\nconst propMap = {\n  align: Object.keys(alignProps),\n  justify: Object.keys(justifyProps),\n  alignContent: Object.keys(alignContentProps)\n};\nconst classMap = {\n  align: 'align',\n  justify: 'justify',\n  alignContent: 'align-content'\n};\n\nfunction breakpointClass(type, prop, val) {\n  let className = classMap[type];\n\n  if (val == null) {\n    return undefined;\n  }\n\n  if (prop) {\n    // alignSm -> Sm\n    const breakpoint = prop.replace(type, '');\n    className += `-${breakpoint}`;\n  } // .align-items-sm-center\n\n\n  className += `-${val}`;\n  return className.toLowerCase();\n}\n\nconst cache = new Map();\nexport default Vue.extend({\n  name: 'v-row',\n  functional: true,\n  props: {\n    tag: {\n      type: String,\n      default: 'div'\n    },\n    dense: Boolean,\n    noGutters: Boolean,\n    align: {\n      type: String,\n      default: null,\n      validator: alignValidator\n    },\n    ...alignProps,\n    justify: {\n      type: String,\n      default: null,\n      validator: justifyValidator\n    },\n    ...justifyProps,\n    alignContent: {\n      type: String,\n      default: null,\n      validator: alignContentValidator\n    },\n    ...alignContentProps\n  },\n\n  render(h, {\n    props,\n    data,\n    children\n  }) {\n    // Super-fast memoization based on props, 5x faster than JSON.stringify\n    let cacheKey = '';\n\n    for (const prop in props) {\n      cacheKey += String(props[prop]);\n    }\n\n    let classList = cache.get(cacheKey);\n\n    if (!classList) {\n      classList = []; // Loop through `align`, `justify`, `alignContent` breakpoint props\n\n      let type;\n\n      for (type in propMap) {\n        propMap[type].forEach(prop => {\n          const value = props[prop];\n          const className = breakpointClass(type, prop, value);\n          if (className) classList.push(className);\n        });\n      }\n\n      classList.push({\n        'no-gutters': props.noGutters,\n        'row--dense': props.dense,\n        [`align-${props.align}`]: props.align,\n        [`justify-${props.justify}`]: props.justify,\n        [`align-content-${props.alignContent}`]: props.alignContent\n      });\n      cache.set(cacheKey, classList);\n    }\n\n    return h(props.tag, mergeData(data, {\n      staticClass: 'row',\n      class: classList\n    }), children);\n  }\n\n});\n//# sourceMappingURL=VRow.js.map","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mdedit.vue?vue&type=style&index=0&lang=css&\"","// Styles\nimport \"../../../src/components/VAutocomplete/VAutocomplete.sass\"; // Extensions\n\nimport VSelect, { defaultMenuProps as VSelectMenuProps } from '../VSelect/VSelect';\nimport VTextField from '../VTextField/VTextField'; // Utilities\n\nimport mergeData from '../../util/mergeData';\nimport { getObjectValueByPath, getPropertyFromItem, keyCodes } from '../../util/helpers';\nconst defaultMenuProps = { ...VSelectMenuProps,\n  offsetY: true,\n  offsetOverflow: true,\n  transition: false\n};\n/* @vue/component */\n\nexport default VSelect.extend({\n  name: 'v-autocomplete',\n  props: {\n    allowOverflow: {\n      type: Boolean,\n      default: true\n    },\n    autoSelectFirst: {\n      type: Boolean,\n      default: false\n    },\n    filter: {\n      type: Function,\n      default: (item, queryText, itemText) => {\n        return itemText.toLocaleLowerCase().indexOf(queryText.toLocaleLowerCase()) > -1;\n      }\n    },\n    hideNoData: Boolean,\n    menuProps: {\n      type: VSelect.options.props.menuProps.type,\n      default: () => defaultMenuProps\n    },\n    noFilter: Boolean,\n    searchInput: {\n      type: String\n    }\n  },\n\n  data() {\n    return {\n      lazySearch: this.searchInput\n    };\n  },\n\n  computed: {\n    classes() {\n      return { ...VSelect.options.computed.classes.call(this),\n        'v-autocomplete': true,\n        'v-autocomplete--is-selecting-index': this.selectedIndex > -1\n      };\n    },\n\n    computedItems() {\n      return this.filteredItems;\n    },\n\n    selectedValues() {\n      return this.selectedItems.map(item => this.getValue(item));\n    },\n\n    hasDisplayedItems() {\n      return this.hideSelected ? this.filteredItems.some(item => !this.hasItem(item)) : this.filteredItems.length > 0;\n    },\n\n    currentRange() {\n      if (this.selectedItem == null) return 0;\n      return String(this.getText(this.selectedItem)).length;\n    },\n\n    filteredItems() {\n      if (!this.isSearching || this.noFilter || this.internalSearch == null) return this.allItems;\n      return this.allItems.filter(item => {\n        const value = getPropertyFromItem(item, this.itemText);\n        const text = value != null ? String(value) : '';\n        return this.filter(item, String(this.internalSearch), text);\n      });\n    },\n\n    internalSearch: {\n      get() {\n        return this.lazySearch;\n      },\n\n      set(val) {\n        // emit update event only when the new\n        // search value is different from previous\n        if (this.lazySearch !== val) {\n          this.lazySearch = val;\n          this.$emit('update:search-input', val);\n        }\n      }\n\n    },\n\n    isAnyValueAllowed() {\n      return false;\n    },\n\n    isDirty() {\n      return this.searchIsDirty || this.selectedItems.length > 0;\n    },\n\n    isSearching() {\n      return this.multiple && this.searchIsDirty || this.searchIsDirty && this.internalSearch !== this.getText(this.selectedItem);\n    },\n\n    menuCanShow() {\n      if (!this.isFocused) return false;\n      return this.hasDisplayedItems || !this.hideNoData;\n    },\n\n    $_menuProps() {\n      const props = VSelect.options.computed.$_menuProps.call(this);\n      props.contentClass = `v-autocomplete__content ${props.contentClass || ''}`.trim();\n      return { ...defaultMenuProps,\n        ...props\n      };\n    },\n\n    searchIsDirty() {\n      return this.internalSearch != null && this.internalSearch !== '';\n    },\n\n    selectedItem() {\n      if (this.multiple) return null;\n      return this.selectedItems.find(i => {\n        return this.valueComparator(this.getValue(i), this.getValue(this.internalValue));\n      });\n    },\n\n    listData() {\n      const data = VSelect.options.computed.listData.call(this);\n      data.props = { ...data.props,\n        items: this.virtualizedItems,\n        noFilter: this.noFilter || !this.isSearching || !this.filteredItems.length,\n        searchInput: this.internalSearch\n      };\n      return data;\n    }\n\n  },\n  watch: {\n    filteredItems: 'onFilteredItemsChanged',\n    internalValue: 'setSearch',\n\n    isFocused(val) {\n      if (val) {\n        document.addEventListener('copy', this.onCopy);\n        this.$refs.input && this.$refs.input.select();\n      } else {\n        document.removeEventListener('copy', this.onCopy);\n        this.$refs.input && this.$refs.input.blur();\n        this.updateSelf();\n      }\n    },\n\n    isMenuActive(val) {\n      if (val || !this.hasSlot) return;\n      this.lazySearch = null;\n    },\n\n    items(val, oldVal) {\n      // If we are focused, the menu\n      // is not active, hide no data is enabled,\n      // and items change\n      // User is probably async loading\n      // items, try to activate the menu\n      if (!(oldVal && oldVal.length) && this.hideNoData && this.isFocused && !this.isMenuActive && val.length) this.activateMenu();\n    },\n\n    searchInput(val) {\n      this.lazySearch = val;\n    },\n\n    internalSearch: 'onInternalSearchChanged',\n    itemText: 'updateSelf'\n  },\n\n  created() {\n    this.setSearch();\n  },\n\n  destroyed() {\n    document.removeEventListener('copy', this.onCopy);\n  },\n\n  methods: {\n    onFilteredItemsChanged(val, oldVal) {\n      // TODO: How is the watcher triggered\n      // for duplicate items? no idea\n      if (val === oldVal) return;\n      this.setMenuIndex(-1);\n      this.$nextTick(() => {\n        if (!this.internalSearch || val.length !== 1 && !this.autoSelectFirst) return;\n        this.$refs.menu.getTiles();\n        this.setMenuIndex(0);\n      });\n    },\n\n    onInternalSearchChanged() {\n      this.updateMenuDimensions();\n    },\n\n    updateMenuDimensions() {\n      // Type from menuable is not making it through\n      this.isMenuActive && this.$refs.menu && this.$refs.menu.updateDimensions();\n    },\n\n    changeSelectedIndex(keyCode) {\n      // Do not allow changing of selectedIndex\n      // when search is dirty\n      if (this.searchIsDirty) return;\n\n      if (this.multiple && keyCode === keyCodes.left) {\n        if (this.selectedIndex === -1) {\n          this.selectedIndex = this.selectedItems.length - 1;\n        } else {\n          this.selectedIndex--;\n        }\n      } else if (this.multiple && keyCode === keyCodes.right) {\n        if (this.selectedIndex >= this.selectedItems.length - 1) {\n          this.selectedIndex = -1;\n        } else {\n          this.selectedIndex++;\n        }\n      } else if (keyCode === keyCodes.backspace || keyCode === keyCodes.delete) {\n        this.deleteCurrentItem();\n      }\n    },\n\n    deleteCurrentItem() {\n      const curIndex = this.selectedIndex;\n      const curItem = this.selectedItems[curIndex]; // Do nothing if input or item is disabled\n\n      if (!this.isInteractive || this.getDisabled(curItem)) return;\n      const lastIndex = this.selectedItems.length - 1; // Select the last item if\n      // there is no selection\n\n      if (this.selectedIndex === -1 && lastIndex !== 0) {\n        this.selectedIndex = lastIndex;\n        return;\n      }\n\n      const length = this.selectedItems.length;\n      const nextIndex = curIndex !== length - 1 ? curIndex : curIndex - 1;\n      const nextItem = this.selectedItems[nextIndex];\n\n      if (!nextItem) {\n        this.setValue(this.multiple ? [] : null);\n      } else {\n        this.selectItem(curItem);\n      }\n\n      this.selectedIndex = nextIndex;\n    },\n\n    clearableCallback() {\n      this.internalSearch = null;\n      VSelect.options.methods.clearableCallback.call(this);\n    },\n\n    genInput() {\n      const input = VTextField.options.methods.genInput.call(this);\n      input.data = mergeData(input.data, {\n        attrs: {\n          'aria-activedescendant': getObjectValueByPath(this.$refs.menu, 'activeTile.id'),\n          autocomplete: getObjectValueByPath(input.data, 'attrs.autocomplete', 'off')\n        },\n        domProps: {\n          value: this.internalSearch\n        }\n      });\n      return input;\n    },\n\n    genInputSlot() {\n      const slot = VSelect.options.methods.genInputSlot.call(this);\n      slot.data.attrs.role = 'combobox';\n      return slot;\n    },\n\n    genSelections() {\n      return this.hasSlot || this.multiple ? VSelect.options.methods.genSelections.call(this) : [];\n    },\n\n    onClick(e) {\n      if (!this.isInteractive) return;\n      this.selectedIndex > -1 ? this.selectedIndex = -1 : this.onFocus();\n      if (!this.isAppendInner(e.target)) this.activateMenu();\n    },\n\n    onInput(e) {\n      if (this.selectedIndex > -1 || !e.target) return;\n      const target = e.target;\n      const value = target.value; // If typing and menu is not currently active\n\n      if (target.value) this.activateMenu();\n      this.internalSearch = value;\n      this.badInput = target.validity && target.validity.badInput;\n    },\n\n    onKeyDown(e) {\n      const keyCode = e.keyCode;\n\n      if (e.ctrlKey || ![keyCodes.home, keyCodes.end].includes(keyCode)) {\n        VSelect.options.methods.onKeyDown.call(this, e);\n      } // The ordering is important here\n      // allows new value to be updated\n      // and then moves the index to the\n      // proper location\n\n\n      this.changeSelectedIndex(keyCode);\n    },\n\n    onSpaceDown(e) {},\n\n    onTabDown(e) {\n      VSelect.options.methods.onTabDown.call(this, e);\n      this.updateSelf();\n    },\n\n    onUpDown(e) {\n      // Prevent screen from scrolling\n      e.preventDefault(); // For autocomplete / combobox, cycling\n      // interfers with native up/down behavior\n      // instead activate the menu\n\n      this.activateMenu();\n    },\n\n    selectItem(item) {\n      VSelect.options.methods.selectItem.call(this, item);\n      this.setSearch();\n    },\n\n    setSelectedItems() {\n      VSelect.options.methods.setSelectedItems.call(this); // #4273 Don't replace if searching\n      // #4403 Don't replace if focused\n\n      if (!this.isFocused) this.setSearch();\n    },\n\n    setSearch() {\n      // Wait for nextTick so selectedItem\n      // has had time to update\n      this.$nextTick(() => {\n        if (!this.multiple || !this.internalSearch || !this.isMenuActive) {\n          this.internalSearch = !this.selectedItems.length || this.multiple || this.hasSlot ? null : this.getText(this.selectedItem);\n        }\n      });\n    },\n\n    updateSelf() {\n      if (!this.searchIsDirty && !this.internalValue) return;\n\n      if (!this.multiple && !this.valueComparator(this.internalSearch, this.getValue(this.internalValue))) {\n        this.setSearch();\n      }\n    },\n\n    hasItem(item) {\n      return this.selectedValues.indexOf(this.getValue(item)) > -1;\n    },\n\n    onCopy(event) {\n      var _event$clipboardData, _event$clipboardData2;\n\n      if (this.selectedIndex === -1) return;\n      const currentItem = this.selectedItems[this.selectedIndex];\n      const currentItemText = this.getText(currentItem);\n      (_event$clipboardData = event.clipboardData) == null ? void 0 : _event$clipboardData.setData('text/plain', currentItemText);\n      (_event$clipboardData2 = event.clipboardData) == null ? void 0 : _event$clipboardData2.setData('text/vnd.vuetify.autocomplete.item+plain', currentItemText);\n      event.preventDefault();\n    }\n\n  }\n});\n//# sourceMappingURL=VAutocomplete.js.map","// Styles\nimport \"../../../src/components/VAutocomplete/VAutocomplete.sass\"; // Extensions\n\nimport VSelect from '../VSelect/VSelect';\nimport VAutocomplete from '../VAutocomplete/VAutocomplete'; // Utils\n\nimport { keyCodes } from '../../util/helpers';\n/* @vue/component */\n\nexport default VAutocomplete.extend({\n  name: 'v-combobox',\n  props: {\n    delimiters: {\n      type: Array,\n      default: () => []\n    },\n    returnObject: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data: () => ({\n    editingIndex: -1\n  }),\n  computed: {\n    computedCounterValue() {\n      return this.multiple ? this.selectedItems.length : (this.internalSearch || '').toString().length;\n    },\n\n    hasSlot() {\n      return VSelect.options.computed.hasSlot.call(this) || this.multiple;\n    },\n\n    isAnyValueAllowed() {\n      return true;\n    },\n\n    menuCanShow() {\n      if (!this.isFocused) return false;\n      return this.hasDisplayedItems || !!this.$slots['no-data'] && !this.hideNoData;\n    },\n\n    searchIsDirty() {\n      return this.internalSearch != null;\n    }\n\n  },\n  methods: {\n    onInternalSearchChanged(val) {\n      if (val && this.multiple && this.delimiters.length) {\n        const delimiter = this.delimiters.find(d => val.endsWith(d));\n\n        if (delimiter != null) {\n          this.internalSearch = val.slice(0, val.length - delimiter.length);\n          this.updateTags();\n        }\n      }\n\n      this.updateMenuDimensions();\n    },\n\n    genInput() {\n      const input = VAutocomplete.options.methods.genInput.call(this);\n      delete input.data.attrs.name;\n      input.data.on.paste = this.onPaste;\n      return input;\n    },\n\n    genChipSelection(item, index) {\n      const chip = VSelect.options.methods.genChipSelection.call(this, item, index); // Allow user to update an existing value\n\n      if (this.multiple) {\n        chip.componentOptions.listeners = { ...chip.componentOptions.listeners,\n          dblclick: () => {\n            this.editingIndex = index;\n            this.internalSearch = this.getText(item);\n            this.selectedIndex = -1;\n          }\n        };\n      }\n\n      return chip;\n    },\n\n    onChipInput(item) {\n      VSelect.options.methods.onChipInput.call(this, item);\n      this.editingIndex = -1;\n    },\n\n    // Requires a manual definition\n    // to overwrite removal in v-autocomplete\n    onEnterDown(e) {\n      e.preventDefault(); // If has menu index, let v-select-list handle\n\n      if (this.getMenuIndex() > -1) return;\n      this.$nextTick(this.updateSelf);\n    },\n\n    onFilteredItemsChanged(val, oldVal) {\n      if (!this.autoSelectFirst) return;\n      VAutocomplete.options.methods.onFilteredItemsChanged.call(this, val, oldVal);\n    },\n\n    onKeyDown(e) {\n      const keyCode = e.keyCode;\n\n      if (e.ctrlKey || ![keyCodes.home, keyCodes.end].includes(keyCode)) {\n        VSelect.options.methods.onKeyDown.call(this, e);\n      } // If user is at selection index of 0\n      // create a new tag\n\n\n      if (this.multiple && keyCode === keyCodes.left && this.$refs.input.selectionStart === 0) {\n        this.updateSelf();\n      } else if (keyCode === keyCodes.enter) {\n        this.onEnterDown(e);\n      } // The ordering is important here\n      // allows new value to be updated\n      // and then moves the index to the\n      // proper location\n\n\n      this.changeSelectedIndex(keyCode);\n    },\n\n    onTabDown(e) {\n      // When adding tags, if searching and\n      // there is not a filtered options,\n      // add the value to the tags list\n      if (this.multiple && this.internalSearch && this.getMenuIndex() === -1) {\n        e.preventDefault();\n        e.stopPropagation();\n        return this.updateTags();\n      }\n\n      VAutocomplete.options.methods.onTabDown.call(this, e);\n    },\n\n    selectItem(item) {\n      // Currently only supports items:<string[]>\n      if (this.editingIndex > -1) {\n        this.updateEditing();\n      } else {\n        VAutocomplete.options.methods.selectItem.call(this, item); // if selected item contains search value,\n        // remove the search string\n\n        if (this.internalSearch && this.multiple && this.getText(item).toLocaleLowerCase().includes(this.internalSearch.toLocaleLowerCase())) {\n          this.internalSearch = null;\n        }\n      }\n    },\n\n    setSelectedItems() {\n      if (this.internalValue == null || this.internalValue === '') {\n        this.selectedItems = [];\n      } else {\n        this.selectedItems = this.multiple ? this.internalValue : [this.internalValue];\n      }\n    },\n\n    setValue(value) {\n      VSelect.options.methods.setValue.call(this, value != null ? value : this.internalSearch);\n    },\n\n    updateEditing() {\n      const value = this.internalValue.slice();\n      const index = this.selectedItems.findIndex(item => this.getText(item) === this.internalSearch); // If user enters a duplicate text on chip edit,\n      // don't add it, move it to the end of the list\n\n      if (index > -1) {\n        const item = typeof value[index] === 'object' ? Object.assign({}, value[index]) : value[index];\n        value.splice(index, 1);\n        value.push(item);\n      } else {\n        value[this.editingIndex] = this.internalSearch;\n      }\n\n      this.setValue(value);\n      this.editingIndex = -1;\n      this.internalSearch = null;\n    },\n\n    updateCombobox() {\n      // If search is not dirty, do nothing\n      if (!this.searchIsDirty) return; // The internal search is not matching\n      // the internal value, update the input\n\n      if (this.internalSearch !== this.getText(this.internalValue)) this.setValue(); // Reset search if using slot to avoid a double input\n\n      const isUsingSlot = Boolean(this.$scopedSlots.selection) || this.hasChips;\n      if (isUsingSlot) this.internalSearch = null;\n    },\n\n    updateSelf() {\n      this.multiple ? this.updateTags() : this.updateCombobox();\n    },\n\n    updateTags() {\n      const menuIndex = this.getMenuIndex(); // If the user is not searching\n      // and no menu item is selected\n      // or if the search is empty\n      // do nothing\n\n      if (menuIndex < 0 && !this.searchIsDirty || !this.internalSearch) return;\n\n      if (this.editingIndex > -1) {\n        return this.updateEditing();\n      }\n\n      const index = this.selectedItems.findIndex(item => this.internalSearch === this.getText(item)); // If the duplicate item is an object,\n      // copy it, so that it can be added again later\n\n      const itemToSelect = index > -1 && typeof this.selectedItems[index] === 'object' ? Object.assign({}, this.selectedItems[index]) : this.internalSearch; // If it already exists, do nothing\n      // this might need to change to bring\n      // the duplicated item to the last entered\n\n      if (index > -1) {\n        const internalValue = this.internalValue.slice();\n        internalValue.splice(index, 1);\n        this.setValue(internalValue);\n      } // If menu index is greater than 1\n      // the selection is handled elsewhere\n      // TODO: find out where\n\n\n      if (menuIndex > -1) return this.internalSearch = null;\n      this.selectItem(itemToSelect);\n      this.internalSearch = null;\n    },\n\n    onPaste(event) {\n      var _event$clipboardData;\n\n      if (!this.multiple || this.searchIsDirty) return;\n      const pastedItemText = (_event$clipboardData = event.clipboardData) == null ? void 0 : _event$clipboardData.getData('text/vnd.vuetify.autocomplete.item+plain');\n\n      if (pastedItemText && this.findExistingIndex(pastedItemText) === -1) {\n        event.preventDefault();\n        VSelect.options.methods.selectItem.call(this, pastedItemText);\n      }\n    },\n\n    clearableCallback() {\n      this.editingIndex = -1;\n      VAutocomplete.options.methods.clearableCallback.call(this);\n    }\n\n  }\n});\n//# sourceMappingURL=VCombobox.js.map","import \"../../../src/components/VGrid/VGrid.sass\";\nimport Vue from 'vue';\nimport mergeData from '../../util/mergeData';\nimport { upperFirst } from '../../util/helpers'; // no xs\n\nconst breakpoints = ['sm', 'md', 'lg', 'xl'];\n\nconst breakpointProps = (() => {\n  return breakpoints.reduce((props, val) => {\n    props[val] = {\n      type: [Boolean, String, Number],\n      default: false\n    };\n    return props;\n  }, {});\n})();\n\nconst offsetProps = (() => {\n  return breakpoints.reduce((props, val) => {\n    props['offset' + upperFirst(val)] = {\n      type: [String, Number],\n      default: null\n    };\n    return props;\n  }, {});\n})();\n\nconst orderProps = (() => {\n  return breakpoints.reduce((props, val) => {\n    props['order' + upperFirst(val)] = {\n      type: [String, Number],\n      default: null\n    };\n    return props;\n  }, {});\n})();\n\nconst propMap = {\n  col: Object.keys(breakpointProps),\n  offset: Object.keys(offsetProps),\n  order: Object.keys(orderProps)\n};\n\nfunction breakpointClass(type, prop, val) {\n  let className = type;\n\n  if (val == null || val === false) {\n    return undefined;\n  }\n\n  if (prop) {\n    const breakpoint = prop.replace(type, '');\n    className += `-${breakpoint}`;\n  } // Handling the boolean style prop when accepting [Boolean, String, Number]\n  // means Vue will not convert <v-col sm></v-col> to sm: true for us.\n  // Since the default is false, an empty string indicates the prop's presence.\n\n\n  if (type === 'col' && (val === '' || val === true)) {\n    // .col-md\n    return className.toLowerCase();\n  } // .order-md-6\n\n\n  className += `-${val}`;\n  return className.toLowerCase();\n}\n\nconst cache = new Map();\nexport default Vue.extend({\n  name: 'v-col',\n  functional: true,\n  props: {\n    cols: {\n      type: [Boolean, String, Number],\n      default: false\n    },\n    ...breakpointProps,\n    offset: {\n      type: [String, Number],\n      default: null\n    },\n    ...offsetProps,\n    order: {\n      type: [String, Number],\n      default: null\n    },\n    ...orderProps,\n    alignSelf: {\n      type: String,\n      default: null,\n      validator: str => ['auto', 'start', 'end', 'center', 'baseline', 'stretch'].includes(str)\n    },\n    tag: {\n      type: String,\n      default: 'div'\n    }\n  },\n\n  render(h, {\n    props,\n    data,\n    children,\n    parent\n  }) {\n    // Super-fast memoization based on props, 5x faster than JSON.stringify\n    let cacheKey = '';\n\n    for (const prop in props) {\n      cacheKey += String(props[prop]);\n    }\n\n    let classList = cache.get(cacheKey);\n\n    if (!classList) {\n      classList = []; // Loop through `col`, `offset`, `order` breakpoint props\n\n      let type;\n\n      for (type in propMap) {\n        propMap[type].forEach(prop => {\n          const value = props[prop];\n          const className = breakpointClass(type, prop, value);\n          if (className) classList.push(className);\n        });\n      }\n\n      const hasColClasses = classList.some(className => className.startsWith('col-'));\n      classList.push({\n        // Default to .col if no other col-{bp}-* classes generated nor `cols` specified.\n        col: !hasColClasses || !props.cols,\n        [`col-${props.cols}`]: props.cols,\n        [`offset-${props.offset}`]: props.offset,\n        [`order-${props.order}`]: props.order,\n        [`align-self-${props.alignSelf}`]: props.alignSelf\n      });\n      cache.set(cacheKey, classList);\n    }\n\n    return h(props.tag, mergeData(data, {\n      class: classList\n    }), children);\n  }\n\n});\n//# sourceMappingURL=VCol.js.map","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isLoading),expression:\"isLoading\"}],staticClass:\"index-page\"},[_c('div',{staticClass:\"vditor\",staticStyle:{\"height\":\"650px\",\"width\":\"auto\"},attrs:{\"id\":\"vditor\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"index-page\" v-loading=\"isLoading\">\r\n        <div id=\"vditor\" class=\"vditor\" style=\"height: 650px; width: auto;\" />\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Vditor from \"vditor\";\r\nimport \"vditor/dist/index.css\";\r\n//   import { getToken } from '@/utils/auth'\r\nexport default {\r\n    name: \"Mdedit\",\r\n    props: {\r\n        // content: \"\"\r\n    },\r\n    data() {\r\n        return {\r\n            isLoading: true,\r\n            isMobile: window.innerWidth <= 960,\r\n            vditor: null\r\n        };\r\n    },\r\n    created() {},\r\n    components: {},\r\n    // computed: {\r\n    //     vditorClass: function() {\r\n    //         return {\r\n    //             height: this.height + \"px\"\r\n    //         };\r\n    //     }\r\n    // },\r\n    mounted() {\r\n        this.initVditor();\r\n    },\r\n    methods: {\r\n        initVditor() {\r\n            const options = {\r\n                height: 660,\r\n                icon: \"material\",\r\n                // theme: \"dark\",\r\n                IHljs: {\r\n                    lineNumber: true,\r\n                    style: \"monokai\"\r\n                },\r\n                toolbarConfig: {\r\n                    pin: true\r\n                },\r\n                cache: {\r\n                    enable: true\r\n                },\r\n                outline: true\r\n                // after: () => {\r\n                //     this.vditor.setValue(this.content);\r\n                // }\r\n            };\r\n            this.vditor = new Vditor(\"vditor\", options);\r\n            // return vditor\r\n        },\r\n        //获取data\r\n        getData() {\r\n            return this.vditor.getValue();\r\n        },\r\n        //获取渲染文本\r\n        getHTML() {\r\n            return this.vditor.getHTML();\r\n        },\r\n        setData(content) {\r\n            this.vditor.setValue(this.vditor.html2md(content));\r\n        },\r\n\r\n        settheme() {\r\n            this.vditor = new Vditor(\"vditor\", {\r\n                height: 660,\r\n                icon: \"material\",\r\n                theme: \"dark\",\r\n                IHljs: {\r\n                    lineNumber: true,\r\n                    style: \"monokai\"\r\n                },\r\n                toolbarConfig: {\r\n                    pin: true\r\n                },\r\n                cache: {\r\n                    enable: true\r\n                },\r\n                outline: true\r\n                // after: () => {\r\n                //     this.vditor.setValue(this.content);\r\n                // }\r\n            });\r\n        }\r\n        // setData: function(data) {\r\n        //     // console.log(\"将html转\", this.vditor.html2md(data))\r\n        //     var that = this;\r\n        //     this.$nextTick(() => {\r\n        //         //DOM现在更新了\r\n        //         that.initVditor();\r\n\r\n        //         let markdownText = that.$commonUtil.htmlToMarkdown(data);\r\n        //         console.log(\"转换前\", data);\r\n        //         console.log(\"得到的html\", markdownText);\r\n        //         localStorage.setItem(\"vditorvditor\", markdownText);\r\n        //     });\r\n        // }\r\n    }\r\n};\r\n</script>\r\n\r\n<style>\r\n.vditor-panel {\r\n    line-height: 0px;\r\n}\r\n.index-page {\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: #ffffff;\r\n}\r\n.vditor {\r\n    width: 100%;\r\n    /*height: calc(100vh - 100px);*/\r\n    top: 20px;\r\n    /*margin: 20px auto;*/\r\n    text-align: left;\r\n}\r\n.vditor-reset {\r\n    font-size: 14px;\r\n}\r\n.vditor-textarea {\r\n    font-size: 14px;\r\n    height: 100% !important;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mdedit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mdedit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mdedit.vue?vue&type=template&id=12e74f62&\"\nimport script from \"./mdedit.vue?vue&type=script&lang=js&\"\nexport * from \"./mdedit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./mdedit.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Types\nimport Vue from 'vue';\nexport default function VGrid(name) {\n  /* @vue/component */\n  return Vue.extend({\n    name: `v-${name}`,\n    functional: true,\n    props: {\n      id: String,\n      tag: {\n        type: String,\n        default: 'div'\n      }\n    },\n\n    render(h, {\n      props,\n      data,\n      children\n    }) {\n      data.staticClass = `${name} ${data.staticClass || ''}`.trim();\n      const {\n        attrs\n      } = data;\n\n      if (attrs) {\n        // reset attrs to extract utility clases like pa-3\n        data.attrs = {};\n        const classes = Object.keys(attrs).filter(key => {\n          // TODO: Remove once resolved\n          // https://github.com/vuejs/vue/issues/7841\n          if (key === 'slot') return false;\n          const value = attrs[key]; // add back data attributes like data-test=\"foo\" but do not\n          // add them as classes\n\n          if (key.startsWith('data-')) {\n            data.attrs[key] = value;\n            return false;\n          }\n\n          return value || typeof value === 'string';\n        });\n        if (classes.length) data.staticClass += ` ${classes.join(' ')}`;\n      }\n\n      if (props.id) {\n        data.domProps = data.domProps || {};\n        data.domProps.id = props.id;\n      }\n\n      return h(props.tag, data, children);\n    }\n\n  });\n}\n//# sourceMappingURL=grid.js.map","import \"../../../src/components/VGrid/_grid.sass\";\nimport \"../../../src/components/VGrid/VGrid.sass\";\nimport Grid from './grid';\nimport mergeData from '../../util/mergeData';\n/* @vue/component */\n\nexport default Grid('container').extend({\n  name: 'v-container',\n  functional: true,\n  props: {\n    id: String,\n    tag: {\n      type: String,\n      default: 'div'\n    },\n    fluid: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  render(h, {\n    props,\n    data,\n    children\n  }) {\n    let classes;\n    const {\n      attrs\n    } = data;\n\n    if (attrs) {\n      // reset attrs to extract utility clases like pa-3\n      data.attrs = {};\n      classes = Object.keys(attrs).filter(key => {\n        // TODO: Remove once resolved\n        // https://github.com/vuejs/vue/issues/7841\n        if (key === 'slot') return false;\n        const value = attrs[key]; // add back data attributes like data-test=\"foo\" but do not\n        // add them as classes\n\n        if (key.startsWith('data-')) {\n          data.attrs[key] = value;\n          return false;\n        }\n\n        return value || typeof value === 'string';\n      });\n    }\n\n    if (props.id) {\n      data.domProps = data.domProps || {};\n      data.domProps.id = props.id;\n    }\n\n    return h(props.tag, mergeData(data, {\n      staticClass: 'container',\n      class: Array({\n        'container--fluid': props.fluid\n      }).concat(classes || [])\n    }), children);\n  }\n\n});\n//# sourceMappingURL=VContainer.js.map","/*!\n * Vditor v3.8.6 - A markdown editor written in TypeScript.\n *\n * MIT License\n *\n * Copyright (c) 2018-present B3log 开源, b3log.org\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Vditor\"] = factory();\n\telse\n\t\troot[\"Vditor\"] = factory();\n})(this, function() {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 694:\n/***/ ((module) => {\n\n/**\n * Diff Match and Patch\n * Copyright 2018 The diff-match-patch Authors.\n * https://github.com/google/diff-match-patch\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Computes the difference between two texts to create a patch.\n * Applies the patch onto another text, allowing for errors.\n * @author fraser@google.com (Neil Fraser)\n */\n\n/**\n * Class containing the diff, match and patch methods.\n * @constructor\n */\nvar diff_match_patch = function () {\n  // Defaults.\n  // Redefine these in your program to override the defaults.\n  // Number of seconds to map a diff before giving up (0 for infinity).\n  this.Diff_Timeout = 1.0; // Cost of an empty edit operation in terms of edit characters.\n\n  this.Diff_EditCost = 4; // At what point is no match declared (0.0 = perfection, 1.0 = very loose).\n\n  this.Match_Threshold = 0.5; // How far to search for a match (0 = exact location, 1000+ = broad match).\n  // A match this many characters away from the expected location will add\n  // 1.0 to the score (0.0 is a perfect match).\n\n  this.Match_Distance = 1000; // When deleting a large block of text (over ~64 characters), how close do\n  // the contents have to be to match the expected contents. (0.0 = perfection,\n  // 1.0 = very loose).  Note that Match_Threshold controls how closely the\n  // end points of a delete need to match.\n\n  this.Patch_DeleteThreshold = 0.5; // Chunk size for context length.\n\n  this.Patch_Margin = 4; // The number of bits in an int.\n\n  this.Match_MaxBits = 32;\n}; //  DIFF FUNCTIONS\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\n\n\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n/**\n * Class representing one diff tuple.\n * ~Attempts to look like a two-element array (which is what this used to be).~\n * Constructor returns an actual two-element array, to allow destructing @JackuB\n * See https://github.com/JackuB/diff-match-patch/issues/14 for details\n * @param {number} op Operation, one of: DIFF_DELETE, DIFF_INSERT, DIFF_EQUAL.\n * @param {string} text Text to be deleted, inserted, or retained.\n * @constructor\n */\n\ndiff_match_patch.Diff = function (op, text) {\n  return [op, text];\n};\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean=} opt_checklines Optional speedup flag. If present and false,\n *     then don't run a line-level diff first to identify the changed areas.\n *     Defaults to true, which does a faster, slightly less optimal diff.\n * @param {number=} opt_deadline Optional time when the diff should be complete\n *     by.  Used internally for recursive calls.  Users should set DiffTimeout\n *     instead.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n */\n\n\ndiff_match_patch.prototype.diff_main = function (text1, text2, opt_checklines, opt_deadline) {\n  // Set a deadline by which time the diff must be complete.\n  if (typeof opt_deadline == 'undefined') {\n    if (this.Diff_Timeout <= 0) {\n      opt_deadline = Number.MAX_VALUE;\n    } else {\n      opt_deadline = new Date().getTime() + this.Diff_Timeout * 1000;\n    }\n  }\n\n  var deadline = opt_deadline; // Check for null inputs.\n\n  if (text1 == null || text2 == null) {\n    throw new Error('Null input. (diff_main)');\n  } // Check for equality (speedup).\n\n\n  if (text1 == text2) {\n    if (text1) {\n      return [new diff_match_patch.Diff(DIFF_EQUAL, text1)];\n    }\n\n    return [];\n  }\n\n  if (typeof opt_checklines == 'undefined') {\n    opt_checklines = true;\n  }\n\n  var checklines = opt_checklines; // Trim off common prefix (speedup).\n\n  var commonlength = this.diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength); // Trim off common suffix (speedup).\n\n  commonlength = this.diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength); // Compute the diff on the middle block.\n\n  var diffs = this.diff_compute_(text1, text2, checklines, deadline); // Restore the prefix and suffix.\n\n  if (commonprefix) {\n    diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, commonprefix));\n  }\n\n  if (commonsuffix) {\n    diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, commonsuffix));\n  }\n\n  this.diff_cleanupMerge(diffs);\n  return diffs;\n};\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean} checklines Speedup flag.  If false, then don't run a\n *     line-level diff first to identify the changed areas.\n *     If true, then run a faster, slightly less optimal diff.\n * @param {number} deadline Time when the diff should be complete by.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_compute_ = function (text1, text2, checklines, deadline) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [new diff_match_patch.Diff(DIFF_INSERT, text2)];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [new diff_match_patch.Diff(DIFF_DELETE, text1)];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n\n  if (i != -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [new diff_match_patch.Diff(DIFF_INSERT, longtext.substring(0, i)), new diff_match_patch.Diff(DIFF_EQUAL, shorttext), new diff_match_patch.Diff(DIFF_INSERT, longtext.substring(i + shorttext.length))]; // Swap insertions for deletions if diff is reversed.\n\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n\n    return diffs;\n  }\n\n  if (shorttext.length == 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [new diff_match_patch.Diff(DIFF_DELETE, text1), new diff_match_patch.Diff(DIFF_INSERT, text2)];\n  } // Check to see if the problem can be split in two.\n\n\n  var hm = this.diff_halfMatch_(text1, text2);\n\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4]; // Send both pairs off for separate processing.\n\n    var diffs_a = this.diff_main(text1_a, text2_a, checklines, deadline);\n    var diffs_b = this.diff_main(text1_b, text2_b, checklines, deadline); // Merge the results.\n\n    return diffs_a.concat([new diff_match_patch.Diff(DIFF_EQUAL, mid_common)], diffs_b);\n  }\n\n  if (checklines && text1.length > 100 && text2.length > 100) {\n    return this.diff_lineMode_(text1, text2, deadline);\n  }\n\n  return this.diff_bisect_(text1, text2, deadline);\n};\n/**\n * Do a quick line-level diff on both strings, then rediff the parts for\n * greater accuracy.\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} deadline Time when the diff should be complete by.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_lineMode_ = function (text1, text2, deadline) {\n  // Scan the text on a line-by-line basis first.\n  var a = this.diff_linesToChars_(text1, text2);\n  text1 = a.chars1;\n  text2 = a.chars2;\n  var linearray = a.lineArray;\n  var diffs = this.diff_main(text1, text2, false, deadline); // Convert the diff back to original text.\n\n  this.diff_charsToLines_(diffs, linearray); // Eliminate freak matches (e.g. blank lines)\n\n  this.diff_cleanupSemantic(diffs); // Rediff any replacement blocks, this time character-by-character.\n  // Add a dummy entry at the end.\n\n  diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, ''));\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        break;\n\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        break;\n\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete >= 1 && count_insert >= 1) {\n          // Delete the offending records and add the merged ones.\n          diffs.splice(pointer - count_delete - count_insert, count_delete + count_insert);\n          pointer = pointer - count_delete - count_insert;\n          var subDiff = this.diff_main(text_delete, text_insert, false, deadline);\n\n          for (var j = subDiff.length - 1; j >= 0; j--) {\n            diffs.splice(pointer, 0, subDiff[j]);\n          }\n\n          pointer = pointer + subDiff.length;\n        }\n\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n\n    pointer++;\n  }\n\n  diffs.pop(); // Remove the dummy entry at the end.\n\n  return diffs;\n};\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} deadline Time at which to bail if not yet complete.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_bisect_ = function (text1, text2, deadline) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length); // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length; // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n\n  var front = delta % 2 != 0; // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n\n  for (var d = 0; d < max_d; d++) {\n    // Bail out if deadline is reached.\n    if (new Date().getTime() > deadline) {\n      break;\n    } // Walk the front path one step.\n\n\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n\n      if (k1 == -d || k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1]) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n\n      var y1 = x1 - k1;\n\n      while (x1 < text1_length && y1 < text2_length && text1.charAt(x1) == text2.charAt(y1)) {\n        x1++;\n        y1++;\n      }\n\n      v1[k1_offset] = x1;\n\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n\n          if (x1 >= x2) {\n            // Overlap detected.\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n          }\n        }\n      }\n    } // Walk the reverse path one step.\n\n\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n\n      if (k2 == -d || k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1]) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n\n      var y2 = x2 - k2;\n\n      while (x2 < text1_length && y2 < text2_length && text1.charAt(text1_length - x2 - 1) == text2.charAt(text2_length - y2 - 1)) {\n        x2++;\n        y2++;\n      }\n\n      v2[k2_offset] = x2;\n\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset; // Mirror x2 onto top-left coordinate system.\n\n          x2 = text1_length - x2;\n\n          if (x1 >= x2) {\n            // Overlap detected.\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n          }\n        }\n      }\n    }\n  } // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n\n\n  return [new diff_match_patch.Diff(DIFF_DELETE, text1), new diff_match_patch.Diff(DIFF_INSERT, text2)];\n};\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @param {number} deadline Time at which to bail if not yet complete.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_bisectSplit_ = function (text1, text2, x, y, deadline) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y); // Compute both diffs serially.\n\n  var diffs = this.diff_main(text1a, text2a, false, deadline);\n  var diffsb = this.diff_main(text1b, text2b, false, deadline);\n  return diffs.concat(diffsb);\n};\n/**\n * Split two texts into an array of strings.  Reduce the texts to a string of\n * hashes where each Unicode character represents one line.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {{chars1: string, chars2: string, lineArray: !Array.<string>}}\n *     An object containing the encoded text1, the encoded text2 and\n *     the array of unique strings.\n *     The zeroth element of the array of unique strings is intentionally blank.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_linesToChars_ = function (text1, text2) {\n  var lineArray = []; // e.g. lineArray[4] == 'Hello\\n'\n\n  var lineHash = {}; // e.g. lineHash['Hello\\n'] == 4\n  // '\\x00' is a valid character, but various debuggers don't like it.\n  // So we'll insert a junk entry to avoid generating a null character.\n\n  lineArray[0] = '';\n  /**\n   * Split a text into an array of strings.  Reduce the texts to a string of\n   * hashes where each Unicode character represents one line.\n   * Modifies linearray and linehash through being a closure.\n   * @param {string} text String to encode.\n   * @return {string} Encoded string.\n   * @private\n   */\n\n  function diff_linesToCharsMunge_(text) {\n    var chars = ''; // Walk the text, pulling out a substring for each line.\n    // text.split('\\n') would would temporarily double our memory footprint.\n    // Modifying text would create many large strings to garbage collect.\n\n    var lineStart = 0;\n    var lineEnd = -1; // Keeping our own length variable is faster than looking it up.\n\n    var lineArrayLength = lineArray.length;\n\n    while (lineEnd < text.length - 1) {\n      lineEnd = text.indexOf('\\n', lineStart);\n\n      if (lineEnd == -1) {\n        lineEnd = text.length - 1;\n      }\n\n      var line = text.substring(lineStart, lineEnd + 1);\n\n      if (lineHash.hasOwnProperty ? lineHash.hasOwnProperty(line) : lineHash[line] !== undefined) {\n        chars += String.fromCharCode(lineHash[line]);\n      } else {\n        if (lineArrayLength == maxLines) {\n          // Bail out at 65535 because\n          // String.fromCharCode(65536) == String.fromCharCode(0)\n          line = text.substring(lineStart);\n          lineEnd = text.length;\n        }\n\n        chars += String.fromCharCode(lineArrayLength);\n        lineHash[line] = lineArrayLength;\n        lineArray[lineArrayLength++] = line;\n      }\n\n      lineStart = lineEnd + 1;\n    }\n\n    return chars;\n  } // Allocate 2/3rds of the space for text1, the rest for text2.\n\n\n  var maxLines = 40000;\n  var chars1 = diff_linesToCharsMunge_(text1);\n  maxLines = 65535;\n  var chars2 = diff_linesToCharsMunge_(text2);\n  return {\n    chars1: chars1,\n    chars2: chars2,\n    lineArray: lineArray\n  };\n};\n/**\n * Rehydrate the text in a diff from a string of line hashes to real lines of\n * text.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @param {!Array.<string>} lineArray Array of unique strings.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_charsToLines_ = function (diffs, lineArray) {\n  for (var i = 0; i < diffs.length; i++) {\n    var chars = diffs[i][1];\n    var text = [];\n\n    for (var j = 0; j < chars.length; j++) {\n      text[j] = lineArray[chars.charCodeAt(j)];\n    }\n\n    diffs[i][1] = text.join('');\n  }\n};\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\n\n\ndiff_match_patch.prototype.diff_commonPrefix = function (text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\n    return 0;\n  } // Binary search.\n  // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n\n\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n\n  while (pointermin < pointermid) {\n    if (text1.substring(pointerstart, pointermid) == text2.substring(pointerstart, pointermid)) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  return pointermid;\n};\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\n\n\ndiff_match_patch.prototype.diff_commonSuffix = function (text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\n    return 0;\n  } // Binary search.\n  // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n\n\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n\n  while (pointermin < pointermid) {\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) == text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  return pointermid;\n};\n/**\n * Determine if the suffix of one string is the prefix of another.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of the first\n *     string and the start of the second string.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_commonOverlap_ = function (text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length; // Eliminate the null case.\n\n  if (text1_length == 0 || text2_length == 0) {\n    return 0;\n  } // Truncate the longer string.\n\n\n  if (text1_length > text2_length) {\n    text1 = text1.substring(text1_length - text2_length);\n  } else if (text1_length < text2_length) {\n    text2 = text2.substring(0, text1_length);\n  }\n\n  var text_length = Math.min(text1_length, text2_length); // Quick check for the worst case.\n\n  if (text1 == text2) {\n    return text_length;\n  } // Start by looking for a single character match\n  // and increase length until no match is found.\n  // Performance analysis: https://neil.fraser.name/news/2010/11/04/\n\n\n  var best = 0;\n  var length = 1;\n\n  while (true) {\n    var pattern = text1.substring(text_length - length);\n    var found = text2.indexOf(pattern);\n\n    if (found == -1) {\n      return best;\n    }\n\n    length += found;\n\n    if (found == 0 || text1.substring(text_length - length) == text2.substring(0, length)) {\n      best = length;\n      length++;\n    }\n  }\n};\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n * @private\n */\n\n\ndiff_match_patch.prototype.diff_halfMatch_ = function (text1, text2) {\n  if (this.Diff_Timeout <= 0) {\n    // Don't risk returning a non-optimal diff if we have unlimited time.\n    return null;\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null; // Pointless.\n  }\n\n  var dmp = this; // 'this' becomes 'window' in a closure.\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\n      var prefixLength = dmp.diff_commonPrefix(longtext.substring(i), shorttext.substring(j));\n      var suffixLength = dmp.diff_commonSuffix(longtext.substring(0, i), shorttext.substring(0, j));\n\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(j - suffixLength, j) + shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n\n    if (best_common.length * 2 >= longtext.length) {\n      return [best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b, best_common];\n    } else {\n      return null;\n    }\n  } // First check if the second quarter is the seed for a half-match.\n\n\n  var hm1 = diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 4)); // Check again based on the third quarter.\n\n  var hm2 = diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 2));\n  var hm;\n\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  } // A half-match was found, sort out the return data.\n\n\n  var text1_a, text1_b, text2_a, text2_b;\n\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n/**\n * Reduce the number of edits by eliminating semantically trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\n\n\ndiff_match_patch.prototype.diff_cleanupSemantic = function (diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n\n  /** @type {?string} */\n\n  var lastEquality = null; // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n\n  var pointer = 0; // Index of current position.\n  // Number of characters that changed prior to the equality.\n\n  var length_insertions1 = 0;\n  var length_deletions1 = 0; // Number of characters that changed after the equality.\n\n  var length_insertions2 = 0;\n  var length_deletions2 = 0;\n\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      equalities[equalitiesLength++] = pointer;\n      length_insertions1 = length_insertions2;\n      length_deletions1 = length_deletions2;\n      length_insertions2 = 0;\n      length_deletions2 = 0;\n      lastEquality = diffs[pointer][1];\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_INSERT) {\n        length_insertions2 += diffs[pointer][1].length;\n      } else {\n        length_deletions2 += diffs[pointer][1].length;\n      } // Eliminate an equality that is smaller or equal to the edits on both\n      // sides of it.\n\n\n      if (lastEquality && lastEquality.length <= Math.max(length_insertions1, length_deletions1) && lastEquality.length <= Math.max(length_insertions2, length_deletions2)) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, new diff_match_patch.Diff(DIFF_DELETE, lastEquality)); // Change second copy to insert.\n\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT; // Throw away the equality we just deleted.\n\n        equalitiesLength--; // Throw away the previous equality (it needs to be reevaluated).\n\n        equalitiesLength--;\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n        length_insertions1 = 0; // Reset the counters.\n\n        length_deletions1 = 0;\n        length_insertions2 = 0;\n        length_deletions2 = 0;\n        lastEquality = null;\n        changes = true;\n      }\n    }\n\n    pointer++;\n  } // Normalize the diff.\n\n\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n\n  this.diff_cleanupSemanticLossless(diffs); // Find any overlaps between deletions and insertions.\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\n  //   -> <del>abc</del>xxx<ins>def</ins>\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\n  //   -> <ins>def</ins>xxx<del>abc</del>\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\n\n  pointer = 1;\n\n  while (pointer < diffs.length) {\n    if (diffs[pointer - 1][0] == DIFF_DELETE && diffs[pointer][0] == DIFF_INSERT) {\n      var deletion = diffs[pointer - 1][1];\n      var insertion = diffs[pointer][1];\n      var overlap_length1 = this.diff_commonOverlap_(deletion, insertion);\n      var overlap_length2 = this.diff_commonOverlap_(insertion, deletion);\n\n      if (overlap_length1 >= overlap_length2) {\n        if (overlap_length1 >= deletion.length / 2 || overlap_length1 >= insertion.length / 2) {\n          // Overlap found.  Insert an equality and trim the surrounding edits.\n          diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_EQUAL, insertion.substring(0, overlap_length1)));\n          diffs[pointer - 1][1] = deletion.substring(0, deletion.length - overlap_length1);\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\n          pointer++;\n        }\n      } else {\n        if (overlap_length2 >= deletion.length / 2 || overlap_length2 >= insertion.length / 2) {\n          // Reverse overlap found.\n          // Insert an equality and swap and trim the surrounding edits.\n          diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_EQUAL, deletion.substring(0, overlap_length2)));\n          diffs[pointer - 1][0] = DIFF_INSERT;\n          diffs[pointer - 1][1] = insertion.substring(0, insertion.length - overlap_length2);\n          diffs[pointer + 1][0] = DIFF_DELETE;\n          diffs[pointer + 1][1] = deletion.substring(overlap_length2);\n          pointer++;\n        }\n      }\n\n      pointer++;\n    }\n\n    pointer++;\n  }\n};\n/**\n * Look for single edits surrounded on both sides by equalities\n * which can be shifted sideways to align the edit to a word boundary.\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\n\n\ndiff_match_patch.prototype.diff_cleanupSemanticLossless = function (diffs) {\n  /**\n   * Given two strings, compute a score representing whether the internal\n   * boundary falls on logical boundaries.\n   * Scores range from 6 (best) to 0 (worst).\n   * Closure, but does not reference any external variables.\n   * @param {string} one First string.\n   * @param {string} two Second string.\n   * @return {number} The score.\n   * @private\n   */\n  function diff_cleanupSemanticScore_(one, two) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 6;\n    } // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n\n\n    var char1 = one.charAt(one.length - 1);\n    var char2 = two.charAt(0);\n    var nonAlphaNumeric1 = char1.match(diff_match_patch.nonAlphaNumericRegex_);\n    var nonAlphaNumeric2 = char2.match(diff_match_patch.nonAlphaNumericRegex_);\n    var whitespace1 = nonAlphaNumeric1 && char1.match(diff_match_patch.whitespaceRegex_);\n    var whitespace2 = nonAlphaNumeric2 && char2.match(diff_match_patch.whitespaceRegex_);\n    var lineBreak1 = whitespace1 && char1.match(diff_match_patch.linebreakRegex_);\n    var lineBreak2 = whitespace2 && char2.match(diff_match_patch.linebreakRegex_);\n    var blankLine1 = lineBreak1 && one.match(diff_match_patch.blanklineEndRegex_);\n    var blankLine2 = lineBreak2 && two.match(diff_match_patch.blanklineStartRegex_);\n\n    if (blankLine1 || blankLine2) {\n      // Five points for blank lines.\n      return 5;\n    } else if (lineBreak1 || lineBreak2) {\n      // Four points for line breaks.\n      return 4;\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n      // Three points for end of sentences.\n      return 3;\n    } else if (whitespace1 || whitespace2) {\n      // Two points for whitespace.\n      return 2;\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n      // One point for non-alphanumeric.\n      return 1;\n    }\n\n    return 0;\n  }\n\n  var pointer = 1; // Intentionally ignore the first and last element (don't need checking).\n\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL && diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      var equality1 = diffs[pointer - 1][1];\n      var edit = diffs[pointer][1];\n      var equality2 = diffs[pointer + 1][1]; // First, shift the edit as far left as possible.\n\n      var commonOffset = this.diff_commonSuffix(equality1, edit);\n\n      if (commonOffset) {\n        var commonString = edit.substring(edit.length - commonOffset);\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\n        equality2 = commonString + equality2;\n      } // Second, step character by character right, looking for the best fit.\n\n\n      var bestEquality1 = equality1;\n      var bestEdit = edit;\n      var bestEquality2 = equality2;\n      var bestScore = diff_cleanupSemanticScore_(equality1, edit) + diff_cleanupSemanticScore_(edit, equality2);\n\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0);\n        edit = edit.substring(1) + equality2.charAt(0);\n        equality2 = equality2.substring(1);\n        var score = diff_cleanupSemanticScore_(equality1, edit) + diff_cleanupSemanticScore_(edit, equality2); // The >= encourages trailing rather than leading whitespace on edits.\n\n        if (score >= bestScore) {\n          bestScore = score;\n          bestEquality1 = equality1;\n          bestEdit = edit;\n          bestEquality2 = equality2;\n        }\n      }\n\n      if (diffs[pointer - 1][1] != bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1;\n        } else {\n          diffs.splice(pointer - 1, 1);\n          pointer--;\n        }\n\n        diffs[pointer][1] = bestEdit;\n\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2;\n        } else {\n          diffs.splice(pointer + 1, 1);\n          pointer--;\n        }\n      }\n    }\n\n    pointer++;\n  }\n}; // Define some regex patterns for matching boundaries.\n\n\ndiff_match_patch.nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\ndiff_match_patch.whitespaceRegex_ = /\\s/;\ndiff_match_patch.linebreakRegex_ = /[\\r\\n]/;\ndiff_match_patch.blanklineEndRegex_ = /\\n\\r?\\n$/;\ndiff_match_patch.blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\n/**\n * Reduce the number of edits by eliminating operationally trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\n\ndiff_match_patch.prototype.diff_cleanupEfficiency = function (diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n\n  /** @type {?string} */\n\n  var lastEquality = null; // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n\n  var pointer = 0; // Index of current position.\n  // Is there an insertion operation before the last equality.\n\n  var pre_ins = false; // Is there a deletion operation before the last equality.\n\n  var pre_del = false; // Is there an insertion operation after the last equality.\n\n  var post_ins = false; // Is there a deletion operation after the last equality.\n\n  var post_del = false;\n\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      if (diffs[pointer][1].length < this.Diff_EditCost && (post_ins || post_del)) {\n        // Candidate found.\n        equalities[equalitiesLength++] = pointer;\n        pre_ins = post_ins;\n        pre_del = post_del;\n        lastEquality = diffs[pointer][1];\n      } else {\n        // Not a candidate, and can never become one.\n        equalitiesLength = 0;\n        lastEquality = null;\n      }\n\n      post_ins = post_del = false;\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_DELETE) {\n        post_del = true;\n      } else {\n        post_ins = true;\n      }\n      /*\n       * Five types to be split:\n       * <ins>A</ins><del>B</del>XY<ins>C</ins><del>D</del>\n       * <ins>A</ins>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<ins>C</ins>\n       * <ins>A</del>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<del>C</del>\n       */\n\n\n      if (lastEquality && (pre_ins && pre_del && post_ins && post_del || lastEquality.length < this.Diff_EditCost / 2 && pre_ins + pre_del + post_ins + post_del == 3)) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, new diff_match_patch.Diff(DIFF_DELETE, lastEquality)); // Change second copy to insert.\n\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        equalitiesLength--; // Throw away the equality we just deleted;\n\n        lastEquality = null;\n\n        if (pre_ins && pre_del) {\n          // No changes made which could affect previous entry, keep going.\n          post_ins = post_del = true;\n          equalitiesLength = 0;\n        } else {\n          equalitiesLength--; // Throw away the previous equality.\n\n          pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n          post_ins = post_del = false;\n        }\n\n        changes = true;\n      }\n    }\n\n    pointer++;\n  }\n\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\n\n\ndiff_match_patch.prototype.diff_cleanupMerge = function (diffs) {\n  // Add a dummy entry at the end.\n  diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, ''));\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete + count_insert > 1) {\n          if (count_delete !== 0 && count_insert !== 0) {\n            // Factor out any common prefixies.\n            commonlength = this.diff_commonPrefix(text_insert, text_delete);\n\n            if (commonlength !== 0) {\n              if (pointer - count_delete - count_insert > 0 && diffs[pointer - count_delete - count_insert - 1][0] == DIFF_EQUAL) {\n                diffs[pointer - count_delete - count_insert - 1][1] += text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, new diff_match_patch.Diff(DIFF_EQUAL, text_insert.substring(0, commonlength)));\n                pointer++;\n              }\n\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            } // Factor out any common suffixies.\n\n\n            commonlength = this.diff_commonSuffix(text_insert, text_delete);\n\n            if (commonlength !== 0) {\n              diffs[pointer][1] = text_insert.substring(text_insert.length - commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length - commonlength);\n              text_delete = text_delete.substring(0, text_delete.length - commonlength);\n            }\n          } // Delete the offending records and add the merged ones.\n\n\n          pointer -= count_delete + count_insert;\n          diffs.splice(pointer, count_delete + count_insert);\n\n          if (text_delete.length) {\n            diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_DELETE, text_delete));\n            pointer++;\n          }\n\n          if (text_insert.length) {\n            diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_INSERT, text_insert));\n            pointer++;\n          }\n\n          pointer++;\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop(); // Remove the dummy entry at the end.\n  } // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n\n\n  var changes = false;\n  pointer = 1; // Intentionally ignore the first and last element (don't need checking).\n\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL && diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length - diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] + diffs[pointer][1].substring(0, diffs[pointer][1].length - diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) == diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] = diffs[pointer][1].substring(diffs[pointer + 1][1].length) + diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n\n    pointer++;\n  } // If shifts were made, the diff needs reordering and another shift sweep.\n\n\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n/**\n * loc is a location in text1, compute and return the equivalent location in\n * text2.\n * e.g. 'The cat' vs 'The big cat', 1->1, 5->8\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @param {number} loc Location within text1.\n * @return {number} Location within text2.\n */\n\n\ndiff_match_patch.prototype.diff_xIndex = function (diffs, loc) {\n  var chars1 = 0;\n  var chars2 = 0;\n  var last_chars1 = 0;\n  var last_chars2 = 0;\n  var x;\n\n  for (x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {\n      // Equality or deletion.\n      chars1 += diffs[x][1].length;\n    }\n\n    if (diffs[x][0] !== DIFF_DELETE) {\n      // Equality or insertion.\n      chars2 += diffs[x][1].length;\n    }\n\n    if (chars1 > loc) {\n      // Overshot the location.\n      break;\n    }\n\n    last_chars1 = chars1;\n    last_chars2 = chars2;\n  } // Was the location was deleted?\n\n\n  if (diffs.length != x && diffs[x][0] === DIFF_DELETE) {\n    return last_chars2;\n  } // Add the remaining character length.\n\n\n  return last_chars2 + (loc - last_chars1);\n};\n/**\n * Convert a diff array into a pretty HTML report.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} HTML representation.\n */\n\n\ndiff_match_patch.prototype.diff_prettyHtml = function (diffs) {\n  var html = [];\n  var pattern_amp = /&/g;\n  var pattern_lt = /</g;\n  var pattern_gt = />/g;\n  var pattern_para = /\\n/g;\n\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0]; // Operation (insert, delete, equal)\n\n    var data = diffs[x][1]; // Text of change.\n\n    var text = data.replace(pattern_amp, '&amp;').replace(pattern_lt, '&lt;').replace(pattern_gt, '&gt;').replace(pattern_para, '&para;<br>');\n\n    switch (op) {\n      case DIFF_INSERT:\n        html[x] = '<ins style=\"background:#e6ffe6;\">' + text + '</ins>';\n        break;\n\n      case DIFF_DELETE:\n        html[x] = '<del style=\"background:#ffe6e6;\">' + text + '</del>';\n        break;\n\n      case DIFF_EQUAL:\n        html[x] = '<span>' + text + '</span>';\n        break;\n    }\n  }\n\n  return html.join('');\n};\n/**\n * Compute and return the source text (all equalities and deletions).\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Source text.\n */\n\n\ndiff_match_patch.prototype.diff_text1 = function (diffs) {\n  var text = [];\n\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {\n      text[x] = diffs[x][1];\n    }\n  }\n\n  return text.join('');\n};\n/**\n * Compute and return the destination text (all equalities and insertions).\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Destination text.\n */\n\n\ndiff_match_patch.prototype.diff_text2 = function (diffs) {\n  var text = [];\n\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_DELETE) {\n      text[x] = diffs[x][1];\n    }\n  }\n\n  return text.join('');\n};\n/**\n * Compute the Levenshtein distance; the number of inserted, deleted or\n * substituted characters.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {number} Number of changes.\n */\n\n\ndiff_match_patch.prototype.diff_levenshtein = function (diffs) {\n  var levenshtein = 0;\n  var insertions = 0;\n  var deletions = 0;\n\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0];\n    var data = diffs[x][1];\n\n    switch (op) {\n      case DIFF_INSERT:\n        insertions += data.length;\n        break;\n\n      case DIFF_DELETE:\n        deletions += data.length;\n        break;\n\n      case DIFF_EQUAL:\n        // A deletion and an insertion is one substitution.\n        levenshtein += Math.max(insertions, deletions);\n        insertions = 0;\n        deletions = 0;\n        break;\n    }\n  }\n\n  levenshtein += Math.max(insertions, deletions);\n  return levenshtein;\n};\n/**\n * Crush the diff into an encoded string which describes the operations\n * required to transform text1 into text2.\n * E.g. =3\\t-2\\t+ing  -> Keep 3 chars, delete 2 chars, insert 'ing'.\n * Operations are tab-separated.  Inserted text is escaped using %xx notation.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Delta text.\n */\n\n\ndiff_match_patch.prototype.diff_toDelta = function (diffs) {\n  var text = [];\n\n  for (var x = 0; x < diffs.length; x++) {\n    switch (diffs[x][0]) {\n      case DIFF_INSERT:\n        text[x] = '+' + encodeURI(diffs[x][1]);\n        break;\n\n      case DIFF_DELETE:\n        text[x] = '-' + diffs[x][1].length;\n        break;\n\n      case DIFF_EQUAL:\n        text[x] = '=' + diffs[x][1].length;\n        break;\n    }\n  }\n\n  return text.join('\\t').replace(/%20/g, ' ');\n};\n/**\n * Given the original text1, and an encoded string which describes the\n * operations required to transform text1 into text2, compute the full diff.\n * @param {string} text1 Source string for the diff.\n * @param {string} delta Delta text.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @throws {!Error} If invalid input.\n */\n\n\ndiff_match_patch.prototype.diff_fromDelta = function (text1, delta) {\n  var diffs = [];\n  var diffsLength = 0; // Keeping our own length var is faster in JS.\n\n  var pointer = 0; // Cursor in text1\n\n  var tokens = delta.split(/\\t/g);\n\n  for (var x = 0; x < tokens.length; x++) {\n    // Each token begins with a one character parameter which specifies the\n    // operation of this token (delete, insert, equality).\n    var param = tokens[x].substring(1);\n\n    switch (tokens[x].charAt(0)) {\n      case '+':\n        try {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_INSERT, decodeURI(param));\n        } catch (ex) {\n          // Malformed URI sequence.\n          throw new Error('Illegal escape in diff_fromDelta: ' + param);\n        }\n\n        break;\n\n      case '-': // Fall through.\n\n      case '=':\n        var n = parseInt(param, 10);\n\n        if (isNaN(n) || n < 0) {\n          throw new Error('Invalid number in diff_fromDelta: ' + param);\n        }\n\n        var text = text1.substring(pointer, pointer += n);\n\n        if (tokens[x].charAt(0) == '=') {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_EQUAL, text);\n        } else {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_DELETE, text);\n        }\n\n        break;\n\n      default:\n        // Blank tokens are ok (from a trailing \\t).\n        // Anything else is an error.\n        if (tokens[x]) {\n          throw new Error('Invalid diff operation in diff_fromDelta: ' + tokens[x]);\n        }\n\n    }\n  }\n\n  if (pointer != text1.length) {\n    throw new Error('Delta length (' + pointer + ') does not equal source text length (' + text1.length + ').');\n  }\n\n  return diffs;\n}; //  MATCH FUNCTIONS\n\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc'.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n */\n\n\ndiff_match_patch.prototype.match_main = function (text, pattern, loc) {\n  // Check for null inputs.\n  if (text == null || pattern == null || loc == null) {\n    throw new Error('Null input. (match_main)');\n  }\n\n  loc = Math.max(0, Math.min(loc, text.length));\n\n  if (text == pattern) {\n    // Shortcut (potentially not guaranteed by the algorithm)\n    return 0;\n  } else if (!text.length) {\n    // Nothing to match.\n    return -1;\n  } else if (text.substring(loc, loc + pattern.length) == pattern) {\n    // Perfect match at the perfect spot!  (Includes case of null pattern)\n    return loc;\n  } else {\n    // Do a fuzzy compare.\n    return this.match_bitap_(text, pattern, loc);\n  }\n};\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc' using the\n * Bitap algorithm.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n * @private\n */\n\n\ndiff_match_patch.prototype.match_bitap_ = function (text, pattern, loc) {\n  if (pattern.length > this.Match_MaxBits) {\n    throw new Error('Pattern too long for this browser.');\n  } // Initialise the alphabet.\n\n\n  var s = this.match_alphabet_(pattern);\n  var dmp = this; // 'this' becomes 'window' in a closure.\n\n  /**\n   * Compute and return the score for a match with e errors and x location.\n   * Accesses loc and pattern through being a closure.\n   * @param {number} e Number of errors in match.\n   * @param {number} x Location of match.\n   * @return {number} Overall score for match (0.0 = good, 1.0 = bad).\n   * @private\n   */\n\n  function match_bitapScore_(e, x) {\n    var accuracy = e / pattern.length;\n    var proximity = Math.abs(loc - x);\n\n    if (!dmp.Match_Distance) {\n      // Dodge divide by zero error.\n      return proximity ? 1.0 : accuracy;\n    }\n\n    return accuracy + proximity / dmp.Match_Distance;\n  } // Highest score beyond which we give up.\n\n\n  var score_threshold = this.Match_Threshold; // Is there a nearby exact match? (speedup)\n\n  var best_loc = text.indexOf(pattern, loc);\n\n  if (best_loc != -1) {\n    score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold); // What about in the other direction? (speedup)\n\n    best_loc = text.lastIndexOf(pattern, loc + pattern.length);\n\n    if (best_loc != -1) {\n      score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold);\n    }\n  } // Initialise the bit arrays.\n\n\n  var matchmask = 1 << pattern.length - 1;\n  best_loc = -1;\n  var bin_min, bin_mid;\n  var bin_max = pattern.length + text.length;\n  var last_rd;\n\n  for (var d = 0; d < pattern.length; d++) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from 'loc' we can stray at this\n    // error level.\n    bin_min = 0;\n    bin_mid = bin_max;\n\n    while (bin_min < bin_mid) {\n      if (match_bitapScore_(d, loc + bin_mid) <= score_threshold) {\n        bin_min = bin_mid;\n      } else {\n        bin_max = bin_mid;\n      }\n\n      bin_mid = Math.floor((bin_max - bin_min) / 2 + bin_min);\n    } // Use the result from this iteration as the maximum for the next.\n\n\n    bin_max = bin_mid;\n    var start = Math.max(1, loc - bin_mid + 1);\n    var finish = Math.min(loc + bin_mid, text.length) + pattern.length;\n    var rd = Array(finish + 2);\n    rd[finish + 1] = (1 << d) - 1;\n\n    for (var j = finish; j >= start; j--) {\n      // The alphabet (s) is a sparse hash, so the following line generates\n      // warnings.\n      var charMatch = s[text.charAt(j - 1)];\n\n      if (d === 0) {\n        // First pass: exact match.\n        rd[j] = (rd[j + 1] << 1 | 1) & charMatch;\n      } else {\n        // Subsequent passes: fuzzy match.\n        rd[j] = (rd[j + 1] << 1 | 1) & charMatch | ((last_rd[j + 1] | last_rd[j]) << 1 | 1) | last_rd[j + 1];\n      }\n\n      if (rd[j] & matchmask) {\n        var score = match_bitapScore_(d, j - 1); // This match will almost certainly be better than any existing match.\n        // But check anyway.\n\n        if (score <= score_threshold) {\n          // Told you so.\n          score_threshold = score;\n          best_loc = j - 1;\n\n          if (best_loc > loc) {\n            // When passing loc, don't exceed our current distance from loc.\n            start = Math.max(1, 2 * loc - best_loc);\n          } else {\n            // Already passed loc, downhill from here on in.\n            break;\n          }\n        }\n      }\n    } // No hope for a (better) match at greater error levels.\n\n\n    if (match_bitapScore_(d + 1, loc) > score_threshold) {\n      break;\n    }\n\n    last_rd = rd;\n  }\n\n  return best_loc;\n};\n/**\n * Initialise the alphabet for the Bitap algorithm.\n * @param {string} pattern The text to encode.\n * @return {!Object} Hash of character locations.\n * @private\n */\n\n\ndiff_match_patch.prototype.match_alphabet_ = function (pattern) {\n  var s = {};\n\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] = 0;\n  }\n\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] |= 1 << pattern.length - i - 1;\n  }\n\n  return s;\n}; //  PATCH FUNCTIONS\n\n/**\n * Increase the context until it is unique,\n * but don't let the pattern expand beyond Match_MaxBits.\n * @param {!diff_match_patch.patch_obj} patch The patch to grow.\n * @param {string} text Source text.\n * @private\n */\n\n\ndiff_match_patch.prototype.patch_addContext_ = function (patch, text) {\n  if (text.length == 0) {\n    return;\n  }\n\n  if (patch.start2 === null) {\n    throw Error('patch not initialized');\n  }\n\n  var pattern = text.substring(patch.start2, patch.start2 + patch.length1);\n  var padding = 0; // Look for the first and last matches of pattern in text.  If two different\n  // matches are found, increase the pattern length.\n\n  while (text.indexOf(pattern) != text.lastIndexOf(pattern) && pattern.length < this.Match_MaxBits - this.Patch_Margin - this.Patch_Margin) {\n    padding += this.Patch_Margin;\n    pattern = text.substring(patch.start2 - padding, patch.start2 + patch.length1 + padding);\n  } // Add one chunk for good luck.\n\n\n  padding += this.Patch_Margin; // Add the prefix.\n\n  var prefix = text.substring(patch.start2 - padding, patch.start2);\n\n  if (prefix) {\n    patch.diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, prefix));\n  } // Add the suffix.\n\n\n  var suffix = text.substring(patch.start2 + patch.length1, patch.start2 + patch.length1 + padding);\n\n  if (suffix) {\n    patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, suffix));\n  } // Roll back the start points.\n\n\n  patch.start1 -= prefix.length;\n  patch.start2 -= prefix.length; // Extend the lengths.\n\n  patch.length1 += prefix.length + suffix.length;\n  patch.length2 += prefix.length + suffix.length;\n};\n/**\n * Compute a list of patches to turn text1 into text2.\n * Use diffs if provided, otherwise compute it ourselves.\n * There are four ways to call this function, depending on what data is\n * available to the caller:\n * Method 1:\n * a = text1, b = text2\n * Method 2:\n * a = diffs\n * Method 3 (optimal):\n * a = text1, b = diffs\n * Method 4 (deprecated, use method 3):\n * a = text1, b = text2, c = diffs\n *\n * @param {string|!Array.<!diff_match_patch.Diff>} a text1 (methods 1,3,4) or\n * Array of diff tuples for text1 to text2 (method 2).\n * @param {string|!Array.<!diff_match_patch.Diff>=} opt_b text2 (methods 1,4) or\n * Array of diff tuples for text1 to text2 (method 3) or undefined (method 2).\n * @param {string|!Array.<!diff_match_patch.Diff>=} opt_c Array of diff tuples\n * for text1 to text2 (method 4) or undefined (methods 1,2,3).\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n */\n\n\ndiff_match_patch.prototype.patch_make = function (a, opt_b, opt_c) {\n  var text1, diffs;\n\n  if (typeof a == 'string' && typeof opt_b == 'string' && typeof opt_c == 'undefined') {\n    // Method 1: text1, text2\n    // Compute diffs from text1 and text2.\n    text1 =\n    /** @type {string} */\n    a;\n    diffs = this.diff_main(text1,\n    /** @type {string} */\n    opt_b, true);\n\n    if (diffs.length > 2) {\n      this.diff_cleanupSemantic(diffs);\n      this.diff_cleanupEfficiency(diffs);\n    }\n  } else if (a && typeof a == 'object' && typeof opt_b == 'undefined' && typeof opt_c == 'undefined') {\n    // Method 2: diffs\n    // Compute text1 from diffs.\n    diffs =\n    /** @type {!Array.<!diff_match_patch.Diff>} */\n    a;\n    text1 = this.diff_text1(diffs);\n  } else if (typeof a == 'string' && opt_b && typeof opt_b == 'object' && typeof opt_c == 'undefined') {\n    // Method 3: text1, diffs\n    text1 =\n    /** @type {string} */\n    a;\n    diffs =\n    /** @type {!Array.<!diff_match_patch.Diff>} */\n    opt_b;\n  } else if (typeof a == 'string' && typeof opt_b == 'string' && opt_c && typeof opt_c == 'object') {\n    // Method 4: text1, text2, diffs\n    // text2 is not used.\n    text1 =\n    /** @type {string} */\n    a;\n    diffs =\n    /** @type {!Array.<!diff_match_patch.Diff>} */\n    opt_c;\n  } else {\n    throw new Error('Unknown call format to patch_make.');\n  }\n\n  if (diffs.length === 0) {\n    return []; // Get rid of the null case.\n  }\n\n  var patches = [];\n  var patch = new diff_match_patch.patch_obj();\n  var patchDiffLength = 0; // Keeping our own length var is faster in JS.\n\n  var char_count1 = 0; // Number of characters into the text1 string.\n\n  var char_count2 = 0; // Number of characters into the text2 string.\n  // Start with text1 (prepatch_text) and apply the diffs until we arrive at\n  // text2 (postpatch_text).  We recreate the patches one by one to determine\n  // context info.\n\n  var prepatch_text = text1;\n  var postpatch_text = text1;\n\n  for (var x = 0; x < diffs.length; x++) {\n    var diff_type = diffs[x][0];\n    var diff_text = diffs[x][1];\n\n    if (!patchDiffLength && diff_type !== DIFF_EQUAL) {\n      // A new patch starts here.\n      patch.start1 = char_count1;\n      patch.start2 = char_count2;\n    }\n\n    switch (diff_type) {\n      case DIFF_INSERT:\n        patch.diffs[patchDiffLength++] = diffs[x];\n        patch.length2 += diff_text.length;\n        postpatch_text = postpatch_text.substring(0, char_count2) + diff_text + postpatch_text.substring(char_count2);\n        break;\n\n      case DIFF_DELETE:\n        patch.length1 += diff_text.length;\n        patch.diffs[patchDiffLength++] = diffs[x];\n        postpatch_text = postpatch_text.substring(0, char_count2) + postpatch_text.substring(char_count2 + diff_text.length);\n        break;\n\n      case DIFF_EQUAL:\n        if (diff_text.length <= 2 * this.Patch_Margin && patchDiffLength && diffs.length != x + 1) {\n          // Small equality inside a patch.\n          patch.diffs[patchDiffLength++] = diffs[x];\n          patch.length1 += diff_text.length;\n          patch.length2 += diff_text.length;\n        } else if (diff_text.length >= 2 * this.Patch_Margin) {\n          // Time for a new patch.\n          if (patchDiffLength) {\n            this.patch_addContext_(patch, prepatch_text);\n            patches.push(patch);\n            patch = new diff_match_patch.patch_obj();\n            patchDiffLength = 0; // Unlike Unidiff, our patch lists have a rolling context.\n            // https://github.com/google/diff-match-patch/wiki/Unidiff\n            // Update prepatch text & pos to reflect the application of the\n            // just completed patch.\n\n            prepatch_text = postpatch_text;\n            char_count1 = char_count2;\n          }\n        }\n\n        break;\n    } // Update the current character count.\n\n\n    if (diff_type !== DIFF_INSERT) {\n      char_count1 += diff_text.length;\n    }\n\n    if (diff_type !== DIFF_DELETE) {\n      char_count2 += diff_text.length;\n    }\n  } // Pick up the leftover patch if not empty.\n\n\n  if (patchDiffLength) {\n    this.patch_addContext_(patch, prepatch_text);\n    patches.push(patch);\n  }\n\n  return patches;\n};\n/**\n * Given an array of patches, return another array that is identical.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n */\n\n\ndiff_match_patch.prototype.patch_deepCopy = function (patches) {\n  // Making deep copies is hard in JavaScript.\n  var patchesCopy = [];\n\n  for (var x = 0; x < patches.length; x++) {\n    var patch = patches[x];\n    var patchCopy = new diff_match_patch.patch_obj();\n    patchCopy.diffs = [];\n\n    for (var y = 0; y < patch.diffs.length; y++) {\n      patchCopy.diffs[y] = new diff_match_patch.Diff(patch.diffs[y][0], patch.diffs[y][1]);\n    }\n\n    patchCopy.start1 = patch.start1;\n    patchCopy.start2 = patch.start2;\n    patchCopy.length1 = patch.length1;\n    patchCopy.length2 = patch.length2;\n    patchesCopy[x] = patchCopy;\n  }\n\n  return patchesCopy;\n};\n/**\n * Merge a set of patches onto the text.  Return a patched text, as well\n * as a list of true/false values indicating which patches were applied.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @param {string} text Old text.\n * @return {!Array.<string|!Array.<boolean>>} Two element Array, containing the\n *      new text and an array of boolean values.\n */\n\n\ndiff_match_patch.prototype.patch_apply = function (patches, text) {\n  if (patches.length == 0) {\n    return [text, []];\n  } // Deep copy the patches so that no changes are made to originals.\n\n\n  patches = this.patch_deepCopy(patches);\n  var nullPadding = this.patch_addPadding(patches);\n  text = nullPadding + text + nullPadding;\n  this.patch_splitMax(patches); // delta keeps track of the offset between the expected and actual location\n  // of the previous patch.  If there are patches expected at positions 10 and\n  // 20, but the first patch was found at 12, delta is 2 and the second patch\n  // has an effective expected position of 22.\n\n  var delta = 0;\n  var results = [];\n\n  for (var x = 0; x < patches.length; x++) {\n    var expected_loc = patches[x].start2 + delta;\n    var text1 = this.diff_text1(patches[x].diffs);\n    var start_loc;\n    var end_loc = -1;\n\n    if (text1.length > this.Match_MaxBits) {\n      // patch_splitMax will only provide an oversized pattern in the case of\n      // a monster delete.\n      start_loc = this.match_main(text, text1.substring(0, this.Match_MaxBits), expected_loc);\n\n      if (start_loc != -1) {\n        end_loc = this.match_main(text, text1.substring(text1.length - this.Match_MaxBits), expected_loc + text1.length - this.Match_MaxBits);\n\n        if (end_loc == -1 || start_loc >= end_loc) {\n          // Can't find valid trailing context.  Drop this patch.\n          start_loc = -1;\n        }\n      }\n    } else {\n      start_loc = this.match_main(text, text1, expected_loc);\n    }\n\n    if (start_loc == -1) {\n      // No match found.  :(\n      results[x] = false; // Subtract the delta for this failed patch from subsequent patches.\n\n      delta -= patches[x].length2 - patches[x].length1;\n    } else {\n      // Found a match.  :)\n      results[x] = true;\n      delta = start_loc - expected_loc;\n      var text2;\n\n      if (end_loc == -1) {\n        text2 = text.substring(start_loc, start_loc + text1.length);\n      } else {\n        text2 = text.substring(start_loc, end_loc + this.Match_MaxBits);\n      }\n\n      if (text1 == text2) {\n        // Perfect match, just shove the replacement text in.\n        text = text.substring(0, start_loc) + this.diff_text2(patches[x].diffs) + text.substring(start_loc + text1.length);\n      } else {\n        // Imperfect match.  Run a diff to get a framework of equivalent\n        // indices.\n        var diffs = this.diff_main(text1, text2, false);\n\n        if (text1.length > this.Match_MaxBits && this.diff_levenshtein(diffs) / text1.length > this.Patch_DeleteThreshold) {\n          // The end points match, but the content is unacceptably bad.\n          results[x] = false;\n        } else {\n          this.diff_cleanupSemanticLossless(diffs);\n          var index1 = 0;\n          var index2;\n\n          for (var y = 0; y < patches[x].diffs.length; y++) {\n            var mod = patches[x].diffs[y];\n\n            if (mod[0] !== DIFF_EQUAL) {\n              index2 = this.diff_xIndex(diffs, index1);\n            }\n\n            if (mod[0] === DIFF_INSERT) {\n              // Insertion\n              text = text.substring(0, start_loc + index2) + mod[1] + text.substring(start_loc + index2);\n            } else if (mod[0] === DIFF_DELETE) {\n              // Deletion\n              text = text.substring(0, start_loc + index2) + text.substring(start_loc + this.diff_xIndex(diffs, index1 + mod[1].length));\n            }\n\n            if (mod[0] !== DIFF_DELETE) {\n              index1 += mod[1].length;\n            }\n          }\n        }\n      }\n    }\n  } // Strip the padding off.\n\n\n  text = text.substring(nullPadding.length, text.length - nullPadding.length);\n  return [text, results];\n};\n/**\n * Add some padding on text start and end so that edges can match something.\n * Intended to be called only from within patch_apply.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {string} The padding string added to each side.\n */\n\n\ndiff_match_patch.prototype.patch_addPadding = function (patches) {\n  var paddingLength = this.Patch_Margin;\n  var nullPadding = '';\n\n  for (var x = 1; x <= paddingLength; x++) {\n    nullPadding += String.fromCharCode(x);\n  } // Bump all the patches forward.\n\n\n  for (var x = 0; x < patches.length; x++) {\n    patches[x].start1 += paddingLength;\n    patches[x].start2 += paddingLength;\n  } // Add some padding on start of first diff.\n\n\n  var patch = patches[0];\n  var diffs = patch.diffs;\n\n  if (diffs.length == 0 || diffs[0][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, nullPadding));\n    patch.start1 -= paddingLength; // Should be 0.\n\n    patch.start2 -= paddingLength; // Should be 0.\n\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[0][1].length) {\n    // Grow first equality.\n    var extraLength = paddingLength - diffs[0][1].length;\n    diffs[0][1] = nullPadding.substring(diffs[0][1].length) + diffs[0][1];\n    patch.start1 -= extraLength;\n    patch.start2 -= extraLength;\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  } // Add some padding on end of last diff.\n\n\n  patch = patches[patches.length - 1];\n  diffs = patch.diffs;\n\n  if (diffs.length == 0 || diffs[diffs.length - 1][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, nullPadding));\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[diffs.length - 1][1].length) {\n    // Grow last equality.\n    var extraLength = paddingLength - diffs[diffs.length - 1][1].length;\n    diffs[diffs.length - 1][1] += nullPadding.substring(0, extraLength);\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  }\n\n  return nullPadding;\n};\n/**\n * Look through the patches and break up any which are longer than the maximum\n * limit of the match algorithm.\n * Intended to be called only from within patch_apply.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n */\n\n\ndiff_match_patch.prototype.patch_splitMax = function (patches) {\n  var patch_size = this.Match_MaxBits;\n\n  for (var x = 0; x < patches.length; x++) {\n    if (patches[x].length1 <= patch_size) {\n      continue;\n    }\n\n    var bigpatch = patches[x]; // Remove the big old patch.\n\n    patches.splice(x--, 1);\n    var start1 = bigpatch.start1;\n    var start2 = bigpatch.start2;\n    var precontext = '';\n\n    while (bigpatch.diffs.length !== 0) {\n      // Create one of several smaller patches.\n      var patch = new diff_match_patch.patch_obj();\n      var empty = true;\n      patch.start1 = start1 - precontext.length;\n      patch.start2 = start2 - precontext.length;\n\n      if (precontext !== '') {\n        patch.length1 = patch.length2 = precontext.length;\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, precontext));\n      }\n\n      while (bigpatch.diffs.length !== 0 && patch.length1 < patch_size - this.Patch_Margin) {\n        var diff_type = bigpatch.diffs[0][0];\n        var diff_text = bigpatch.diffs[0][1];\n\n        if (diff_type === DIFF_INSERT) {\n          // Insertions are harmless.\n          patch.length2 += diff_text.length;\n          start2 += diff_text.length;\n          patch.diffs.push(bigpatch.diffs.shift());\n          empty = false;\n        } else if (diff_type === DIFF_DELETE && patch.diffs.length == 1 && patch.diffs[0][0] == DIFF_EQUAL && diff_text.length > 2 * patch_size) {\n          // This is a large deletion.  Let it pass in one chunk.\n          patch.length1 += diff_text.length;\n          start1 += diff_text.length;\n          empty = false;\n          patch.diffs.push(new diff_match_patch.Diff(diff_type, diff_text));\n          bigpatch.diffs.shift();\n        } else {\n          // Deletion or equality.  Only take as much as we can stomach.\n          diff_text = diff_text.substring(0, patch_size - patch.length1 - this.Patch_Margin);\n          patch.length1 += diff_text.length;\n          start1 += diff_text.length;\n\n          if (diff_type === DIFF_EQUAL) {\n            patch.length2 += diff_text.length;\n            start2 += diff_text.length;\n          } else {\n            empty = false;\n          }\n\n          patch.diffs.push(new diff_match_patch.Diff(diff_type, diff_text));\n\n          if (diff_text == bigpatch.diffs[0][1]) {\n            bigpatch.diffs.shift();\n          } else {\n            bigpatch.diffs[0][1] = bigpatch.diffs[0][1].substring(diff_text.length);\n          }\n        }\n      } // Compute the head context for the next patch.\n\n\n      precontext = this.diff_text2(patch.diffs);\n      precontext = precontext.substring(precontext.length - this.Patch_Margin); // Append the end context for this patch.\n\n      var postcontext = this.diff_text1(bigpatch.diffs).substring(0, this.Patch_Margin);\n\n      if (postcontext !== '') {\n        patch.length1 += postcontext.length;\n        patch.length2 += postcontext.length;\n\n        if (patch.diffs.length !== 0 && patch.diffs[patch.diffs.length - 1][0] === DIFF_EQUAL) {\n          patch.diffs[patch.diffs.length - 1][1] += postcontext;\n        } else {\n          patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, postcontext));\n        }\n      }\n\n      if (!empty) {\n        patches.splice(++x, 0, patch);\n      }\n    }\n  }\n};\n/**\n * Take a list of patches and return a textual representation.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {string} Text representation of patches.\n */\n\n\ndiff_match_patch.prototype.patch_toText = function (patches) {\n  var text = [];\n\n  for (var x = 0; x < patches.length; x++) {\n    text[x] = patches[x];\n  }\n\n  return text.join('');\n};\n/**\n * Parse a textual representation of patches and return a list of Patch objects.\n * @param {string} textline Text representation of patches.\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n * @throws {!Error} If invalid input.\n */\n\n\ndiff_match_patch.prototype.patch_fromText = function (textline) {\n  var patches = [];\n\n  if (!textline) {\n    return patches;\n  }\n\n  var text = textline.split('\\n');\n  var textPointer = 0;\n  var patchHeader = /^@@ -(\\d+),?(\\d*) \\+(\\d+),?(\\d*) @@$/;\n\n  while (textPointer < text.length) {\n    var m = text[textPointer].match(patchHeader);\n\n    if (!m) {\n      throw new Error('Invalid patch string: ' + text[textPointer]);\n    }\n\n    var patch = new diff_match_patch.patch_obj();\n    patches.push(patch);\n    patch.start1 = parseInt(m[1], 10);\n\n    if (m[2] === '') {\n      patch.start1--;\n      patch.length1 = 1;\n    } else if (m[2] == '0') {\n      patch.length1 = 0;\n    } else {\n      patch.start1--;\n      patch.length1 = parseInt(m[2], 10);\n    }\n\n    patch.start2 = parseInt(m[3], 10);\n\n    if (m[4] === '') {\n      patch.start2--;\n      patch.length2 = 1;\n    } else if (m[4] == '0') {\n      patch.length2 = 0;\n    } else {\n      patch.start2--;\n      patch.length2 = parseInt(m[4], 10);\n    }\n\n    textPointer++;\n\n    while (textPointer < text.length) {\n      var sign = text[textPointer].charAt(0);\n\n      try {\n        var line = decodeURI(text[textPointer].substring(1));\n      } catch (ex) {\n        // Malformed URI sequence.\n        throw new Error('Illegal escape in patch_fromText: ' + line);\n      }\n\n      if (sign == '-') {\n        // Deletion.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_DELETE, line));\n      } else if (sign == '+') {\n        // Insertion.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_INSERT, line));\n      } else if (sign == ' ') {\n        // Minor equality.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, line));\n      } else if (sign == '@') {\n        // Start of next patch.\n        break;\n      } else if (sign === '') {// Blank line?  Whatever.\n      } else {\n        // WTF?\n        throw new Error('Invalid patch mode \"' + sign + '\" in: ' + line);\n      }\n\n      textPointer++;\n    }\n  }\n\n  return patches;\n};\n/**\n * Class representing one patch operation.\n * @constructor\n */\n\n\ndiff_match_patch.patch_obj = function () {\n  /** @type {!Array.<!diff_match_patch.Diff>} */\n  this.diffs = [];\n  /** @type {?number} */\n\n  this.start1 = null;\n  /** @type {?number} */\n\n  this.start2 = null;\n  /** @type {number} */\n\n  this.length1 = 0;\n  /** @type {number} */\n\n  this.length2 = 0;\n};\n/**\n * Emulate GNU diff's format.\n * Header: @@ -382,8 +481,9 @@\n * Indices are printed as 1-based, not 0-based.\n * @return {string} The GNU diff string.\n */\n\n\ndiff_match_patch.patch_obj.prototype.toString = function () {\n  var coords1, coords2;\n\n  if (this.length1 === 0) {\n    coords1 = this.start1 + ',0';\n  } else if (this.length1 == 1) {\n    coords1 = this.start1 + 1;\n  } else {\n    coords1 = this.start1 + 1 + ',' + this.length1;\n  }\n\n  if (this.length2 === 0) {\n    coords2 = this.start2 + ',0';\n  } else if (this.length2 == 1) {\n    coords2 = this.start2 + 1;\n  } else {\n    coords2 = this.start2 + 1 + ',' + this.length2;\n  }\n\n  var text = ['@@ -' + coords1 + ' +' + coords2 + ' @@\\n'];\n  var op; // Escape the body of the patch with %xx notation.\n\n  for (var x = 0; x < this.diffs.length; x++) {\n    switch (this.diffs[x][0]) {\n      case DIFF_INSERT:\n        op = '+';\n        break;\n\n      case DIFF_DELETE:\n        op = '-';\n        break;\n\n      case DIFF_EQUAL:\n        op = ' ';\n        break;\n    }\n\n    text[x + 1] = op + encodeURI(this.diffs[x][1]) + '\\n';\n  }\n\n  return text.join('').replace(/%20/g, ' ');\n}; // The following export code was added by @ForbesLindesay\n\n\nmodule.exports = diff_match_patch;\nmodule.exports.diff_match_patch = diff_match_patch;\nmodule.exports.DIFF_DELETE = DIFF_DELETE;\nmodule.exports.DIFF_INSERT = DIFF_INSERT;\nmodule.exports.DIFF_EQUAL = DIFF_EQUAL;\n\n/***/ }),\n\n/***/ 157:\n/***/ (() => {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 857:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ method)\n});\n\n// EXTERNAL MODULE: ./src/ts/markdown/abcRender.ts\nvar abcRender = __webpack_require__(369);\n// EXTERNAL MODULE: ./src/ts/markdown/adapterRender.ts\nvar adapterRender = __webpack_require__(46);\n// EXTERNAL MODULE: ./src/ts/markdown/chartRender.ts\nvar chartRender = __webpack_require__(726);\n// EXTERNAL MODULE: ./src/ts/markdown/codeRender.ts\nvar codeRender = __webpack_require__(23);\n// EXTERNAL MODULE: ./src/ts/markdown/flowchartRender.ts\nvar flowchartRender = __webpack_require__(383);\n// EXTERNAL MODULE: ./src/ts/markdown/graphvizRender.ts\nvar graphvizRender = __webpack_require__(890);\n// EXTERNAL MODULE: ./src/ts/markdown/highlightRender.ts\nvar highlightRender = __webpack_require__(93);\n;// CONCATENATED MODULE: ./src/ts/markdown/lazyLoadImageRender.ts\nvar lazyLoadImageRender = function (element) {\n    if (element === void 0) { element = document; }\n    var loadImg = function (it) {\n        var testImage = document.createElement(\"img\");\n        testImage.src = it.getAttribute(\"data-src\");\n        testImage.addEventListener(\"load\", function () {\n            if (!it.getAttribute(\"style\") && !it.getAttribute(\"class\") &&\n                !it.getAttribute(\"width\") && !it.getAttribute(\"height\")) {\n                if (testImage.naturalHeight > testImage.naturalWidth &&\n                    testImage.naturalWidth / testImage.naturalHeight <\n                        document.querySelector(\".vditor-reset\").clientWidth / (window.innerHeight - 40) &&\n                    testImage.naturalHeight > (window.innerHeight - 40)) {\n                    it.style.height = (window.innerHeight - 40) + \"px\";\n                }\n            }\n            it.src = testImage.src;\n        });\n        it.removeAttribute(\"data-src\");\n    };\n    if (!(\"IntersectionObserver\" in window)) {\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            if (imgElement.getAttribute(\"data-src\")) {\n                loadImg(imgElement);\n            }\n        });\n        return false;\n    }\n    if (window.vditorImageIntersectionObserver) {\n        window.vditorImageIntersectionObserver.disconnect();\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            window.vditorImageIntersectionObserver.observe(imgElement);\n        });\n    }\n    else {\n        window.vditorImageIntersectionObserver = new IntersectionObserver(function (entries) {\n            entries.forEach(function (entrie) {\n                if ((typeof entrie.isIntersecting === \"undefined\"\n                    ? entrie.intersectionRatio !== 0\n                    : entrie.isIntersecting)\n                    && entrie.target.getAttribute(\"data-src\")) {\n                    loadImg(entrie.target);\n                }\n            });\n        });\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            window.vditorImageIntersectionObserver.observe(imgElement);\n        });\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/mathRender.ts\nvar mathRender = __webpack_require__(323);\n// EXTERNAL MODULE: ./src/ts/markdown/mediaRender.ts\nvar mediaRender = __webpack_require__(207);\n// EXTERNAL MODULE: ./src/ts/markdown/mermaidRender.ts\nvar mermaidRender = __webpack_require__(765);\n// EXTERNAL MODULE: ./src/ts/markdown/mindmapRender.ts\nvar mindmapRender = __webpack_require__(894);\n// EXTERNAL MODULE: ./src/ts/markdown/outlineRender.ts\nvar outlineRender = __webpack_require__(198);\n// EXTERNAL MODULE: ./src/ts/markdown/plantumlRender.ts\nvar plantumlRender = __webpack_require__(583);\n// EXTERNAL MODULE: ./src/ts/constants.ts\nvar constants = __webpack_require__(260);\n// EXTERNAL MODULE: ./src/ts/ui/setContentTheme.ts\nvar setContentTheme = __webpack_require__(958);\n// EXTERNAL MODULE: ./src/ts/util/addScript.ts\nvar addScript = __webpack_require__(228);\n// EXTERNAL MODULE: ./src/ts/util/hasClosest.ts\nvar hasClosest = __webpack_require__(713);\n// EXTERNAL MODULE: ./src/ts/util/merge.ts\nvar merge = __webpack_require__(224);\n;// CONCATENATED MODULE: ./src/ts/markdown/anchorRender.ts\nvar anchorRender = function (type) {\n    document.querySelectorAll(\".vditor-anchor\").forEach(function (anchor) {\n        if (type === 1) {\n            anchor.classList.add(\"vditor-anchor--left\");\n        }\n        anchor.onclick = function () {\n            var id = anchor.getAttribute(\"href\").substr(1);\n            var top = document.getElementById(\"vditorAnchor-\" + id).offsetTop;\n            document.querySelector(\"html\").scrollTop = top;\n        };\n    });\n    window.onhashchange = function () {\n        var element = document.getElementById(\"vditorAnchor-\" + decodeURIComponent(window.location.hash.substr(1)));\n        if (element) {\n            document.querySelector(\"html\").scrollTop = element.offsetTop;\n        }\n    };\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/setLute.ts\nvar setLute = __webpack_require__(792);\n// EXTERNAL MODULE: ./src/ts/util/selection.ts\nvar selection = __webpack_require__(187);\n;// CONCATENATED MODULE: ./src/ts/markdown/speechRender.ts\n\nvar speechRender = function (element, lang) {\n    if (lang === void 0) { lang = \"zh_CN\"; }\n    if (typeof speechSynthesis === \"undefined\" || typeof SpeechSynthesisUtterance === \"undefined\") {\n        return;\n    }\n    var playSVG = '<svg><use xlink:href=\"#vditor-icon-play\"></use></svg>';\n    var pauseSVG = '<svg><use xlink:href=\"#vditor-icon-pause\"></use></svg>';\n    var speechDom = document.querySelector(\".vditor-speech\");\n    if (!speechDom) {\n        speechDom = document.createElement(\"div\");\n        speechDom.className = \"vditor-speech\";\n        document.body.insertAdjacentElement(\"beforeend\", speechDom);\n        var getVoice = function () {\n            var voices = speechSynthesis.getVoices();\n            var currentVoice;\n            var defaultVoice;\n            voices.forEach(function (item) {\n                if (item.lang === lang.replace(\"_\", \"-\")) {\n                    currentVoice = item;\n                }\n                if (item.default) {\n                    defaultVoice = item;\n                }\n            });\n            if (!currentVoice) {\n                currentVoice = defaultVoice;\n            }\n            return currentVoice;\n        };\n        if (speechSynthesis.onvoiceschanged !== undefined) {\n            speechSynthesis.onvoiceschanged = getVoice;\n        }\n        var voice_1 = getVoice();\n        speechDom.onclick = function () {\n            if (speechDom.className === \"vditor-speech\") {\n                var utterThis = new SpeechSynthesisUtterance(speechDom.getAttribute(\"data-text\"));\n                utterThis.voice = voice_1;\n                utterThis.onend = function () {\n                    speechDom.className = \"vditor-speech\";\n                    speechSynthesis.cancel();\n                    speechDom.innerHTML = playSVG;\n                };\n                speechSynthesis.speak(utterThis);\n                speechDom.className = \"vditor-speech vditor-speech--current\";\n                speechDom.innerHTML = pauseSVG;\n            }\n            else {\n                if (speechSynthesis.speaking) {\n                    if (speechSynthesis.paused) {\n                        speechSynthesis.resume();\n                        speechDom.innerHTML = pauseSVG;\n                    }\n                    else {\n                        speechSynthesis.pause();\n                        speechDom.innerHTML = playSVG;\n                    }\n                }\n            }\n            (0,selection/* setSelectionFocus */.Hc)(window.vditorSpeechRange);\n        };\n        document.body.addEventListener(\"click\", function () {\n            if (getSelection().toString().trim() === \"\" && speechDom.style.display === \"block\") {\n                speechDom.className = \"vditor-speech\";\n                speechSynthesis.cancel();\n                speechDom.style.display = \"none\";\n            }\n        });\n    }\n    element.addEventListener(\"mouseup\", function (event) {\n        var text = getSelection().toString().trim();\n        speechSynthesis.cancel();\n        if (getSelection().toString().trim() === \"\") {\n            if (speechDom.style.display === \"block\") {\n                speechDom.className = \"vditor-speech\";\n                speechDom.style.display = \"none\";\n            }\n            return;\n        }\n        window.vditorSpeechRange = getSelection().getRangeAt(0).cloneRange();\n        var rect = getSelection().getRangeAt(0).getBoundingClientRect();\n        speechDom.innerHTML = playSVG;\n        speechDom.style.display = \"block\";\n        speechDom.style.top = (rect.top + rect.height + document.querySelector(\"html\").scrollTop - 20) + \"px\";\n        speechDom.style.left = (event.screenX + 2) + \"px\";\n        speechDom.setAttribute(\"data-text\", text);\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/markdown/previewRender.ts\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar mergeOptions = function (options) {\n    var defaultOption = {\n        anchor: 0,\n        cdn: constants/* Constants.CDN */.g.CDN,\n        customEmoji: {},\n        emojiPath: ((options && options.emojiPath) || constants/* Constants.CDN */.g.CDN) + \"/dist/images/emoji\",\n        hljs: constants/* Constants.HLJS_OPTIONS */.g.HLJS_OPTIONS,\n        icon: \"ant\",\n        lang: \"zh_CN\",\n        markdown: constants/* Constants.MARKDOWN_OPTIONS */.g.MARKDOWN_OPTIONS,\n        math: constants/* Constants.MATH_OPTIONS */.g.MATH_OPTIONS,\n        mode: \"light\",\n        speech: {\n            enable: false,\n        },\n        theme: constants/* Constants.THEME_OPTIONS */.g.THEME_OPTIONS,\n    };\n    return (0,merge/* merge */.T)(defaultOption, options);\n};\nvar md2html = function (mdText, options) {\n    var mergedOptions = mergeOptions(options);\n    return (0,addScript/* addScript */.G)(mergedOptions.cdn + \"/dist/js/lute/lute.min.js\", \"vditorLuteScript\").then(function () {\n        var lute = (0,setLute/* setLute */.X)({\n            autoSpace: mergedOptions.markdown.autoSpace,\n            codeBlockPreview: mergedOptions.markdown.codeBlockPreview,\n            emojiSite: mergedOptions.emojiPath,\n            emojis: mergedOptions.customEmoji,\n            fixTermTypo: mergedOptions.markdown.fixTermTypo,\n            footnotes: mergedOptions.markdown.footnotes,\n            headingAnchor: mergedOptions.anchor !== 0,\n            inlineMathDigit: mergedOptions.math.inlineDigit,\n            lazyLoadImage: mergedOptions.lazyLoadImage,\n            linkBase: mergedOptions.markdown.linkBase,\n            linkPrefix: mergedOptions.markdown.linkPrefix,\n            listStyle: mergedOptions.markdown.listStyle,\n            mark: mergedOptions.markdown.mark,\n            mathBlockPreview: mergedOptions.markdown.mathBlockPreview,\n            paragraphBeginningSpace: mergedOptions.markdown.paragraphBeginningSpace,\n            sanitize: mergedOptions.markdown.sanitize,\n            toc: mergedOptions.markdown.toc,\n        });\n        if (options === null || options === void 0 ? void 0 : options.renderers) {\n            lute.SetJSRenderers({\n                renderers: {\n                    Md2HTML: options.renderers,\n                },\n            });\n        }\n        lute.SetHeadingID(true);\n        return lute.Md2HTML(mdText);\n    });\n};\nvar previewRender = function (previewElement, markdown, options) { return __awaiter(void 0, void 0, void 0, function () {\n    var mergedOptions, html;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                mergedOptions = mergeOptions(options);\n                return [4 /*yield*/, md2html(markdown, mergedOptions)];\n            case 1:\n                html = _a.sent();\n                if (mergedOptions.transform) {\n                    html = mergedOptions.transform(html);\n                }\n                previewElement.innerHTML = html;\n                previewElement.classList.add(\"vditor-reset\");\n                if (!mergedOptions.i18n) {\n                    if (![\"en_US\", \"ja_JP\", \"ko_KR\", \"ru_RU\", \"zh_CN\", \"zh_TW\"].includes(mergedOptions.lang)) {\n                        throw new Error(\"options.lang error, see https://ld246.com/article/1549638745630#options\");\n                    }\n                    else {\n                        (0,addScript/* addScriptSync */.J)(mergedOptions.cdn + \"/dist/js/i18n/\" + mergedOptions.lang + \".js\", \"vditorI18nScript\");\n                    }\n                }\n                else {\n                    window.VditorI18n = mergedOptions.i18n;\n                }\n                (0,setContentTheme/* setContentTheme */.Z)(mergedOptions.theme.current, mergedOptions.theme.path);\n                if (mergedOptions.anchor === 1) {\n                    previewElement.classList.add(\"vditor-reset--anchor\");\n                }\n                (0,codeRender/* codeRender */.O)(previewElement);\n                (0,highlightRender/* highlightRender */.s)(mergedOptions.hljs, previewElement, mergedOptions.cdn);\n                (0,mathRender/* mathRender */.H)(previewElement, {\n                    cdn: mergedOptions.cdn,\n                    math: mergedOptions.math,\n                });\n                (0,mermaidRender/* mermaidRender */.i)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,flowchartRender/* flowchartRender */.P)(previewElement, mergedOptions.cdn);\n                (0,graphvizRender/* graphvizRender */.v)(previewElement, mergedOptions.cdn);\n                (0,chartRender/* chartRender */.p)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,mindmapRender/* mindmapRender */.P)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,plantumlRender/* plantumlRender */.B)(previewElement, mergedOptions.cdn);\n                (0,abcRender/* abcRender */.Q)(previewElement, mergedOptions.cdn);\n                (0,mediaRender/* mediaRender */.Y)(previewElement);\n                if (mergedOptions.speech.enable) {\n                    speechRender(previewElement);\n                }\n                if (mergedOptions.anchor !== 0) {\n                    anchorRender(mergedOptions.anchor);\n                }\n                if (mergedOptions.after) {\n                    mergedOptions.after();\n                }\n                if (mergedOptions.lazyLoadImage) {\n                    lazyLoadImageRender(previewElement);\n                }\n                if (mergedOptions.icon) {\n                    (0,addScript/* addScript */.G)(mergedOptions.cdn + \"/dist/js/icons/\" + mergedOptions.icon + \".js\", \"vditorIconScript\");\n                }\n                previewElement.addEventListener(\"click\", function (event) {\n                    var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n                    if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n                        var headingElement = previewElement.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n                        if (headingElement) {\n                            window.scrollTo(window.scrollX, headingElement.offsetTop);\n                        }\n                        return;\n                    }\n                });\n                return [2 /*return*/];\n        }\n    });\n}); };\n\n// EXTERNAL MODULE: ./src/ts/preview/image.ts\nvar preview_image = __webpack_require__(264);\n// EXTERNAL MODULE: ./src/ts/ui/setCodeTheme.ts\nvar setCodeTheme = __webpack_require__(968);\n;// CONCATENATED MODULE: ./src/method.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Vditor = /** @class */ (function () {\n    function Vditor() {\n    }\n    /** 点击图片放大 */\n    Vditor.adapterRender = adapterRender;\n    /** 点击图片放大 */\n    Vditor.previewImage = preview_image/* previewImage */.E;\n    /** 为 element 中的代码块添加复制按钮 */\n    Vditor.codeRender = codeRender/* codeRender */.O;\n    /** 对 graphviz 进行渲染 */\n    Vditor.graphvizRender = graphvizRender/* graphvizRender */.v;\n    /** 为 element 中的代码块进行高亮渲染 */\n    Vditor.highlightRender = highlightRender/* highlightRender */.s;\n    /** 对数学公式进行渲染 */\n    Vditor.mathRender = mathRender/* mathRender */.H;\n    /** 流程图/时序图/甘特图渲染 */\n    Vditor.mermaidRender = mermaidRender/* mermaidRender */.i;\n    /** flowchart.js 渲染 */\n    Vditor.flowchartRender = flowchartRender/* flowchartRender */.P;\n    /** 图表渲染 */\n    Vditor.chartRender = chartRender/* chartRender */.p;\n    /** 五线谱渲染 */\n    Vditor.abcRender = abcRender/* abcRender */.Q;\n    /** 脑图渲染 */\n    Vditor.mindmapRender = mindmapRender/* mindmapRender */.P;\n    /** plantuml渲染 */\n    Vditor.plantumlRender = plantumlRender/* plantumlRender */.B;\n    /** 大纲渲染 */\n    Vditor.outlineRender = outlineRender/* outlineRender */.k;\n    /** 为[特定链接](https://github.com/Vanessa219/vditor/issues/7)分别渲染为视频、音频、嵌入的 iframe */\n    Vditor.mediaRender = mediaRender/* mediaRender */.Y;\n    /** 对选中的文字进行阅读 */\n    Vditor.speechRender = speechRender;\n    /** 对图片进行懒加载 */\n    Vditor.lazyLoadImageRender = lazyLoadImageRender;\n    /** Markdown 文本转换为 HTML，该方法需使用[异步编程](https://ld246.com/article/1546828434083?r=Vaness) */\n    Vditor.md2html = md2html;\n    /** 页面 Markdown 文章渲染 */\n    Vditor.preview = previewRender;\n    /** 设置代码主题 */\n    Vditor.setCodeTheme = setCodeTheme/* setCodeTheme */.Y;\n    /** 设置内容主题 */\n    Vditor.setContentTheme = setContentTheme/* setContentTheme */.Z;\n    return Vditor;\n}());\n/* harmony default export */ const method = (Vditor);\n\n\n/***/ }),\n\n/***/ 260:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"H\": () => (/* binding */ _VDITOR_VERSION),\n/* harmony export */   \"g\": () => (/* binding */ Constants)\n/* harmony export */ });\nvar _VDITOR_VERSION = \"3.8.6\";\n\nvar Constants = /** @class */ (function () {\n    function Constants() {\n    }\n    Constants.ZWSP = \"\\u200b\";\n    Constants.DROP_EDITOR = \"application/editor\";\n    Constants.MOBILE_WIDTH = 520;\n    Constants.CLASS_MENU_DISABLED = \"vditor-menu--disabled\";\n    Constants.EDIT_TOOLBARS = [\"emoji\", \"headings\", \"bold\", \"italic\", \"strike\", \"link\", \"list\",\n        \"ordered-list\", \"outdent\", \"indent\", \"check\", \"line\", \"quote\", \"code\", \"inline-code\", \"insert-after\",\n        \"insert-before\", \"upload\", \"record\", \"table\"];\n    Constants.CODE_THEME = [\"abap\", \"algol\", \"algol_nu\", \"arduino\", \"autumn\", \"borland\", \"bw\",\n        \"colorful\", \"dracula\", \"emacs\", \"friendly\", \"fruity\", \"github\", \"igor\", \"lovelace\", \"manni\", \"monokai\",\n        \"monokailight\", \"murphy\", \"native\", \"paraiso-dark\", \"paraiso-light\", \"pastie\", \"perldoc\", \"pygments\",\n        \"rainbow_dash\", \"rrt\", \"solarized-dark\", \"solarized-dark256\", \"solarized-light\", \"swapoff\", \"tango\", \"trac\",\n        \"vim\", \"vs\", \"xcode\", \"ant-design\"];\n    Constants.CODE_LANGUAGES = [\"mermaid\", \"echarts\", \"mindmap\", \"plantuml\", \"abc\", \"graphviz\", \"flowchart\", \"apache\",\n        \"js\", \"ts\", \"html\",\n        // common\n        \"properties\", \"apache\", \"bash\", \"c\", \"csharp\", \"cpp\", \"css\", \"coffeescript\", \"diff\", \"go\", \"xml\", \"http\",\n        \"json\", \"java\", \"javascript\", \"kotlin\", \"less\", \"lua\", \"makefile\", \"markdown\", \"nginx\", \"objectivec\", \"php\",\n        \"php-template\", \"perl\", \"plaintext\", \"python\", \"python-repl\", \"r\", \"ruby\", \"rust\", \"scss\", \"sql\", \"shell\",\n        \"swift\", \"ini\", \"typescript\", \"vbnet\", \"yaml\",\n        \"ada\", \"clojure\", \"dart\", \"erb\", \"fortran\", \"gradle\", \"haskell\", \"julia\", \"julia-repl\", \"lisp\", \"matlab\",\n        \"pgsql\", \"powershell\", \"sql_more\", \"stata\", \"cmake\", \"mathematica\"];\n    Constants.CDN = \"https://cdn.jsdelivr.net/npm/vditor@\" + \"3.8.6\";\n    Constants.MARKDOWN_OPTIONS = {\n        autoSpace: false,\n        codeBlockPreview: true,\n        fixTermTypo: false,\n        footnotes: true,\n        linkBase: \"\",\n        linkPrefix: \"\",\n        listStyle: false,\n        mark: false,\n        mathBlockPreview: true,\n        paragraphBeginningSpace: false,\n        sanitize: true,\n        toc: false,\n    };\n    Constants.HLJS_OPTIONS = {\n        enable: true,\n        lineNumber: false,\n        style: \"github\",\n    };\n    Constants.MATH_OPTIONS = {\n        engine: \"KaTeX\",\n        inlineDigit: false,\n        macros: {},\n    };\n    Constants.THEME_OPTIONS = {\n        current: \"light\",\n        list: {\n            \"ant-design\": \"Ant Design\",\n            \"dark\": \"Dark\",\n            \"light\": \"Light\",\n            \"wechat\": \"WeChat\",\n        },\n        path: Constants.CDN + \"/dist/css/content-theme\",\n    };\n    return Constants;\n}());\n\n\n\n/***/ }),\n\n/***/ 369:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Q\": () => (/* binding */ abcRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar abcRender = function (element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var abcElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.abcRenderAdapter.getElements(element);\n    if (abcElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/abcjs/abcjs_basic.min.js\", \"vditorAbcjsScript\").then(function () {\n            abcElements.forEach(function (item) {\n                if (item.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    item.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                if (item.getAttribute(\"data-processed\") === \"true\") {\n                    return;\n                }\n                ABCJS.renderAbc(item, _adapterRender__WEBPACK_IMPORTED_MODULE_1__.abcRenderAdapter.getCode(item).trim());\n                item.style.overflowX = \"auto\";\n                item.setAttribute(\"data-processed\", \"true\");\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 46:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"mathRenderAdapter\": () => (/* binding */ mathRenderAdapter),\n/* harmony export */   \"mermaidRenderAdapter\": () => (/* binding */ mermaidRenderAdapter),\n/* harmony export */   \"mindmapRenderAdapter\": () => (/* binding */ mindmapRenderAdapter),\n/* harmony export */   \"chartRenderAdapter\": () => (/* binding */ chartRenderAdapter),\n/* harmony export */   \"abcRenderAdapter\": () => (/* binding */ abcRenderAdapter),\n/* harmony export */   \"graphvizRenderAdapter\": () => (/* binding */ graphvizRenderAdapter),\n/* harmony export */   \"flowchartRenderAdapter\": () => (/* binding */ flowchartRenderAdapter),\n/* harmony export */   \"plantumlRenderAdapter\": () => (/* binding */ plantumlRenderAdapter)\n/* harmony export */ });\nvar mathRenderAdapter = {\n    getCode: function (mathElement) { return mathElement.textContent; },\n    getElements: function (element) { return element.querySelectorAll(\".language-math\"); },\n};\nvar mermaidRenderAdapter = {\n    /** 不仅要返回code，并且需要将 code 设置为 el 的 innerHTML */\n    getCode: function (el) { return el.textContent; },\n    getElements: function (element) { return element.querySelectorAll(\".language-mermaid\"); },\n};\nvar mindmapRenderAdapter = {\n    getCode: function (el) { return el.getAttribute(\"data-code\"); },\n    getElements: function (el) { return el.querySelectorAll(\".language-mindmap\"); },\n};\nvar chartRenderAdapter = {\n    getCode: function (el) { return el.innerText; },\n    getElements: function (el) { return el.querySelectorAll(\".language-echarts\"); },\n};\nvar abcRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (el) { return el.querySelectorAll(\".language-abc\"); },\n};\nvar graphvizRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (el) { return el.querySelectorAll(\".language-graphviz\"); },\n};\nvar flowchartRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (el) { return el.querySelectorAll(\".language-flowchart\"); },\n};\nvar plantumlRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (el) { return el.querySelectorAll(\".language-plantuml\"); },\n};\n\n\n/***/ }),\n\n/***/ 726:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"p\": () => (/* binding */ chartRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar chartRender = function (element, cdn, theme) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var echartsElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.chartRenderAdapter.getElements(element);\n    if (echartsElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/echarts/echarts.min.js\", \"vditorEchartsScript\").then(function () {\n            echartsElements.forEach(function (e) {\n                if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                var text = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.chartRenderAdapter.getCode(e).trim();\n                if (!text) {\n                    return;\n                }\n                try {\n                    if (e.getAttribute(\"data-processed\") === \"true\") {\n                        return;\n                    }\n                    var option = JSON.parse(text);\n                    echarts.init(e, theme === \"dark\" ? \"dark\" : undefined).setOption(option);\n                    e.setAttribute(\"data-processed\", \"true\");\n                }\n                catch (error) {\n                    e.className = \"vditor-reset--error\";\n                    e.innerHTML = \"echarts render error: <br>\" + error;\n                }\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 23:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"O\": () => (/* binding */ codeRender)\n/* harmony export */ });\n/* harmony import */ var _util_code160to32__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(769);\n\nvar codeRender = function (element) {\n    element.querySelectorAll(\"pre > code\").forEach(function (e, index) {\n        if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n            e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n            return;\n        }\n        if (e.classList.contains(\"language-mermaid\") || e.classList.contains(\"language-flowchart\") ||\n            e.classList.contains(\"language-echarts\") || e.classList.contains(\"language-mindmap\") ||\n            e.classList.contains(\"language-plantuml\") ||\n            e.classList.contains(\"language-abc\") || e.classList.contains(\"language-graphviz\") ||\n            e.classList.contains(\"language-math\")) {\n            return;\n        }\n        if (e.style.maxHeight.indexOf(\"px\") > -1) {\n            return;\n        }\n        // 避免预览区在渲染后由于代码块过多产生性能问题 https://github.com/b3log/vditor/issues/67\n        if (element.classList.contains(\"vditor-preview\") && index > 5) {\n            return;\n        }\n        var codeText = e.innerText;\n        if (e.classList.contains(\"highlight-chroma\")) {\n            var codeElement = document.createElement(\"code\");\n            codeElement.innerHTML = e.innerHTML;\n            codeElement.querySelectorAll(\".highlight-ln\").forEach(function (item) {\n                item.remove();\n            });\n            codeText = codeElement.innerText;\n        }\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-copy\";\n        divElement.innerHTML = \"<span aria-label=\\\"\" + window.VditorI18n.copy + \"\\\"\\nonmouseover=\\\"this.setAttribute('aria-label', '\" + window.VditorI18n.copy + \"')\\\"\\nclass=\\\"vditor-tooltipped vditor-tooltipped__w\\\"\\nonclick=\\\"this.previousElementSibling.select();document.execCommand('copy');\" +\n            (\"this.setAttribute('aria-label', '\" + window.VditorI18n.copied + \"')\\\"><svg><use xlink:href=\\\"#vditor-icon-copy\\\"></use></svg></span>\");\n        var textarea = document.createElement(\"textarea\");\n        textarea.value = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_0__/* .code160to32 */ .X)(codeText);\n        divElement.insertAdjacentElement(\"afterbegin\", textarea);\n        e.before(divElement);\n        e.style.maxHeight = (window.outerHeight - 40) + \"px\";\n    });\n};\n\n\n/***/ }),\n\n/***/ 383:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"P\": () => (/* binding */ flowchartRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar flowchartRender = function (element, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var flowchartElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.flowchartRenderAdapter.getElements(element);\n    if (flowchartElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/flowchart.js/flowchart.min.js\", \"vditorFlowchartScript\").then(function () {\n        flowchartElements.forEach(function (item) {\n            if (item.getAttribute(\"data-processed\") === \"true\") {\n                return;\n            }\n            var flowchartObj = flowchart.parse(_adapterRender__WEBPACK_IMPORTED_MODULE_1__.flowchartRenderAdapter.getCode(item));\n            item.innerHTML = \"\";\n            flowchartObj.drawSVG(item);\n            item.setAttribute(\"data-processed\", \"true\");\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 890:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"v\": () => (/* binding */ graphvizRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar graphvizRender = function (element, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var graphvizElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.graphvizRenderAdapter.getElements(element);\n    if (graphvizElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/graphviz/viz.js\", \"vditorGraphVizScript\").then(function () {\n        graphvizElements.forEach(function (e) {\n            var code = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.graphvizRenderAdapter.getCode(e);\n            if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                return;\n            }\n            if (e.getAttribute(\"data-processed\") === \"true\" || code.trim() === \"\") {\n                return;\n            }\n            try {\n                var blob = new Blob([\"importScripts('\" + document.getElementById(\"vditorGraphVizScript\").src.replace(\"viz.js\", \"full.render.js\") + \"');\"], { type: \"application/javascript\" });\n                var url = window.URL || window.webkitURL;\n                var blobUrl = url.createObjectURL(blob);\n                var worker = new Worker(blobUrl);\n                new Viz({ worker: worker })\n                    .renderSVGElement(code).then(function (result) {\n                    e.innerHTML = result.outerHTML;\n                }).catch(function (error) {\n                    e.innerHTML = \"graphviz render error: <br>\" + error;\n                    e.className = \"vditor-reset--error\";\n                });\n            }\n            catch (e) {\n                console.error(\"graphviz error\", e);\n            }\n            e.setAttribute(\"data-processed\", \"true\");\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 93:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"s\": () => (/* binding */ highlightRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(946);\n\n\n\nvar highlightRender = function (hljsOption, element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var style = hljsOption.style;\n    if (!_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CODE_THEME.includes */ .g.CODE_THEME.includes(style)) {\n        style = \"github\";\n    }\n    var vditorHljsStyle = document.getElementById(\"vditorHljsStyle\");\n    var href = cdn + \"/dist/js/highlight.js/styles/\" + style + \".css\";\n    if (vditorHljsStyle && vditorHljsStyle.href !== href) {\n        vditorHljsStyle.remove();\n    }\n    (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(cdn + \"/dist/js/highlight.js/styles/\" + style + \".css\", \"vditorHljsStyle\");\n    if (hljsOption.enable === false) {\n        return;\n    }\n    var codes = element.querySelectorAll(\"pre > code\");\n    if (codes.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/highlight.js/highlight.pack.js\", \"vditorHljsScript\").then(function () {\n        element.querySelectorAll(\"pre > code\").forEach(function (block) {\n            // ir & wysiwyg 区域不渲染\n            if (block.parentElement.classList.contains(\"vditor-ir__marker--pre\") ||\n                block.parentElement.classList.contains(\"vditor-wysiwyg__pre\")) {\n                return;\n            }\n            if (block.classList.contains(\"language-mermaid\") || block.classList.contains(\"language-flowchart\") ||\n                block.classList.contains(\"language-echarts\") || block.classList.contains(\"language-mindmap\") ||\n                block.classList.contains(\"language-plantuml\") ||\n                block.classList.contains(\"language-abc\") || block.classList.contains(\"language-graphviz\") ||\n                block.classList.contains(\"language-math\")) {\n                return;\n            }\n            hljs.highlightElement(block);\n            if (!hljsOption.lineNumber) {\n                return;\n            }\n            block.classList.add(\"vditor-linenumber\");\n            var linenNumberTemp = block.querySelector(\".vditor-linenumber__temp\");\n            if (!linenNumberTemp) {\n                linenNumberTemp = document.createElement(\"div\");\n                linenNumberTemp.className = \"vditor-linenumber__temp\";\n                block.insertAdjacentElement(\"beforeend\", linenNumberTemp);\n            }\n            var whiteSpace = getComputedStyle(block).whiteSpace;\n            var isSoftWrap = false;\n            if (whiteSpace === \"pre-wrap\" || whiteSpace === \"pre-line\") {\n                isSoftWrap = true;\n            }\n            var lineNumberHTML = \"\";\n            var lineList = block.textContent.split(/\\r\\n|\\r|\\n/g);\n            lineList.pop();\n            lineList.map(function (line) {\n                var lineHeight = \"\";\n                if (isSoftWrap) {\n                    linenNumberTemp.textContent = line || \"\\n\";\n                    lineHeight = \" style=\\\"height:\" + linenNumberTemp.getBoundingClientRect().height + \"px\\\"\";\n                }\n                lineNumberHTML += \"<span\" + lineHeight + \"></span>\";\n            });\n            linenNumberTemp.style.display = \"none\";\n            lineNumberHTML = \"<span class=\\\"vditor-linenumber__rows\\\">\" + lineNumberHTML + \"</span>\";\n            block.insertAdjacentHTML(\"beforeend\", lineNumberHTML);\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 323:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"H\": () => (/* binding */ mathRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(228);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(946);\n/* harmony import */ var _util_code160to32__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(769);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\n\n\nvar mathRender = function (element, options) {\n    var mathElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mathRenderAdapter.getElements(element);\n    if (mathElements.length === 0) {\n        return;\n    }\n    var defaultOptions = {\n        cdn: _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN,\n        math: {\n            engine: \"KaTeX\",\n            inlineDigit: false,\n            macros: {},\n        },\n    };\n    if (options && options.math) {\n        options.math =\n            Object.assign({}, defaultOptions.math, options.math);\n    }\n    options = Object.assign({}, defaultOptions, options);\n    if (options.math.engine === \"KaTeX\") {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_2__/* .addStyle */ .c)(options.cdn + \"/dist/js/katex/katex.min.css\", \"vditorKatexStyle\");\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_3__/* .addScript */ .G)(options.cdn + \"/dist/js/katex/katex.min.js\", \"vditorKatexScript\").then(function () {\n            mathElements.forEach(function (mathElement) {\n                if (mathElement.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    mathElement.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                if (mathElement.getAttribute(\"data-math\")) {\n                    return;\n                }\n                var math = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_4__/* .code160to32 */ .X)(_adapterRender__WEBPACK_IMPORTED_MODULE_1__.mathRenderAdapter.getCode(mathElement));\n                mathElement.setAttribute(\"data-math\", math);\n                try {\n                    mathElement.innerHTML = katex.renderToString(math, {\n                        displayMode: mathElement.tagName === \"DIV\",\n                        output: \"html\",\n                    });\n                }\n                catch (e) {\n                    mathElement.innerHTML = e.message;\n                    mathElement.className = \"language-math vditor-reset--error\";\n                }\n                mathElement.addEventListener(\"copy\", function (event) {\n                    event.stopPropagation();\n                    event.preventDefault();\n                    var vditorMathElement = event.currentTarget.closest(\".language-math\");\n                    event.clipboardData.setData(\"text/html\", vditorMathElement.innerHTML);\n                    event.clipboardData.setData(\"text/plain\", vditorMathElement.getAttribute(\"data-math\"));\n                });\n            });\n        });\n    }\n    else if (options.math.engine === \"MathJax\") {\n        var chainAsync_1 = function (fns) {\n            if (fns.length === 0) {\n                return;\n            }\n            var curr = 0;\n            var last = fns[fns.length - 1];\n            var next = function () {\n                var fn = fns[curr++];\n                fn === last ? fn() : fn(next);\n            };\n            next();\n        };\n        if (!window.MathJax) {\n            window.MathJax = {\n                loader: {\n                    paths: { mathjax: options.cdn + \"/dist/js/mathjax\" },\n                },\n                startup: {\n                    typeset: false,\n                },\n                tex: {\n                    macros: options.math.macros,\n                },\n            };\n        }\n        // 循环加载会抛异常\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_3__/* .addScriptSync */ .J)(options.cdn + \"/dist/js/mathjax/tex-svg-full.js\", \"protyleMathJaxScript\");\n        var renderMath_1 = function (mathElement, next) {\n            var math = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_4__/* .code160to32 */ .X)(mathElement.textContent).trim();\n            var mathOptions = window.MathJax.getMetricsFor(mathElement);\n            mathOptions.display = mathElement.tagName === \"DIV\";\n            window.MathJax.tex2svgPromise(math, mathOptions).then(function (node) {\n                mathElement.innerHTML = \"\";\n                mathElement.setAttribute(\"data-math\", math);\n                mathElement.append(node);\n                window.MathJax.startup.document.clear();\n                window.MathJax.startup.document.updateDocument();\n                var errorTextElement = node.querySelector('[data-mml-node=\"merror\"]');\n                if (errorTextElement && errorTextElement.textContent.trim() !== \"\") {\n                    mathElement.innerHTML = errorTextElement.textContent.trim();\n                    mathElement.className = \"vditor-reset--error\";\n                }\n                if (next) {\n                    next();\n                }\n            });\n        };\n        window.MathJax.startup.promise.then(function () {\n            var chains = [];\n            var _loop_1 = function (i) {\n                var mathElement = mathElements[i];\n                if (!mathElement.parentElement.classList.contains(\"vditor-wysiwyg__pre\") &&\n                    !mathElement.parentElement.classList.contains(\"vditor-ir__marker--pre\") &&\n                    !mathElement.getAttribute(\"data-math\") && (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_4__/* .code160to32 */ .X)(mathElement.textContent).trim()) {\n                    chains.push(function (next) {\n                        if (i === mathElements.length - 1) {\n                            renderMath_1(mathElement);\n                        }\n                        else {\n                            renderMath_1(mathElement, next);\n                        }\n                    });\n                }\n            };\n            for (var i = 0; i < mathElements.length; i++) {\n                _loop_1(i);\n            }\n            chainAsync_1(chains);\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 207:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Y\": () => (/* binding */ mediaRender)\n/* harmony export */ });\nvar videoRender = function (element, url) {\n    element.insertAdjacentHTML(\"afterend\", \"<video controls=\\\"controls\\\" src=\\\"\" + url + \"\\\"></video>\");\n    element.remove();\n};\nvar audioRender = function (element, url) {\n    element.insertAdjacentHTML(\"afterend\", \"<audio controls=\\\"controls\\\" src=\\\"\" + url + \"\\\"></audio>\");\n    element.remove();\n};\nvar iframeRender = function (element, url) {\n    var youtubeMatch = url.match(/\\/\\/(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))([\\w|-]{11})(?:(?:[\\?&]t=)(\\S+))?/);\n    var youkuMatch = url.match(/\\/\\/v\\.youku\\.com\\/v_show\\/id_(\\w+)=*\\.html/);\n    var qqMatch = url.match(/\\/\\/v\\.qq\\.com\\/x\\/cover\\/.*\\/([^\\/]+)\\.html\\??.*/);\n    var coubMatch = url.match(/(?:www\\.|\\/\\/)coub\\.com\\/view\\/(\\w+)/);\n    var facebookMatch = url.match(/(?:www\\.|\\/\\/)facebook\\.com\\/([^\\/]+)\\/videos\\/([0-9]+)/);\n    var dailymotionMatch = url.match(/.+dailymotion.com\\/(video|hub)\\/(\\w+)\\?/);\n    var bilibiliMatch = url.match(/(?:www\\.|\\/\\/)bilibili\\.com\\/video\\/(\\w+)/);\n    var tedMatch = url.match(/(?:www\\.|\\/\\/)ted\\.com\\/talks\\/(\\w+)/);\n    if (youtubeMatch && youtubeMatch[1].length === 11) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//www.youtube.com/embed/\" + (youtubeMatch[1] +\n            (youtubeMatch[2] ? \"?start=\" + youtubeMatch[2] : \"\")) + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (youkuMatch && youkuMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//player.youku.com/embed/\" + youkuMatch[1] + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (qqMatch && qqMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"https://v.qq.com/txp/iframe/player.html?vid=\" + qqMatch[1] + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (coubMatch && coubMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"//coub.com/embed/\" + coubMatch[1] + \"?muted=false&autostart=false&originalSize=true&startWithHD=true\\\"></iframe>\");\n        element.remove();\n    }\n    else if (facebookMatch && facebookMatch[0]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"https://www.facebook.com/plugins/video.php?href=\" + encodeURIComponent(facebookMatch[0]) + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (dailymotionMatch && dailymotionMatch[2]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"https://www.dailymotion.com/embed/video/\" + dailymotionMatch[2] + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (bilibiliMatch && bilibiliMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"//player.bilibili.com/player.html?bvid=\" + bilibiliMatch[1] + \"\\\"></iframe>\");\n        element.remove();\n    }\n    else if (tedMatch && tedMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//embed.ted.com/talks/\" + tedMatch[1] + \"\\\"></iframe>\");\n        element.remove();\n    }\n};\nvar mediaRender = function (element) {\n    if (!element) {\n        return;\n    }\n    element.querySelectorAll(\"a\").forEach(function (aElement) {\n        var url = aElement.getAttribute(\"href\");\n        if (!url) {\n            return;\n        }\n        if (url.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)) {\n            videoRender(aElement, url);\n        }\n        else if (url.match(/^.+.(mp3|wav|flac)$/)) {\n            audioRender(aElement, url);\n        }\n        else {\n            iframeRender(aElement, url);\n        }\n    });\n};\n\n\n/***/ }),\n\n/***/ 765:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"i\": () => (/* binding */ mermaidRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar mermaidRender = function (element, cdn, theme) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var mermaidElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mermaidRenderAdapter.getElements(element);\n    if (mermaidElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/mermaid/mermaid.min.js\", \"vditorMermaidScript\").then(function () {\n        var config = {\n            altFontFamily: \"sans-serif\",\n            flowchart: {\n                htmlLabels: true,\n                useMaxWidth: true,\n            },\n            fontFamily: \"sans-serif\",\n            gantt: {\n                leftPadding: 75,\n                rightPadding: 20,\n            },\n            securityLevel: \"loose\",\n            sequence: {\n                boxMargin: 8,\n                diagramMarginX: 8,\n                diagramMarginY: 8,\n                useMaxWidth: true,\n            },\n            startOnLoad: false,\n        };\n        if (theme === \"dark\") {\n            config.theme = \"dark\";\n            config.themeVariables = {\n                activationBkgColor: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                activationBorderColor: \"#81B1DB\",\n                activeTaskBkgColor: \"#81B1DB\",\n                activeTaskBorderColor: \"#ffffff\",\n                actorBkg: \"#1f2020\",\n                actorBorder: \"#81B1DB\",\n                actorLineColor: \"lightgrey\",\n                actorTextColor: \"lightgrey\",\n                altBackground: \"hsl(0, 0%, 40%)\",\n                altSectionBkgColor: \"#333\",\n                arrowheadColor: \"lightgrey\",\n                background: \"#333\",\n                border1: \"#81B1DB\",\n                border2: \"rgba(255, 255, 255, 0.25)\",\n                classText: \"#e0dfdf\",\n                clusterBkg: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                clusterBorder: \"rgba(255, 255, 255, 0.25)\",\n                critBkgColor: \"#E83737\",\n                critBorderColor: \"#E83737\",\n                darkTextColor: \"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)\",\n                defaultLinkColor: \"lightgrey\",\n                doneTaskBkgColor: \"lightgrey\",\n                doneTaskBorderColor: \"grey\",\n                edgeLabelBackground: \"hsl(0, 0%, 34.4117647059%)\",\n                errorBkgColor: \"#a44141\",\n                errorTextColor: \"#ddd\",\n                fillType0: \"#1f2020\",\n                fillType1: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                fillType2: \"hsl(244, 1.5873015873%, 12.3529411765%)\",\n                fillType3: \"hsl(244, 1.5873015873%, 28.3529411765%)\",\n                fillType4: \"hsl(116, 1.5873015873%, 12.3529411765%)\",\n                fillType5: \"hsl(116, 1.5873015873%, 28.3529411765%)\",\n                fillType6: \"hsl(308, 1.5873015873%, 12.3529411765%)\",\n                fillType7: \"hsl(308, 1.5873015873%, 28.3529411765%)\",\n                fontFamily: \"\\\"trebuchet ms\\\", verdana, arial\",\n                fontSize: \"16px\",\n                gridColor: \"lightgrey\",\n                labelBackground: \"#181818\",\n                labelBoxBkgColor: \"#1f2020\",\n                labelBoxBorderColor: \"#81B1DB\",\n                labelColor: \"#ccc\",\n                labelTextColor: \"lightgrey\",\n                lineColor: \"lightgrey\",\n                loopTextColor: \"lightgrey\",\n                mainBkg: \"#1f2020\",\n                mainContrastColor: \"lightgrey\",\n                nodeBkg: \"#1f2020\",\n                nodeBorder: \"#81B1DB\",\n                noteBkgColor: \"#fff5ad\",\n                noteBorderColor: \"rgba(255, 255, 255, 0.25)\",\n                noteTextColor: \"#1f2020\",\n                primaryBorderColor: \"hsl(180, 0%, 2.3529411765%)\",\n                primaryColor: \"#1f2020\",\n                primaryTextColor: \"#e0dfdf\",\n                secondBkg: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                secondaryBorderColor: \"hsl(180, 0%, 18.3529411765%)\",\n                secondaryColor: \"hsl(180, 1.5873015873%, 28.3529411765%)\",\n                secondaryTextColor: \"rgb(183.8476190475, 181.5523809523, 181.5523809523)\",\n                sectionBkgColor: \"hsl(52.9411764706, 28.813559322%, 58.431372549%)\",\n                sectionBkgColor2: \"#EAE8D9\",\n                sequenceNumberColor: \"black\",\n                signalColor: \"lightgrey\",\n                signalTextColor: \"lightgrey\",\n                taskBkgColor: \"hsl(180, 1.5873015873%, 35.3529411765%)\",\n                taskBorderColor: \"#ffffff\",\n                taskTextClickableColor: \"#003163\",\n                taskTextColor: \"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)\",\n                taskTextDarkColor: \"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)\",\n                taskTextLightColor: \"lightgrey\",\n                taskTextOutsideColor: \"lightgrey\",\n                tertiaryBorderColor: \"hsl(20, 0%, 2.3529411765%)\",\n                tertiaryColor: \"hsl(20, 1.5873015873%, 12.3529411765%)\",\n                tertiaryTextColor: \"rgb(222.9999999999, 223.6666666666, 223.9999999999)\",\n                textColor: \"#ccc\",\n                titleColor: \"#F9FFFE\",\n                todayLineColor: \"#DB5757\",\n            };\n        }\n        mermaid.initialize(config);\n        mermaidElements.forEach(function (item) {\n            var code = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mermaidRenderAdapter.getCode(item);\n            if (item.getAttribute(\"data-processed\") === \"true\" || code.trim() === \"\") {\n                return;\n            }\n            mermaid.init(undefined, item);\n            item.setAttribute(\"data-processed\", \"true\");\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 894:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"P\": () => (/* binding */ mindmapRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar mindmapRender = function (element, cdn, theme) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var mindmapElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mindmapRenderAdapter.getElements(element);\n    if (mindmapElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/echarts/echarts.min.js\", \"vditorEchartsScript\").then(function () {\n            mindmapElements.forEach(function (e) {\n                if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                var text = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mindmapRenderAdapter.getCode(e);\n                if (!text) {\n                    return;\n                }\n                try {\n                    if (e.getAttribute(\"data-processed\") === \"true\") {\n                        return;\n                    }\n                    echarts.init(e, theme === \"dark\" ? \"dark\" : undefined).setOption({\n                        series: [\n                            {\n                                data: [JSON.parse(decodeURIComponent(text))],\n                                initialTreeDepth: -1,\n                                itemStyle: {\n                                    borderWidth: 0,\n                                    color: \"#4285f4\",\n                                },\n                                label: {\n                                    backgroundColor: \"#f6f8fa\",\n                                    borderColor: \"#d1d5da\",\n                                    borderRadius: 5,\n                                    borderWidth: 0.5,\n                                    color: \"#586069\",\n                                    lineHeight: 20,\n                                    offset: [-5, 0],\n                                    padding: [0, 5],\n                                    position: \"insideRight\",\n                                },\n                                lineStyle: {\n                                    color: \"#d1d5da\",\n                                    width: 1,\n                                },\n                                roam: true,\n                                symbol: function (value, params) {\n                                    var _a;\n                                    if ((_a = params === null || params === void 0 ? void 0 : params.data) === null || _a === void 0 ? void 0 : _a.children) {\n                                        return \"circle\";\n                                    }\n                                    else {\n                                        return \"path://\";\n                                    }\n                                },\n                                type: \"tree\",\n                            },\n                        ],\n                        tooltip: {\n                            trigger: \"item\",\n                            triggerOn: \"mousemove\",\n                        },\n                    });\n                    e.setAttribute(\"data-processed\", \"true\");\n                }\n                catch (error) {\n                    e.className = \"vditor-reset--error\";\n                    e.innerHTML = \"mindmap render error: <br>\" + error;\n                }\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 198:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"k\": () => (/* binding */ outlineRender)\n/* harmony export */ });\n/* harmony import */ var _util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(615);\n/* harmony import */ var _mathRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(323);\n\n\nvar outlineRender = function (contentElement, targetElement, vditor) {\n    var tocHTML = \"\";\n    var ids = [];\n    Array.from(contentElement.children).forEach(function (item, index) {\n        if ((0,_util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestByHeadings */ .W)(item)) {\n            if (vditor) {\n                var lastIndex = item.id.lastIndexOf(\"_\");\n                item.id = item.id.substring(0, lastIndex === -1 ? undefined : lastIndex) + \"_\" + index;\n            }\n            ids.push(item.id);\n            tocHTML += item.outerHTML.replace(\"<wbr>\", \"\");\n        }\n    });\n    if (tocHTML === \"\") {\n        targetElement.innerHTML = \"\";\n        return \"\";\n    }\n    var tempElement = document.createElement(\"div\");\n    if (vditor) {\n        vditor.lute.SetToC(true);\n        if (vditor.currentMode === \"wysiwyg\" && !vditor.preview.element.contains(contentElement)) {\n            tempElement.innerHTML = vditor.lute.SpinVditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        else if (vditor.currentMode === \"ir\" && !vditor.preview.element.contains(contentElement)) {\n            tempElement.innerHTML = vditor.lute.SpinVditorIRDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        else {\n            tempElement.innerHTML = vditor.lute.HTML2VditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        vditor.lute.SetToC(vditor.options.preview.markdown.toc);\n    }\n    else {\n        targetElement.classList.add(\"vditor-outline\");\n        var lute = Lute.New();\n        lute.SetToC(true);\n        tempElement.innerHTML = lute.HTML2VditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n    }\n    var headingsElement = tempElement.firstElementChild.querySelectorAll(\"li > span[data-target-id]\");\n    headingsElement.forEach(function (item, index) {\n        if (item.nextElementSibling && item.nextElementSibling.tagName === \"UL\") {\n            item.innerHTML = \"<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg><span>\" + item.innerHTML + \"</span>\";\n        }\n        else {\n            item.innerHTML = \"<svg></svg><span>\" + item.innerHTML + \"</span>\";\n        }\n        item.setAttribute(\"data-target-id\", ids[index]);\n    });\n    tocHTML = tempElement.firstElementChild.innerHTML;\n    if (headingsElement.length === 0) {\n        targetElement.innerHTML = \"\";\n        return tocHTML;\n    }\n    targetElement.innerHTML = tocHTML;\n    if (vditor) {\n        (0,_mathRender__WEBPACK_IMPORTED_MODULE_0__/* .mathRender */ .H)(targetElement, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    }\n    targetElement.firstElementChild.addEventListener(\"click\", function (event) {\n        var target = event.target;\n        while (target && !target.isEqualNode(targetElement)) {\n            if (target.classList.contains(\"vditor-outline__action\")) {\n                if (target.classList.contains(\"vditor-outline__action--close\")) {\n                    target.classList.remove(\"vditor-outline__action--close\");\n                    target.parentElement.nextElementSibling.setAttribute(\"style\", \"display:block\");\n                }\n                else {\n                    target.classList.add(\"vditor-outline__action--close\");\n                    target.parentElement.nextElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n                event.preventDefault();\n                event.stopPropagation();\n                break;\n            }\n            else if (target.getAttribute(\"data-target-id\")) {\n                event.preventDefault();\n                event.stopPropagation();\n                var idElement = document.getElementById(target.getAttribute(\"data-target-id\"));\n                if (!idElement) {\n                    return;\n                }\n                if (vditor) {\n                    if (vditor.options.height === \"auto\") {\n                        var windowScrollY = idElement.offsetTop + vditor.element.offsetTop;\n                        if (!vditor.options.toolbarConfig.pin) {\n                            windowScrollY += vditor.toolbar.element.offsetHeight;\n                        }\n                        window.scrollTo(window.scrollX, windowScrollY);\n                    }\n                    else {\n                        if (vditor.element.offsetTop < window.scrollY) {\n                            window.scrollTo(window.scrollX, vditor.element.offsetTop);\n                        }\n                        if (vditor.preview.element.contains(contentElement)) {\n                            contentElement.parentElement.scrollTop = idElement.offsetTop;\n                        }\n                        else {\n                            contentElement.scrollTop = idElement.offsetTop;\n                        }\n                    }\n                }\n                else {\n                    window.scrollTo(window.scrollX, idElement.offsetTop);\n                }\n                break;\n            }\n            target = target.parentElement;\n        }\n    });\n    return tocHTML;\n};\n\n\n/***/ }),\n\n/***/ 583:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"B\": () => (/* binding */ plantumlRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(228);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46);\n\n\n\nvar plantumlRender = function (element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var plantumlElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.plantumlRenderAdapter.getElements(element);\n    if (plantumlElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(cdn + \"/dist/js/plantuml/plantuml-encoder.min.js\", \"vditorPlantumlScript\").then(function () {\n        plantumlElements.forEach(function (e) {\n            if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                return;\n            }\n            var text = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.plantumlRenderAdapter.getCode(e).trim();\n            if (!text) {\n                return;\n            }\n            try {\n                e.innerHTML = \"<img src=\\\"http://www.plantuml.com/plantuml/svg/~1\" + plantumlEncoder.encode(text) + \"\\\">\";\n            }\n            catch (error) {\n                e.className = \"vditor-reset--error\";\n                e.innerHTML = \"plantuml render error: <br>\" + error;\n            }\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 792:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"X\": () => (/* binding */ setLute)\n/* harmony export */ });\nvar setLute = function (options) {\n    var lute = Lute.New();\n    lute.PutEmojis(options.emojis);\n    lute.SetEmojiSite(options.emojiSite);\n    lute.SetHeadingAnchor(options.headingAnchor);\n    lute.SetInlineMathAllowDigitAfterOpenMarker(options.inlineMathDigit);\n    lute.SetAutoSpace(options.autoSpace);\n    lute.SetToC(options.toc);\n    lute.SetFootnotes(options.footnotes);\n    lute.SetFixTermTypo(options.fixTermTypo);\n    lute.SetVditorCodeBlockPreview(options.codeBlockPreview);\n    lute.SetVditorMathBlockPreview(options.mathBlockPreview);\n    lute.SetSanitize(options.sanitize);\n    lute.SetChineseParagraphBeginningSpace(options.paragraphBeginningSpace);\n    lute.SetRenderListStyle(options.listStyle);\n    lute.SetLinkBase(options.linkBase);\n    lute.SetLinkPrefix(options.linkPrefix);\n    lute.SetMark(options.mark);\n    if (options.lazyLoadImage) {\n        lute.SetImageLazyLoading(options.lazyLoadImage);\n    }\n    return lute;\n};\n\n\n/***/ }),\n\n/***/ 264:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"E\": () => (/* binding */ previewImage)\n/* harmony export */ });\nvar previewImage = function (oldImgElement, lang, theme) {\n    if (lang === void 0) { lang = \"zh_CN\"; }\n    if (theme === void 0) { theme = \"classic\"; }\n    var oldImgRect = oldImgElement.getBoundingClientRect();\n    var height = 36;\n    document.body.insertAdjacentHTML(\"beforeend\", \"<div class=\\\"vditor vditor-img\" + (theme === \"dark\" ? \" vditor--dark\" : \"\") + \"\\\">\\n    <div class=\\\"vditor-img__bar\\\">\\n      <span class=\\\"vditor-img__btn\\\" data-deg=\\\"0\\\">\\n        <svg><use xlink:href=\\\"#vditor-icon-redo\\\"></use></svg>\\n        \" + window.VditorI18n.spin + \"\\n      </span>\\n      <span class=\\\"vditor-img__btn\\\"  onclick=\\\"this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''\\\">\\n        X &nbsp;\" + window.VditorI18n.close + \"\\n      </span>\\n    </div>\\n    <div class=\\\"vditor-img__img\\\" onclick=\\\"this.parentElement.outerHTML = '';document.body.style.overflow = ''\\\">\\n      <img style=\\\"width: \" + oldImgElement.width + \"px;height:\" + oldImgElement.height + \"px;transform: translate3d(\" + oldImgRect.left + \"px, \" + (oldImgRect.top - height) + \"px, 0)\\\" src=\\\"\" + oldImgElement.getAttribute(\"src\") + \"\\\">\\n    </div>\\n</div>\");\n    document.body.style.overflow = \"hidden\";\n    // 图片从原始位置移动到预览正中间的动画效果\n    var imgElement = document.querySelector(\".vditor-img img\");\n    var translate3d = \"translate3d(\" + Math.max(0, window.innerWidth - oldImgElement.naturalWidth) / 2 + \"px, \" + Math.max(0, window.innerHeight - height - oldImgElement.naturalHeight) / 2 + \"px, 0)\";\n    setTimeout(function () {\n        imgElement.setAttribute(\"style\", \"transition: transform .3s ease-in-out;transform: \" + translate3d);\n        setTimeout(function () {\n            imgElement.parentElement.scrollTo((imgElement.parentElement.scrollWidth - imgElement.parentElement.clientWidth) / 2, (imgElement.parentElement.scrollHeight - imgElement.parentElement.clientHeight) / 2);\n        }, 400);\n    });\n    // 旋转\n    var btnElement = document.querySelector(\".vditor-img__btn\");\n    btnElement.addEventListener(\"click\", function () {\n        var deg = parseInt(btnElement.getAttribute(\"data-deg\"), 10) + 90;\n        if ((deg / 90) % 2 === 1 && oldImgElement.naturalWidth > imgElement.parentElement.clientHeight) {\n            imgElement.style.transform = \"translate3d(\" + Math.max(0, window.innerWidth - oldImgElement.naturalWidth) / 2 + \"px, \" + (oldImgElement.naturalWidth / 2 - oldImgElement.naturalHeight / 2) + \"px, 0) rotateZ(\" + deg + \"deg)\";\n        }\n        else {\n            imgElement.style.transform = translate3d + \" rotateZ(\" + deg + \"deg)\";\n        }\n        btnElement.setAttribute(\"data-deg\", deg.toString());\n        setTimeout(function () {\n            imgElement.parentElement.scrollTo((imgElement.parentElement.scrollWidth - imgElement.parentElement.clientWidth) / 2, (imgElement.parentElement.scrollHeight - imgElement.parentElement.clientHeight) / 2);\n        }, 400);\n    });\n};\n\n\n/***/ }),\n\n/***/ 968:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Y\": () => (/* binding */ setCodeTheme)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(946);\n\n\nvar setCodeTheme = function (codeTheme, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    if (!_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CODE_THEME.includes */ .g.CODE_THEME.includes(codeTheme)) {\n        codeTheme = \"github\";\n    }\n    var vditorHljsStyle = document.getElementById(\"vditorHljsStyle\");\n    var href = cdn + \"/dist/js/highlight.js/styles/\" + codeTheme + \".css\";\n    if (!vditorHljsStyle) {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(href, \"vditorHljsStyle\");\n    }\n    else if (vditorHljsStyle.href !== href) {\n        vditorHljsStyle.remove();\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(href, \"vditorHljsStyle\");\n    }\n};\n\n\n/***/ }),\n\n/***/ 958:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Z\": () => (/* binding */ setContentTheme)\n/* harmony export */ });\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(946);\n\nvar setContentTheme = function (contentTheme, path) {\n    if (!contentTheme || !path) {\n        return;\n    }\n    var vditorContentTheme = document.getElementById(\"vditorContentTheme\");\n    var cssPath = path + \"/\" + contentTheme + \".css\";\n    if (!vditorContentTheme) {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_0__/* .addStyle */ .c)(cssPath, \"vditorContentTheme\");\n    }\n    else if (vditorContentTheme.href !== cssPath) {\n        vditorContentTheme.remove();\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_0__/* .addStyle */ .c)(cssPath, \"vditorContentTheme\");\n    }\n};\n\n\n/***/ }),\n\n/***/ 228:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"J\": () => (/* binding */ addScriptSync),\n/* harmony export */   \"G\": () => (/* binding */ addScript)\n/* harmony export */ });\nvar addScriptSync = function (path, id) {\n    if (document.getElementById(id)) {\n        return false;\n    }\n    var xhrObj = new XMLHttpRequest();\n    xhrObj.open(\"GET\", path, false);\n    xhrObj.setRequestHeader(\"Accept\", \"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01\");\n    xhrObj.send(\"\");\n    var scriptElement = document.createElement(\"script\");\n    scriptElement.type = \"text/javascript\";\n    scriptElement.text = xhrObj.responseText;\n    scriptElement.id = id;\n    document.head.appendChild(scriptElement);\n};\nvar addScript = function (path, id) {\n    return new Promise(function (resolve, reject) {\n        if (document.getElementById(id)) {\n            // 脚本加载后再次调用直接返回\n            resolve();\n            return false;\n        }\n        var scriptElement = document.createElement(\"script\");\n        scriptElement.src = path;\n        scriptElement.async = true;\n        // 循环调用时 Chrome 不会重复请求 js\n        document.head.appendChild(scriptElement);\n        scriptElement.onload = function () {\n            if (document.getElementById(id)) {\n                // 循环调用需清除 DOM 中的 script 标签\n                scriptElement.remove();\n                resolve();\n                return false;\n            }\n            scriptElement.id = id;\n            resolve();\n        };\n    });\n};\n\n\n/***/ }),\n\n/***/ 946:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"c\": () => (/* binding */ addStyle)\n/* harmony export */ });\nvar addStyle = function (url, id) {\n    if (!document.getElementById(id)) {\n        var styleElement = document.createElement(\"link\");\n        styleElement.id = id;\n        styleElement.rel = \"stylesheet\";\n        styleElement.type = \"text/css\";\n        styleElement.href = url;\n        document.getElementsByTagName(\"head\")[0].appendChild(styleElement);\n    }\n};\n\n\n/***/ }),\n\n/***/ 769:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"X\": () => (/* binding */ code160to32)\n/* harmony export */ });\nvar code160to32 = function (text) {\n    // 非打断空格转换为空格\n    return text.replace(/\\u00a0/g, \" \");\n};\n\n\n/***/ }),\n\n/***/ 931:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"G6\": () => (/* binding */ isSafari),\n/* harmony export */   \"vU\": () => (/* binding */ isFirefox),\n/* harmony export */   \"pK\": () => (/* binding */ accessLocalStorage),\n/* harmony export */   \"Le\": () => (/* binding */ getEventName),\n/* harmony export */   \"yl\": () => (/* binding */ isCtrl),\n/* harmony export */   \"ns\": () => (/* binding */ updateHotkeyTip),\n/* harmony export */   \"i7\": () => (/* binding */ isChrome)\n/* harmony export */ });\nvar isSafari = function () {\n    return navigator.userAgent.indexOf(\"Safari\") > -1 && navigator.userAgent.indexOf(\"Chrome\") === -1;\n};\nvar isFirefox = function () {\n    return navigator.userAgent.toLowerCase().indexOf(\"firefox\") > -1;\n};\nvar accessLocalStorage = function () {\n    try {\n        return typeof localStorage !== \"undefined\";\n    }\n    catch (e) {\n        return false;\n    }\n};\n// 用户 iPhone 点击延迟/需要双击的处理\nvar getEventName = function () {\n    if (navigator.userAgent.indexOf(\"iPhone\") > -1) {\n        return \"touchstart\";\n    }\n    else {\n        return \"click\";\n    }\n};\n// 区别 mac 上的 ctrl 和 meta\nvar isCtrl = function (event) {\n    if (navigator.platform.toUpperCase().indexOf(\"MAC\") >= 0) {\n        // mac\n        if (event.metaKey && !event.ctrlKey) {\n            return true;\n        }\n        return false;\n    }\n    else {\n        if (!event.metaKey && event.ctrlKey) {\n            return true;\n        }\n        return false;\n    }\n};\n// Mac，Windows 快捷键展示\nvar updateHotkeyTip = function (hotkey) {\n    if (/Mac/.test(navigator.platform) || navigator.platform === \"iPhone\") {\n        if (hotkey.indexOf(\"⇧\") > -1 && isFirefox()) {\n            // Mac Firefox 按下 shift 后，key 同 windows 系统\n            hotkey = hotkey.replace(\";\", \":\").replace(\"=\", \"+\").replace(\"-\", \"_\");\n        }\n    }\n    else {\n        if (hotkey.startsWith(\"⌘\")) {\n            hotkey = hotkey.replace(\"⌘\", \"⌘+\");\n        }\n        else if (hotkey.startsWith(\"⌥\") && hotkey.substr(1, 1) !== \"⌘\") {\n            hotkey = hotkey.replace(\"⌥\", \"⌥+\");\n        }\n        else {\n            hotkey = hotkey.replace(\"⇧⌘\", \"⌘+⇧+\").replace(\"⌥⌘\", \"⌥+⌘+\");\n        }\n        hotkey = hotkey.replace(\"⌘\", \"Ctrl\").replace(\"⇧\", \"Shift\")\n            .replace(\"⌥\", \"Alt\");\n        if (hotkey.indexOf(\"Shift\") > -1) {\n            hotkey = hotkey.replace(\";\", \":\").replace(\"=\", \"+\").replace(\"-\", \"_\");\n        }\n    }\n    return hotkey;\n};\nvar isChrome = function () {\n    return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n};\n\n\n/***/ }),\n\n/***/ 713:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"JQ\": () => (/* binding */ hasTopClosestByClassName),\n/* harmony export */   \"E2\": () => (/* binding */ hasTopClosestByTag),\n/* harmony export */   \"O9\": () => (/* binding */ getTopList),\n/* harmony export */   \"a1\": () => (/* binding */ hasClosestByAttribute),\n/* harmony export */   \"F9\": () => (/* binding */ hasClosestBlock),\n/* harmony export */   \"lG\": () => (/* binding */ hasClosestByMatchTag),\n/* harmony export */   \"fb\": () => (/* binding */ hasClosestByClassName),\n/* harmony export */   \"DX\": () => (/* binding */ getLastNode)\n/* harmony export */ });\n/* unused harmony export hasTopClosestByAttribute */\n/* harmony import */ var _hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(615);\n\nvar hasTopClosestByClassName = function (element, className) {\n    var closest = hasClosestByClassName(element, className);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = hasClosestByClassName(closest.parentElement, className);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar hasTopClosestByAttribute = function (element, attr, value) {\n    var closest = hasClosestByAttribute(element, attr, value);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = hasClosestByAttribute(closest.parentElement, attr, value);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar hasTopClosestByTag = function (element, nodeName) {\n    var closest = (0,_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__/* .hasClosestByTag */ .S)(element, nodeName);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = (0,_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__/* .hasClosestByTag */ .S)(closest.parentElement, nodeName);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar getTopList = function (element) {\n    var topUlElement = hasTopClosestByTag(element, \"UL\");\n    var topOlElement = hasTopClosestByTag(element, \"OL\");\n    var topListElement = topUlElement;\n    if (topOlElement && (!topUlElement || (topUlElement && topOlElement.contains(topUlElement)))) {\n        topListElement = topOlElement;\n    }\n    return topListElement;\n};\nvar hasClosestByAttribute = function (element, attr, value) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.getAttribute(attr) === value) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestBlock = function (element) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    var blockElement = hasClosestByAttribute(element, \"data-block\", \"0\");\n    if (blockElement) {\n        return blockElement;\n    }\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.tagName === \"H1\" ||\n            e.tagName === \"H2\" ||\n            e.tagName === \"H3\" ||\n            e.tagName === \"H4\" ||\n            e.tagName === \"H5\" ||\n            e.tagName === \"H6\" ||\n            e.tagName === \"P\" ||\n            e.tagName === \"BLOCKQUOTE\" ||\n            e.tagName === \"OL\" ||\n            e.tagName === \"UL\") {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByMatchTag = function (element, nodeName) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.nodeName === nodeName) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByClassName = function (element, className) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.classList.contains(className)) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar getLastNode = function (node) {\n    while (node && node.lastChild) {\n        node = node.lastChild;\n    }\n    return node;\n};\n\n\n/***/ }),\n\n/***/ 615:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"S\": () => (/* binding */ hasClosestByTag),\n/* harmony export */   \"W\": () => (/* binding */ hasClosestByHeadings)\n/* harmony export */ });\n// NOTE: 减少 method.ts 打包，故从 hasClosest.ts 中拆分\nvar hasClosestByTag = function (element, nodeName) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.nodeName.indexOf(nodeName) === 0) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByHeadings = function (element) {\n    var headingElement = hasClosestByTag(element, \"H\");\n    if (headingElement && headingElement.tagName.length === 2 && headingElement.tagName !== \"HR\") {\n        return headingElement;\n    }\n    return false;\n};\n\n\n/***/ }),\n\n/***/ 224:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"T\": () => (/* binding */ merge)\n/* harmony export */ });\nvar merge = function () {\n    var options = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        options[_i] = arguments[_i];\n    }\n    var target = {};\n    var merger = function (obj) {\n        for (var prop in obj) {\n            if (obj.hasOwnProperty(prop)) {\n                if (Object.prototype.toString.call(obj[prop]) === \"[object Object]\") {\n                    target[prop] = merge(target[prop], obj[prop]);\n                }\n                else {\n                    target[prop] = obj[prop];\n                }\n            }\n        }\n    };\n    for (var i = 0; i < options.length; i++) {\n        merger(options[i]);\n    }\n    return target;\n};\n\n\n/***/ }),\n\n/***/ 187:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"zh\": () => (/* binding */ getEditorRange),\n/* harmony export */   \"Ny\": () => (/* binding */ getCursorPosition),\n/* harmony export */   \"Gb\": () => (/* binding */ selectIsEditor),\n/* harmony export */   \"Hc\": () => (/* binding */ setSelectionFocus),\n/* harmony export */   \"im\": () => (/* binding */ getSelectPosition),\n/* harmony export */   \"$j\": () => (/* binding */ setSelectionByPosition),\n/* harmony export */   \"ib\": () => (/* binding */ setRangeByWbr),\n/* harmony export */   \"oC\": () => (/* binding */ insertHTML)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(260);\n/* harmony import */ var _compatibility__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(931);\n/* harmony import */ var _hasClosest__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(713);\n\n\n\nvar getEditorRange = function (vditor) {\n    var range;\n    var element = vditor[vditor.currentMode].element;\n    if (getSelection().rangeCount > 0) {\n        range = getSelection().getRangeAt(0);\n        if (element.isEqualNode(range.startContainer) || element.contains(range.startContainer)) {\n            return range;\n        }\n    }\n    if (vditor[vditor.currentMode].range) {\n        return vditor[vditor.currentMode].range;\n    }\n    element.focus();\n    range = element.ownerDocument.createRange();\n    range.setStart(element, 0);\n    range.collapse(true);\n    return range;\n};\nvar getCursorPosition = function (editor) {\n    var range = window.getSelection().getRangeAt(0);\n    if (!editor.contains(range.startContainer) && !(0,_hasClosest__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestByClassName */ .fb)(range.startContainer, \"vditor-panel--none\")) {\n        return {\n            left: 0,\n            top: 0,\n        };\n    }\n    var parentRect = editor.parentElement.getBoundingClientRect();\n    var cursorRect;\n    if (range.getClientRects().length === 0) {\n        if (range.startContainer.nodeType === 3) {\n            // 空行时，会出现没有 br 的情况，需要根据父元素 <p> 获取位置信息\n            var parent_1 = range.startContainer.parentElement;\n            if (parent_1 && parent_1.getClientRects().length > 0) {\n                cursorRect = parent_1.getClientRects()[0];\n            }\n            else {\n                return {\n                    left: 0,\n                    top: 0,\n                };\n            }\n        }\n        else {\n            var children = range.startContainer.children;\n            if (children[range.startOffset] &&\n                children[range.startOffset].getClientRects().length > 0) {\n                // markdown 模式回车\n                cursorRect = children[range.startOffset].getClientRects()[0];\n            }\n            else if (range.startContainer.childNodes.length > 0) {\n                // in table or code block\n                var cloneRange = range.cloneRange();\n                range.selectNode(range.startContainer.childNodes[Math.max(0, range.startOffset - 1)]);\n                cursorRect = range.getClientRects()[0];\n                range.setEnd(cloneRange.endContainer, cloneRange.endOffset);\n                range.setStart(cloneRange.startContainer, cloneRange.startOffset);\n            }\n            else {\n                cursorRect = range.startContainer.getClientRects()[0];\n            }\n            if (!cursorRect) {\n                var parentElement = range.startContainer.childNodes[range.startOffset];\n                while (!parentElement.getClientRects ||\n                    (parentElement.getClientRects && parentElement.getClientRects().length === 0)) {\n                    parentElement = parentElement.parentElement;\n                }\n                cursorRect = parentElement.getClientRects()[0];\n            }\n        }\n    }\n    else {\n        cursorRect = range.getClientRects()[0];\n    }\n    return {\n        left: cursorRect.left - parentRect.left,\n        top: cursorRect.top - parentRect.top,\n    };\n};\nvar selectIsEditor = function (editor, range) {\n    if (!range) {\n        if (getSelection().rangeCount === 0) {\n            return false;\n        }\n        else {\n            range = getSelection().getRangeAt(0);\n        }\n    }\n    var container = range.commonAncestorContainer;\n    return editor.isEqualNode(container) || editor.contains(container);\n};\nvar setSelectionFocus = function (range) {\n    var selection = window.getSelection();\n    selection.removeAllRanges();\n    selection.addRange(range);\n};\nvar getSelectPosition = function (selectElement, editorElement, range) {\n    var position = {\n        end: 0,\n        start: 0,\n    };\n    if (!range) {\n        if (getSelection().rangeCount === 0) {\n            return position;\n        }\n        range = window.getSelection().getRangeAt(0);\n    }\n    if (selectIsEditor(editorElement, range)) {\n        var preSelectionRange = range.cloneRange();\n        if (selectElement.childNodes[0] && selectElement.childNodes[0].childNodes[0]) {\n            preSelectionRange.setStart(selectElement.childNodes[0].childNodes[0], 0);\n        }\n        else {\n            preSelectionRange.selectNodeContents(selectElement);\n        }\n        preSelectionRange.setEnd(range.startContainer, range.startOffset);\n        position.start = preSelectionRange.toString().length;\n        position.end = position.start + range.toString().length;\n    }\n    return position;\n};\nvar setSelectionByPosition = function (start, end, editor) {\n    var charIndex = 0;\n    var line = 0;\n    var pNode = editor.childNodes[line];\n    var foundStart = false;\n    var stop = false;\n    start = Math.max(0, start);\n    end = Math.max(0, end);\n    var range = editor.ownerDocument.createRange();\n    range.setStart(pNode || editor, 0);\n    range.collapse(true);\n    while (!stop && pNode) {\n        var nextCharIndex = charIndex + pNode.textContent.length;\n        if (!foundStart && start >= charIndex && start <= nextCharIndex) {\n            if (start === 0) {\n                range.setStart(pNode, 0);\n            }\n            else {\n                if (pNode.childNodes[0].nodeType === 3) {\n                    range.setStart(pNode.childNodes[0], start - charIndex);\n                }\n                else if (pNode.nextSibling) {\n                    range.setStartBefore(pNode.nextSibling);\n                }\n                else {\n                    range.setStartAfter(pNode);\n                }\n            }\n            foundStart = true;\n            if (start === end) {\n                stop = true;\n                break;\n            }\n        }\n        if (foundStart && end >= charIndex && end <= nextCharIndex) {\n            if (end === 0) {\n                range.setEnd(pNode, 0);\n            }\n            else {\n                if (pNode.childNodes[0].nodeType === 3) {\n                    range.setEnd(pNode.childNodes[0], end - charIndex);\n                }\n                else if (pNode.nextSibling) {\n                    range.setEndBefore(pNode.nextSibling);\n                }\n                else {\n                    range.setEndAfter(pNode);\n                }\n            }\n            stop = true;\n        }\n        charIndex = nextCharIndex;\n        pNode = editor.childNodes[++line];\n    }\n    if (!stop && editor.childNodes[line - 1]) {\n        range.setStartBefore(editor.childNodes[line - 1]);\n    }\n    setSelectionFocus(range);\n    return range;\n};\nvar setRangeByWbr = function (element, range) {\n    var wbrElement = element.querySelector(\"wbr\");\n    if (!wbrElement) {\n        return;\n    }\n    if (!wbrElement.previousElementSibling) {\n        if (wbrElement.previousSibling) {\n            // text<wbr>\n            range.setStart(wbrElement.previousSibling, wbrElement.previousSibling.textContent.length);\n        }\n        else if (wbrElement.nextSibling) {\n            if (wbrElement.nextSibling.nodeType === 3) {\n                // <wbr>text\n                range.setStart(wbrElement.nextSibling, 0);\n            }\n            else {\n                // <wbr><br> https://github.com/Vanessa219/vditor/issues/400\n                range.setStartBefore(wbrElement.nextSibling);\n            }\n        }\n        else {\n            // 内容为空\n            range.setStart(wbrElement.parentElement, 0);\n        }\n    }\n    else {\n        if (wbrElement.previousElementSibling.isSameNode(wbrElement.previousSibling)) {\n            if (wbrElement.previousElementSibling.lastChild) {\n                // <em>text</em><wbr>\n                range.setStartBefore(wbrElement);\n                range.collapse(true);\n                setSelectionFocus(range);\n                // fix Chrome set range bug: **c**\n                if ((0,_compatibility__WEBPACK_IMPORTED_MODULE_2__/* .isChrome */ .i7)() && (wbrElement.previousElementSibling.tagName === \"EM\" ||\n                    wbrElement.previousElementSibling.tagName === \"STRONG\" ||\n                    wbrElement.previousElementSibling.tagName === \"S\")) {\n                    range.insertNode(document.createTextNode(_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.ZWSP */ .g.ZWSP));\n                    range.collapse(false);\n                }\n                wbrElement.remove();\n                return;\n            }\n            else {\n                // <br><wbr>\n                range.setStartAfter(wbrElement.previousElementSibling);\n            }\n        }\n        else {\n            // <em>text</em>text<wbr>\n            range.setStart(wbrElement.previousSibling, wbrElement.previousSibling.textContent.length);\n        }\n    }\n    range.collapse(true);\n    wbrElement.remove();\n    setSelectionFocus(range);\n};\nvar insertHTML = function (html, vditor) {\n    // 使用 lute 方法会添加 p 元素，只有一个 p 元素的时候进行删除\n    var tempElement = document.createElement(\"div\");\n    tempElement.innerHTML = html;\n    var tempBlockElement = tempElement.querySelectorAll(\"p\");\n    if (tempBlockElement.length === 1 && !tempBlockElement[0].previousSibling && !tempBlockElement[0].nextSibling &&\n        vditor[vditor.currentMode].element.children.length > 0 && tempElement.firstElementChild.tagName === \"P\") {\n        html = tempBlockElement[0].innerHTML.trim();\n    }\n    var pasteElement = document.createElement(\"div\");\n    pasteElement.innerHTML = html;\n    var range = getEditorRange(vditor);\n    if (range.toString() !== \"\") {\n        vditor[vditor.currentMode].preventInput = true;\n        document.execCommand(\"delete\", false, \"\");\n    }\n    if (pasteElement.firstElementChild &&\n        pasteElement.firstElementChild.getAttribute(\"data-block\") === \"0\") {\n        // 粘贴内容为块元素时，应在下一段落中插入\n        pasteElement.lastElementChild.insertAdjacentHTML(\"beforeend\", \"<wbr>\");\n        var blockElement = (0,_hasClosest__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestBlock */ .F9)(range.startContainer);\n        if (!blockElement) {\n            vditor[vditor.currentMode].element.insertAdjacentHTML(\"beforeend\", pasteElement.innerHTML);\n        }\n        else {\n            blockElement.insertAdjacentHTML(\"afterend\", pasteElement.innerHTML);\n        }\n        setRangeByWbr(vditor[vditor.currentMode].element, range);\n    }\n    else {\n        var pasteTemplate = document.createElement(\"template\");\n        pasteTemplate.innerHTML = html;\n        range.insertNode(pasteTemplate.content.cloneNode(true));\n        range.collapse(false);\n        setSelectionFocus(range);\n    }\n};\n\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t(() => {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = (exports, definition) => {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t(() => {\n/******/ \t\t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t(() => {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__webpack_require__.r = (exports) => {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/************************************************************************/\nvar __webpack_exports__ = {};\n// This entry need to be wrapped in an IIFE because it need to be in strict mode.\n(() => {\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ src)\n});\n\n// EXTERNAL MODULE: ./src/assets/scss/index.scss\nvar scss = __webpack_require__(157);\n// EXTERNAL MODULE: ./src/method.ts + 4 modules\nvar method = __webpack_require__(857);\n// EXTERNAL MODULE: ./src/ts/constants.ts\nvar constants = __webpack_require__(260);\n// EXTERNAL MODULE: ./src/ts/util/code160to32.ts\nvar code160to32 = __webpack_require__(769);\n;// CONCATENATED MODULE: ./src/ts/markdown/getMarkdown.ts\n\nvar getMarkdown = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return (0,code160to32/* code160to32 */.X)((vditor.sv.element.textContent + \"\\n\").replace(/\\n\\n$/, \"\\n\"));\n    }\n    else if (vditor.currentMode === \"wysiwyg\") {\n        return vditor.lute.VditorDOM2Md(vditor.wysiwyg.element.innerHTML);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        return vditor.lute.VditorIRDOM2Md(vditor.ir.element.innerHTML);\n    }\n    return \"\";\n};\n\n// EXTERNAL MODULE: ./src/ts/util/addScript.ts\nvar addScript = __webpack_require__(228);\n;// CONCATENATED MODULE: ./src/ts/devtools/index.ts\n\n\nvar DevTools = /** @class */ (function () {\n    function DevTools() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-devtools\";\n        this.element.innerHTML = '<div class=\"vditor-reset--error\"></div><div style=\"height: 100%;\"></div>';\n    }\n    DevTools.prototype.renderEchart = function (vditor) {\n        var _this = this;\n        if (vditor.devtools.element.style.display !== \"block\") {\n            return;\n        }\n        (0,addScript/* addScript */.G)(vditor.options.cdn + \"/dist/js/echarts/echarts.min.js\", \"vditorEchartsScript\").then(function () {\n            if (!_this.ASTChart) {\n                _this.ASTChart = echarts.init(vditor.devtools.element.lastElementChild);\n            }\n            try {\n                _this.element.lastElementChild.style.display = \"block\";\n                _this.element.firstElementChild.innerHTML = \"\";\n                _this.ASTChart.setOption({\n                    series: [\n                        {\n                            data: JSON.parse(vditor.lute.RenderEChartsJSON(getMarkdown(vditor))),\n                            initialTreeDepth: -1,\n                            label: {\n                                align: \"left\",\n                                backgroundColor: \"rgba(68, 77, 86, .68)\",\n                                borderRadius: 3,\n                                color: \"#d1d5da\",\n                                fontSize: 12,\n                                lineHeight: 12,\n                                offset: [9, 12],\n                                padding: [2, 4, 2, 4],\n                                position: \"top\",\n                                verticalAlign: \"middle\",\n                            },\n                            lineStyle: {\n                                color: \"#4285f4\",\n                                type: \"curve\",\n                                width: 1,\n                            },\n                            orient: \"vertical\",\n                            roam: true,\n                            type: \"tree\",\n                        },\n                    ],\n                    toolbox: {\n                        bottom: 25,\n                        emphasis: {\n                            iconStyle: {\n                                color: \"#4285f4\",\n                            },\n                        },\n                        feature: {\n                            restore: {\n                                show: true,\n                            },\n                            saveAsImage: {\n                                show: true,\n                            },\n                        },\n                        right: 15,\n                        show: true,\n                    },\n                });\n                _this.ASTChart.resize();\n            }\n            catch (e) {\n                _this.element.lastElementChild.style.display = \"none\";\n                _this.element.firstElementChild.innerHTML = e;\n            }\n        });\n    };\n    return DevTools;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/util/compatibility.ts\nvar compatibility = __webpack_require__(931);\n;// CONCATENATED MODULE: ./src/ts/toolbar/setToolbar.ts\n\n\nvar removeCurrentToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && itemElement.classList.contains(\"vditor-menu--current\")) {\n            itemElement.classList.remove(\"vditor-menu--current\");\n        }\n    });\n};\nvar setCurrentToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && !itemElement.classList.contains(\"vditor-menu--current\")) {\n            itemElement.classList.add(\"vditor-menu--current\");\n        }\n    });\n};\nvar enableToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && itemElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            itemElement.classList.remove(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED);\n        }\n    });\n};\nvar disableToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && !itemElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            itemElement.classList.add(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED);\n        }\n    });\n};\nvar hideToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        if (toolbar[name]) {\n            toolbar[name].style.display = \"none\";\n        }\n    });\n};\nvar showToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        if (toolbar[name]) {\n            toolbar[name].style.display = \"block\";\n        }\n    });\n};\n// \"subToolbar\", \"hint\", \"popover\"\nvar hidePanel = function (vditor, panels, exceptElement) {\n    if (panels.includes(\"subToolbar\")) {\n        vditor.toolbar.element.querySelectorAll(\".vditor-hint\").forEach(function (item) {\n            if (exceptElement && item.isEqualNode(exceptElement)) {\n                return;\n            }\n            item.style.display = \"none\";\n        });\n        if (vditor.toolbar.elements.emoji) {\n            vditor.toolbar.elements.emoji.lastElementChild.style.display = \"none\";\n        }\n    }\n    if (panels.includes(\"hint\")) {\n        vditor.hint.element.style.display = \"none\";\n    }\n    if (vditor.wysiwyg.popover && panels.includes(\"popover\")) {\n        vditor.wysiwyg.popover.style.display = \"none\";\n    }\n};\nvar toggleSubMenu = function (vditor, panelElement, actionBtn, level) {\n    actionBtn.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (actionBtn.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            return;\n        }\n        vditor.toolbar.element.querySelectorAll(\".vditor-hint--current\").forEach(function (item) {\n            item.classList.remove(\"vditor-hint--current\");\n        });\n        if (panelElement.style.display === \"block\") {\n            panelElement.style.display = \"none\";\n        }\n        else {\n            hidePanel(vditor, [\"subToolbar\", \"hint\", \"popover\"], actionBtn.parentElement.parentElement);\n            if (!actionBtn.classList.contains(\"vditor-tooltipped\")) {\n                actionBtn.classList.add(\"vditor-hint--current\");\n            }\n            panelElement.style.display = \"block\";\n            if (vditor.toolbar.element.getBoundingClientRect().right - actionBtn.getBoundingClientRect().right < 250) {\n                panelElement.classList.add(\"vditor-panel--left\");\n            }\n            else {\n                panelElement.classList.remove(\"vditor-panel--left\");\n            }\n        }\n    });\n};\n\n// EXTERNAL MODULE: ./src/ts/util/hasClosest.ts\nvar hasClosest = __webpack_require__(713);\n// EXTERNAL MODULE: ./src/ts/util/hasClosestByHeadings.ts\nvar hasClosestByHeadings = __webpack_require__(615);\n;// CONCATENATED MODULE: ./src/ts/util/log.ts\nvar log = function (method, content, type, print) {\n    if (print) {\n        // @ts-ignore\n        console.log(method + \" - \" + type + \": \" + content);\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/abcRender.ts\nvar abcRender = __webpack_require__(369);\n// EXTERNAL MODULE: ./src/ts/markdown/chartRender.ts\nvar chartRender = __webpack_require__(726);\n// EXTERNAL MODULE: ./src/ts/markdown/codeRender.ts\nvar codeRender = __webpack_require__(23);\n// EXTERNAL MODULE: ./src/ts/markdown/flowchartRender.ts\nvar flowchartRender = __webpack_require__(383);\n// EXTERNAL MODULE: ./src/ts/markdown/graphvizRender.ts\nvar graphvizRender = __webpack_require__(890);\n// EXTERNAL MODULE: ./src/ts/markdown/highlightRender.ts\nvar highlightRender = __webpack_require__(93);\n// EXTERNAL MODULE: ./src/ts/markdown/mathRender.ts\nvar mathRender = __webpack_require__(323);\n// EXTERNAL MODULE: ./src/ts/markdown/mermaidRender.ts\nvar mermaidRender = __webpack_require__(765);\n// EXTERNAL MODULE: ./src/ts/markdown/mindmapRender.ts\nvar mindmapRender = __webpack_require__(894);\n// EXTERNAL MODULE: ./src/ts/markdown/plantumlRender.ts\nvar plantumlRender = __webpack_require__(583);\n;// CONCATENATED MODULE: ./src/ts/util/processCode.ts\n\n\n\n\n\n\n\n\n\n\nvar processPasteCode = function (html, text, type) {\n    if (type === void 0) { type = \"sv\"; }\n    var tempElement = document.createElement(\"div\");\n    tempElement.innerHTML = html;\n    var isCode = false;\n    if (tempElement.childElementCount === 1 &&\n        tempElement.lastElementChild.style.fontFamily.indexOf(\"monospace\") > -1) {\n        // VS Code\n        isCode = true;\n    }\n    var pres = tempElement.querySelectorAll(\"pre\");\n    if (tempElement.childElementCount === 1 && pres.length === 1\n        && pres[0].className !== \"vditor-wysiwyg\"\n        && pres[0].className !== \"vditor-sv\") {\n        // IDE\n        isCode = true;\n    }\n    if (html.indexOf('\\n<p class=\"p1\">') === 0) {\n        // Xcode\n        isCode = true;\n    }\n    if (tempElement.childElementCount === 1 && tempElement.firstElementChild.tagName === \"TABLE\" &&\n        tempElement.querySelector(\".line-number\") && tempElement.querySelector(\".line-content\")) {\n        // 网页源码\n        isCode = true;\n    }\n    if (isCode) {\n        var code = text || html;\n        if (/\\n/.test(code) || pres.length === 1) {\n            if (type === \"wysiwyg\") {\n                return \"<div class=\\\"vditor-wysiwyg__block\\\" data-block=\\\"0\\\" data-type=\\\"code-block\\\"><pre><code>\" + code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\") + \"<wbr></code></pre></div>\";\n            }\n            return \"\\n```\\n\" + code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\") + \"\\n```\";\n        }\n        else {\n            if (type === \"wysiwyg\") {\n                return \"<code>\" + code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\") + \"</code><wbr>\";\n            }\n            return \"`\" + code + \"`\";\n        }\n    }\n    return false;\n};\nvar processCodeRender = function (previewPanel, vditor) {\n    if (!previewPanel) {\n        return;\n    }\n    if (previewPanel.parentElement.getAttribute(\"data-type\") === \"html-block\") {\n        previewPanel.setAttribute(\"data-render\", \"1\");\n        return;\n    }\n    var language = previewPanel.firstElementChild.className.replace(\"language-\", \"\");\n    if (!language) {\n        return;\n    }\n    if (language === \"abc\") {\n        (0,abcRender/* abcRender */.Q)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"mermaid\") {\n        (0,mermaidRender/* mermaidRender */.i)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"flowchart\") {\n        (0,flowchartRender/* flowchartRender */.P)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"echarts\") {\n        (0,chartRender/* chartRender */.p)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"mindmap\") {\n        (0,mindmapRender/* mindmapRender */.P)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"plantuml\") {\n        (0,plantumlRender/* plantumlRender */.B)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"graphviz\") {\n        (0,graphvizRender/* graphvizRender */.v)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"math\") {\n        (0,mathRender/* mathRender */.H)(previewPanel, { cdn: vditor.options.cdn, math: vditor.options.preview.math });\n    }\n    else {\n        (0,highlightRender/* highlightRender */.s)(Object.assign({}, vditor.options.preview.hljs), previewPanel, vditor.options.cdn);\n        (0,codeRender/* codeRender */.O)(previewPanel);\n    }\n    previewPanel.setAttribute(\"data-render\", \"1\");\n};\n\n// EXTERNAL MODULE: ./src/ts/util/selection.ts\nvar selection = __webpack_require__(187);\n;// CONCATENATED MODULE: ./src/ts/util/toc.ts\n\n\n\n\nvar renderToc = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return;\n    }\n    var editorElement = vditor[vditor.currentMode].element;\n    var tocHTML = vditor.outline.render(vditor);\n    if (tocHTML === \"\") {\n        tocHTML = \"[ToC]\";\n    }\n    editorElement.querySelectorAll('[data-type=\"toc-block\"]').forEach(function (item) {\n        item.innerHTML = tocHTML;\n        (0,mathRender/* mathRender */.H)(item, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    });\n};\nvar clickToc = function (event, vditor) {\n    var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n    if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n        var headingElement = vditor[vditor.currentMode].element.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n        if (headingElement) {\n            if (vditor.options.height === \"auto\") {\n                var windowScrollY = headingElement.offsetTop + vditor.element.offsetTop;\n                if (!vditor.options.toolbarConfig.pin) {\n                    windowScrollY += vditor.toolbar.element.offsetHeight;\n                }\n                window.scrollTo(window.scrollX, windowScrollY);\n            }\n            else {\n                if (vditor.element.offsetTop < window.scrollY) {\n                    window.scrollTo(window.scrollX, vditor.element.offsetTop);\n                }\n                vditor[vditor.currentMode].element.scrollTop = headingElement.offsetTop;\n            }\n        }\n        return;\n    }\n};\nvar keydownToc = function (blockElement, vditor, event, range) {\n    // toc 前无元素，插入空块\n    if (blockElement.previousElementSibling &&\n        blockElement.previousElementSibling.classList.contains(\"vditor-toc\")) {\n        if (event.key === \"Backspace\" &&\n            (0,selection/* getSelectPosition */.im)(blockElement, vditor[vditor.currentMode].element, range).start === 0) {\n            blockElement.previousElementSibling.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n        if (insertBeforeBlock(vditor, event, range, blockElement, blockElement.previousElementSibling)) {\n            return true;\n        }\n    }\n    // toc 后无元素，插入空块\n    if (blockElement.nextElementSibling &&\n        blockElement.nextElementSibling.classList.contains(\"vditor-toc\")) {\n        if (event.key === \"Delete\" &&\n            (0,selection/* getSelectPosition */.im)(blockElement, vditor[vditor.currentMode].element, range).start\n                >= blockElement.textContent.trimRight().length) {\n            blockElement.nextElementSibling.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n        if (insertAfterBlock(vditor, event, range, blockElement, blockElement.nextElementSibling)) {\n            return true;\n        }\n    }\n    // toc 删除\n    if (event.key === \"Backspace\" || event.key === \"Delete\") {\n        var tocElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-toc\");\n        if (tocElement) {\n            tocElement.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/input.ts\n\n\n\n\n\n\n\n\n\nvar input = function (vditor, range, ignoreSpace, event) {\n    if (ignoreSpace === void 0) { ignoreSpace = false; }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    // 前后可以输入空格\n    if (blockElement && !ignoreSpace && blockElement.getAttribute(\"data-type\") !== \"code-block\") {\n        if ((isHrMD(blockElement.innerHTML) && blockElement.previousElementSibling) ||\n            isHeadingMD(blockElement.innerHTML)) {\n            return;\n        }\n        // 前后空格处理\n        var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.ir.element, range).start;\n        // 开始可以输入空格\n        var startSpace = true;\n        for (var i = startOffset - 1; \n        // 软换行后有空格\n        i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n            if (blockElement.textContent.charAt(i) !== \" \" &&\n                // 多个 tab 前删除不形成代码块 https://github.com/Vanessa219/vditor/issues/162 1\n                blockElement.textContent.charAt(i) !== \"\\t\") {\n                startSpace = false;\n                break;\n            }\n        }\n        if (startOffset === 0) {\n            startSpace = false;\n        }\n        // 结尾可以输入空格\n        var endSpace = true;\n        for (var i = startOffset - 1; i < blockElement.textContent.length; i++) {\n            if (blockElement.textContent.charAt(i) !== \" \" && blockElement.textContent.charAt(i) !== \"\\n\") {\n                endSpace = false;\n                break;\n            }\n        }\n        if (startSpace) {\n            return;\n        }\n        if (endSpace) {\n            var markerElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__marker\");\n            if (markerElement) {\n                // inline marker space https://github.com/Vanessa219/vditor/issues/239\n            }\n            else {\n                var previousNode = range.startContainer.previousSibling;\n                if (previousNode && previousNode.nodeType !== 3 && previousNode.classList.contains(\"vditor-ir__node--expand\")) {\n                    // FireFox https://github.com/Vanessa219/vditor/issues/239\n                    previousNode.classList.remove(\"vditor-ir__node--expand\");\n                }\n                return;\n            }\n        }\n    }\n    vditor.ir.element.querySelectorAll(\".vditor-ir__node--expand\").forEach(function (item) {\n        item.classList.remove(\"vditor-ir__node--expand\");\n    });\n    if (!blockElement) {\n        // 使用顶级块元素，应使用 innerHTML\n        blockElement = vditor.ir.element;\n    }\n    // document.exeComment insertHTML 会插入 wbr\n    if (!blockElement.querySelector(\"wbr\")) {\n        var previewRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n        if (previewRenderElement) {\n            previewRenderElement.previousElementSibling.insertAdjacentHTML(\"beforeend\", \"<wbr>\");\n        }\n        else {\n            range.insertNode(document.createElement(\"wbr\"));\n        }\n    }\n    // 清除浏览器自带的样式\n    blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n        item.removeAttribute(\"style\");\n    });\n    if (blockElement.getAttribute(\"data-type\") === \"link-ref-defs-block\") {\n        // 修改链接引用\n        blockElement = vditor.ir.element;\n    }\n    var isIRElement = blockElement.isEqualNode(vditor.ir.element);\n    var footnoteElement = (0,hasClosest/* hasClosestByAttribute */.a1)(blockElement, \"data-type\", \"footnotes-block\");\n    var html = \"\";\n    if (!isIRElement) {\n        var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"BLOCKQUOTE\");\n        // 列表需要到最顶层\n        var topListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (topListElement) {\n            blockElement = topListElement;\n        }\n        // 应到引用层，否则 > --- 会解析为 front-matter；列表中有 blockquote 则解析 blockquote；blockquote 中有列表则解析列表\n        if (blockquoteElement && (!topListElement || (topListElement && !blockquoteElement.contains(topListElement)))) {\n            blockElement = blockquoteElement;\n        }\n        // 修改脚注\n        if (footnoteElement) {\n            blockElement = footnoteElement;\n        }\n        html = blockElement.outerHTML;\n        if (blockElement.tagName === \"UL\" || blockElement.tagName === \"OL\") {\n            // 如果为列表的话，需要把上下的列表都重绘\n            var listPrevElement = blockElement.previousElementSibling;\n            var listNextElement = blockElement.nextElementSibling;\n            if (listPrevElement && (listPrevElement.tagName === \"UL\" || listPrevElement.tagName === \"OL\")) {\n                html = listPrevElement.outerHTML + html;\n                listPrevElement.remove();\n            }\n            if (listNextElement && (listNextElement.tagName === \"UL\" || listNextElement.tagName === \"OL\")) {\n                html = html + listNextElement.outerHTML;\n                listNextElement.remove();\n            }\n            // firefox 列表回车不会产生新的 list item https://github.com/Vanessa219/vditor/issues/194\n            html = html.replace(\"<div><wbr><br></div>\", \"<li><p><wbr><br></p></li>\");\n        }\n        else if (blockElement.previousElementSibling &&\n            blockElement.previousElementSibling.textContent.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") !== \"\" &&\n            event && event.inputType === \"insertParagraph\") {\n            // 换行时需要处理上一段落\n            html = blockElement.previousElementSibling.outerHTML + html;\n            blockElement.previousElementSibling.remove();\n        }\n        // 添加链接引用\n        vditor.ir.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item) {\n            if (item && !blockElement.isEqualNode(item)) {\n                html += item.outerHTML;\n                item.remove();\n            }\n        });\n        // 添加脚注\n        vditor.ir.element.querySelectorAll(\"[data-type='footnotes-block']\").forEach(function (item) {\n            if (item && !blockElement.isEqualNode(item)) {\n                html += item.outerHTML;\n                item.remove();\n            }\n        });\n    }\n    else {\n        html = blockElement.innerHTML;\n    }\n    log(\"SpinVditorIRDOM\", html, \"argument\", vditor.options.debugger);\n    html = vditor.lute.SpinVditorIRDOM(html);\n    log(\"SpinVditorIRDOM\", html, \"result\", vditor.options.debugger);\n    if (isIRElement) {\n        blockElement.innerHTML = html;\n    }\n    else {\n        blockElement.outerHTML = html;\n        // 更新正文中的 tip\n        if (footnoteElement) {\n            var footnoteItemElement = (0,hasClosest/* hasClosestByAttribute */.a1)(vditor.ir.element.querySelector(\"wbr\"), \"data-type\", \"footnotes-def\");\n            if (footnoteItemElement) {\n                var footnoteItemText = footnoteItemElement.textContent;\n                var marker = footnoteItemText.substring(1, footnoteItemText.indexOf(\"]:\"));\n                var footnoteRefElement = vditor.ir.element.querySelector(\"sup[data-type=\\\"footnotes-ref\\\"][data-footnotes-label=\\\"\" + marker + \"\\\"]\");\n                if (footnoteRefElement) {\n                    footnoteRefElement.setAttribute(\"aria-label\", footnoteItemText.substr(marker.length + 3).trim().substr(0, 24));\n                }\n            }\n        }\n    }\n    //  linkref 合并及添加\n    var firstLinkRefDefElement;\n    var allLinkRefDefsElement = vditor.ir.element.querySelectorAll(\"[data-type='link-ref-defs-block']\");\n    allLinkRefDefsElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstLinkRefDefElement = item;\n        }\n        else {\n            firstLinkRefDefElement.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n            item.remove();\n        }\n    });\n    if (allLinkRefDefsElement.length > 0) {\n        vditor.ir.element.insertAdjacentElement(\"beforeend\", allLinkRefDefsElement[0]);\n    }\n    // 脚注合并后添加的末尾\n    var firstFootnoteElement;\n    var allFootnoteElement = vditor.ir.element.querySelectorAll(\"[data-type='footnotes-block']\");\n    allFootnoteElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstFootnoteElement = item;\n        }\n        else {\n            firstFootnoteElement.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n            item.remove();\n        }\n    });\n    if (allFootnoteElement.length > 0) {\n        vditor.ir.element.insertAdjacentElement(\"beforeend\", allFootnoteElement[0]);\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    vditor.ir.element.querySelectorAll(\".vditor-ir__preview[data-render='2']\").forEach(function (item) {\n        processCodeRender(item, vditor);\n    });\n    renderToc(vditor);\n    process_processAfterRender(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/hotKey.ts\n\n// 是否匹配 ⇧⌘[] / ⌘[] / ⌥[] / ⌥⌘[] / ⇧Tab / []\nvar matchHotKey = function (hotKey, event) {\n    if (hotKey === \"\") {\n        return false;\n    }\n    // []\n    if (hotKey.indexOf(\"⇧\") === -1 && hotKey.indexOf(\"⌘\") === -1 && hotKey.indexOf(\"⌥\") === -1) {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && event.code === hotKey) {\n            return true;\n        }\n        return false;\n    }\n    // 是否匹配 ⇧Tab\n    if (hotKey === \"⇧Tab\") {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.shiftKey && event.code === \"Tab\") {\n            return true;\n        }\n        return false;\n    }\n    var hotKeys = hotKey.split(\"\");\n    if (hotKey.startsWith(\"⌥\")) {\n        // 是否匹配 ⌥[] / ⌥⌘[]\n        var keyCode = hotKeys.length === 3 ? hotKeys[2] : hotKeys[1];\n        if ((hotKeys.length === 3 ? (0,compatibility/* isCtrl */.yl)(event) : !(0,compatibility/* isCtrl */.yl)(event)) && event.altKey && !event.shiftKey &&\n            event.code === (/^[0-9]$/.test(keyCode) ? \"Digit\" : \"Key\") + keyCode) {\n            return true;\n        }\n        return false;\n    }\n    // 是否匹配 ⇧⌘[] / ⌘[]\n    if (hotKey === \"⌘Enter\") {\n        hotKeys = [\"⌘\", \"Enter\"];\n    }\n    var hasShift = hotKeys.length > 2 && (hotKeys[0] === \"⇧\");\n    var key = (hasShift ? hotKeys[2] : hotKeys[1]);\n    if (hasShift && ((0,compatibility/* isFirefox */.vU)() || !/Mac/.test(navigator.platform))) {\n        if (key === \"-\") {\n            key = \"_\";\n        }\n        else if (key === \"=\") {\n            key = \"+\";\n        }\n    }\n    if ((0,compatibility/* isCtrl */.yl)(event) && event.key.toLowerCase() === key.toLowerCase() && !event.altKey\n        && ((!hasShift && !event.shiftKey) || (hasShift && event.shiftKey))) {\n        return true;\n    }\n    return false;\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/expandMarker.ts\n\n\nvar nextIsNode = function (range) {\n    var startContainer = range.startContainer;\n    if (startContainer.nodeType === 3 && startContainer.nodeValue.length !== range.startOffset) {\n        return false;\n    }\n    var nextNode = startContainer.nextSibling;\n    while (nextNode && nextNode.textContent === \"\") {\n        nextNode = nextNode.nextSibling;\n    }\n    if (!nextNode) {\n        // *em*|**string**\n        var markerElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-ir__marker\");\n        if (markerElement && !markerElement.nextSibling) {\n            var parentNextNode = startContainer.parentElement.parentElement.nextSibling;\n            if (parentNextNode && parentNextNode.nodeType !== 3 &&\n                parentNextNode.classList.contains(\"vditor-ir__node\")) {\n                return parentNextNode;\n            }\n        }\n        return false;\n    }\n    else if (nextNode && nextNode.nodeType !== 3 && nextNode.classList.contains(\"vditor-ir__node\") &&\n        !nextNode.getAttribute(\"data-block\")) {\n        // test|*em*\n        return nextNode;\n    }\n    return false;\n};\nvar previousIsNode = function (range) {\n    var startContainer = range.startContainer;\n    var previousNode = startContainer.previousSibling;\n    if (startContainer.nodeType === 3 && range.startOffset === 0 && previousNode && previousNode.nodeType !== 3 &&\n        // *em*|text\n        previousNode.classList.contains(\"vditor-ir__node\") && !previousNode.getAttribute(\"data-block\")) {\n        return previousNode;\n    }\n    return false;\n};\nvar expandMarker = function (range, vditor) {\n    vditor.ir.element.querySelectorAll(\".vditor-ir__node--expand\").forEach(function (item) {\n        item.classList.remove(\"vditor-ir__node--expand\");\n    });\n    var nodeElement = (0,hasClosest/* hasTopClosestByClassName */.JQ)(range.startContainer, \"vditor-ir__node\");\n    var nodeElementEnd = !range.collapsed && (0,hasClosest/* hasTopClosestByClassName */.JQ)(range.endContainer, \"vditor-ir__node\");\n    // 选中文本为同一个 nodeElement 内时，需要展开\n    if (!range.collapsed && (!nodeElement || nodeElement !== nodeElementEnd)) {\n        return;\n    }\n    if (nodeElement) {\n        nodeElement.classList.add(\"vditor-ir__node--expand\");\n        nodeElement.classList.remove(\"vditor-ir__node--hidden\");\n        // https://github.com/Vanessa219/vditor/issues/615 safari中光标位置跳动\n        (0,selection/* setSelectionFocus */.Hc)(range);\n    }\n    var nextNode = nextIsNode(range);\n    if (nextNode) {\n        nextNode.classList.add(\"vditor-ir__node--expand\");\n        nextNode.classList.remove(\"vditor-ir__node--hidden\");\n        return;\n    }\n    var previousNode = previousIsNode(range);\n    if (previousNode) {\n        previousNode.classList.add(\"vditor-ir__node--expand\");\n        previousNode.classList.remove(\"vditor-ir__node--hidden\");\n        return;\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/processKeydown.ts\n\n\n\n\n\n\n\n\n\n\n\nvar processKeydown = function (vditor, event) {\n    vditor.ir.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    // 添加第一次记录 undo 的光标\n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (!fixGSKeyBackspace(event, vditor, startContainer)) {\n        return false;\n    }\n    fixCJKPosition(range, vditor, event);\n    fixHR(range);\n    // 仅处理以下快捷键操作\n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\" && event.key !== \"Delete\") {\n        return false;\n    }\n    // 斜体、粗体、内联代码块中换行\n    var newlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-newline\", \"1\");\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && event.key === \"Enter\" && newlineElement\n        && range.startOffset < newlineElement.textContent.length) {\n        var beforeMarkerElement = newlineElement.previousElementSibling;\n        if (beforeMarkerElement) {\n            range.insertNode(document.createTextNode(beforeMarkerElement.textContent));\n            range.collapse(false);\n        }\n        var afterMarkerElement = newlineElement.nextSibling;\n        if (afterMarkerElement) {\n            range.insertNode(document.createTextNode(afterMarkerElement.textContent));\n            range.collapse(true);\n        }\n    }\n    var pElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"P\");\n    // md 处理\n    if (fixMarkdown(event, vditor, pElement, range)) {\n        return true;\n    }\n    // li\n    if (fixList(range, vditor, pElement, event)) {\n        return true;\n    }\n    // blockquote\n    if (fixBlockquote(vditor, range, event, pElement)) {\n        return true;\n    }\n    // 代码块\n    var preRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-ir__marker--pre\");\n    if (preRenderElement && preRenderElement.tagName === \"PRE\") {\n        var codeRenderElement = preRenderElement.firstChild;\n        if (fixCodeBlock(vditor, event, preRenderElement, range)) {\n            return true;\n        }\n        // 数学公式上无元素，按上或左将添加新块\n        if ((codeRenderElement.getAttribute(\"data-type\") === \"math-block\"\n            || codeRenderElement.getAttribute(\"data-type\") === \"html-block\") &&\n            insertBeforeBlock(vditor, event, range, codeRenderElement, preRenderElement.parentElement)) {\n            return true;\n        }\n        // 代码块下无元素或者为代码块/table 元素，添加空块\n        if (insertAfterBlock(vditor, event, range, codeRenderElement, preRenderElement.parentElement)) {\n            return true;\n        }\n    }\n    // 代码块语言\n    var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-info\");\n    if (preBeforeElement) {\n        if (event.key === \"Enter\" || event.key === \"Tab\") {\n            range.selectNodeContents(preBeforeElement.nextElementSibling.firstChild);\n            range.collapse(true);\n            event.preventDefault();\n            hidePanel(vditor, [\"hint\"]);\n            return true;\n        }\n        if (event.key === \"Backspace\") {\n            var start = (0,selection/* getSelectPosition */.im)(preBeforeElement, vditor.ir.element).start;\n            if (start === 1) { // 删除零宽空格\n                range.setStart(startContainer, 0);\n            }\n            if (start === 2) { // 删除时清空自动补全语言\n                vditor.hint.recentLanguage = \"\";\n            }\n        }\n        if (insertBeforeBlock(vditor, event, range, preBeforeElement, preBeforeElement.parentElement)) {\n            // 上无元素，按上或左将添加新块\n            hidePanel(vditor, [\"hint\"]);\n            return true;\n        }\n    }\n    // table\n    var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n    if (event.key.indexOf(\"Arrow\") > -1 && cellElement) {\n        var tableElement = isFirstCell(cellElement);\n        if (tableElement && insertBeforeBlock(vditor, event, range, cellElement, tableElement)) {\n            return true;\n        }\n        var table2Element = isLastCell(cellElement);\n        if (table2Element && insertAfterBlock(vditor, event, range, cellElement, table2Element)) {\n            return true;\n        }\n    }\n    if (fixTable(vditor, event, range)) {\n        return true;\n    }\n    // task list\n    if (fixTask(vditor, range, event)) {\n        return true;\n    }\n    // tab\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(startContainer);\n    if (headingElement) {\n        // enter++: 标题变大\n        if (matchHotKey(\"⌘=\", event)) {\n            var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n            if (headingMarkerElement && headingMarkerElement.textContent.trim().length > 1) {\n                process_processHeading(vditor, headingMarkerElement.textContent.substr(1));\n            }\n            event.preventDefault();\n            return true;\n        }\n        // enter++: 标题变小\n        if (matchHotKey(\"⌘-\", event)) {\n            var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n            if (headingMarkerElement && headingMarkerElement.textContent.trim().length < 6) {\n                process_processHeading(vditor, headingMarkerElement.textContent.trim() + \"# \");\n            }\n            event.preventDefault();\n            return true;\n        }\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\") {\n        if (fixDelete(vditor, range, event, pElement)) {\n            return true;\n        }\n        if (blockElement && blockElement.previousElementSibling\n            && blockElement.tagName !== \"UL\" && blockElement.tagName !== \"OL\"\n            && (blockElement.previousElementSibling.getAttribute(\"data-type\") === \"code-block\" ||\n                blockElement.previousElementSibling.getAttribute(\"data-type\") === \"math-block\")) {\n            var rangeStart = (0,selection/* getSelectPosition */.im)(blockElement, vditor.ir.element, range).start;\n            if (rangeStart === 0 || (rangeStart === 1 && blockElement.innerText.startsWith(constants/* Constants.ZWSP */.g.ZWSP))) {\n                // 当前块删除后光标落于代码渲染块上，当前块会被删除，因此需要阻止事件，不能和 keyup 中的代码块处理合并\n                range.selectNodeContents(blockElement.previousElementSibling.querySelector(\".vditor-ir__marker--pre code\"));\n                range.collapse(false);\n                expandMarker(range, vditor);\n                if (blockElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                    // 当前块为空且不是最后一个时，需要删除\n                    blockElement.remove();\n                    process_processAfterRender(vditor);\n                }\n                event.preventDefault();\n                return true;\n            }\n        }\n        // 光标位于标题前，marker 后\n        if (headingElement) {\n            var headingLength = headingElement.firstElementChild.textContent.length;\n            if ((0,selection/* getSelectPosition */.im)(headingElement, vditor.ir.element).start === headingLength) {\n                range.setStart(headingElement.firstElementChild.firstChild, headingLength - 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n        }\n    }\n    if ((event.key === \"ArrowUp\" || event.key === \"ArrowDown\") && blockElement) {\n        // https://github.com/Vanessa219/vditor/issues/358\n        blockElement.querySelectorAll(\".vditor-ir__node\").forEach(function (item) {\n            if (!item.contains(startContainer)) {\n                item.classList.add(\"vditor-ir__node--hidden\");\n            }\n        });\n        if (fixFirefoxArrowUpTable(event, blockElement, range)) {\n            return true;\n        }\n    }\n    fixCursorDownInlineMath(range, event.key);\n    if (blockElement && keydownToc(blockElement, vditor, event, range)) {\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\n\n// EXTERNAL MODULE: ./src/ts/preview/image.ts\nvar preview_image = __webpack_require__(264);\n;// CONCATENATED MODULE: ./src/ts/sv/inputEvent.ts\n\n\n\n\nvar inputEvent = function (vditor, event) {\n    var _a;\n    var range = getSelection().getRangeAt(0).cloneRange();\n    var startContainer = range.startContainer;\n    if (range.startContainer.nodeType !== 3 && range.startContainer.tagName === \"DIV\") {\n        startContainer = range.startContainer.childNodes[range.startOffset - 1];\n    }\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-block\", \"0\");\n    // 不调用 lute 解析\n    if (blockElement && event && (event.inputType === \"deleteContentBackward\" || event.data === \" \")) {\n        // 开始可以输入空格\n        var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element, range).start;\n        var startSpace = true;\n        for (var i = startOffset - 1; \n        // 软换行后有空格\n        i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n            if (blockElement.textContent.charAt(i) !== \" \" &&\n                // 多个 tab 前删除不形成代码块 https://github.com/Vanessa219/vditor/issues/162 1\n                blockElement.textContent.charAt(i) !== \"\\t\") {\n                startSpace = false;\n                break;\n            }\n        }\n        if (startOffset === 0) {\n            startSpace = false;\n        }\n        if (startSpace) {\n            processAfterRender(vditor);\n            return;\n        }\n        if (event.inputType === \"deleteContentBackward\") {\n            // https://github.com/Vanessa219/vditor/issues/584 代码块 marker 删除\n            var codeBlockMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-open-marker\") ||\n                (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-close-marker\");\n            if (codeBlockMarkerElement) {\n                if (codeBlockMarkerElement.getAttribute(\"data-type\") === \"code-block-close-marker\") {\n                    var openMarkerElement = getSideByType(startContainer, \"code-block-open-marker\");\n                    if (openMarkerElement) {\n                        openMarkerElement.textContent = codeBlockMarkerElement.textContent;\n                        processAfterRender(vditor);\n                        return;\n                    }\n                }\n                if (codeBlockMarkerElement.getAttribute(\"data-type\") === \"code-block-open-marker\") {\n                    var openMarkerElement = getSideByType(startContainer, \"code-block-close-marker\", false);\n                    if (openMarkerElement) {\n                        openMarkerElement.textContent = codeBlockMarkerElement.textContent;\n                        processAfterRender(vditor);\n                        return;\n                    }\n                }\n            }\n            // https://github.com/Vanessa219/vditor/issues/877 数学公式输入删除生成节点\n            var mathBlockMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"math-block-open-marker\");\n            if (mathBlockMarkerElement) {\n                var mathBlockCloseElement = mathBlockMarkerElement.nextElementSibling.nextElementSibling;\n                if (mathBlockCloseElement && mathBlockCloseElement.getAttribute(\"data-type\") === \"math-block-close-marker\") {\n                    mathBlockCloseElement.remove();\n                    processAfterRender(vditor);\n                }\n                return;\n            }\n            blockElement.querySelectorAll('[data-type=\"code-block-open-marker\"]').forEach(function (item) {\n                if (item.textContent.length === 1) {\n                    item.remove();\n                }\n            });\n            blockElement.querySelectorAll('[data-type=\"code-block-close-marker\"]').forEach(function (item) {\n                if (item.textContent.length === 1) {\n                    item.remove();\n                }\n            });\n            // 标题删除\n            var headingElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"heading-marker\");\n            if (headingElement && headingElement.textContent.indexOf(\"#\") === -1) {\n                processAfterRender(vditor);\n                return;\n            }\n        }\n        // 删除或空格不解析，否则会 format 回去\n        if ((event.data === \" \" || event.inputType === \"deleteContentBackward\") &&\n            ((0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"padding\") // 场景：b 前进行删除 [> 1. a\\n>   b]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"li-marker\") // 场景：删除最后一个字符 [* 1\\n* ]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"task-marker\") // 场景：删除最后一个字符 [* [ ] ]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"blockquote-marker\") // 场景：删除最后一个字符 [> ]\n            )) {\n            processAfterRender(vditor);\n            return;\n        }\n    }\n    if (blockElement && blockElement.textContent.trimRight() === \"$$\") {\n        // 内联数学公式\n        processAfterRender(vditor);\n        return;\n    }\n    if (!blockElement) {\n        blockElement = vditor.sv.element;\n    }\n    if (((_a = blockElement.firstElementChild) === null || _a === void 0 ? void 0 : _a.getAttribute(\"data-type\")) === \"link-ref-defs-block\") {\n        // 修改链接引用\n        blockElement = vditor.sv.element;\n    }\n    if ((0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"footnotes-link\")) {\n        // 修改脚注角标\n        blockElement = vditor.sv.element;\n    }\n    // 添加光标位置\n    if (blockElement.textContent.indexOf(Lute.Caret) === -1) {\n        // 点击工具栏会插入 Caret\n        range.insertNode(document.createTextNode(Lute.Caret));\n    }\n    // 清除浏览器自带的样式\n    blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n        item.removeAttribute(\"style\");\n    });\n    blockElement.querySelectorAll(\"font\").forEach(function (item) {\n        item.outerHTML = item.innerHTML;\n    });\n    var html = blockElement.textContent;\n    var isSVElement = blockElement.isEqualNode(vditor.sv.element);\n    if (isSVElement) {\n        html = blockElement.textContent;\n    }\n    else {\n        // 添加前一个块元素\n        if (blockElement.previousElementSibling) {\n            html = blockElement.previousElementSibling.textContent + html;\n            blockElement.previousElementSibling.remove();\n        }\n        if (blockElement.previousElementSibling && html.indexOf(\"---\\n\") === 0) {\n            // 确认 yaml-front 是否为首行\n            html = blockElement.previousElementSibling.textContent + html;\n            blockElement.previousElementSibling.remove();\n        }\n        // 添加链接引用\n        vditor.sv.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item, index) {\n            if (index === 0 && item && !blockElement.isEqualNode(item.parentElement)) {\n                html += \"\\n\" + item.parentElement.textContent;\n                item.parentElement.remove();\n            }\n        });\n        // 添加脚注\n        vditor.sv.element.querySelectorAll(\"[data-type='footnotes-link']\").forEach(function (item, index) {\n            if (index === 0 && item && !blockElement.isEqualNode(item.parentElement)) {\n                html += \"\\n\" + item.parentElement.textContent;\n                item.parentElement.remove();\n            }\n        });\n    }\n    html = processSpinVditorSVDOM(html, vditor);\n    if (isSVElement) {\n        blockElement.innerHTML = html;\n    }\n    else {\n        blockElement.outerHTML = html;\n    }\n    var firstLinkRefDefElement;\n    var allLinkRefDefsElement = vditor.sv.element.querySelectorAll(\"[data-type='link-ref-defs-block']\");\n    allLinkRefDefsElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstLinkRefDefElement = item.parentElement;\n        }\n        else {\n            firstLinkRefDefElement.lastElementChild.remove();\n            firstLinkRefDefElement.insertAdjacentHTML(\"beforeend\", \"\" + item.parentElement.innerHTML);\n            item.parentElement.remove();\n        }\n    });\n    if (allLinkRefDefsElement.length > 0) {\n        vditor.sv.element.insertAdjacentElement(\"beforeend\", firstLinkRefDefElement);\n    }\n    // 脚注合并后添加的末尾\n    var firstFootnoteElement;\n    var allFootnoteElement = vditor.sv.element.querySelectorAll(\"[data-type='footnotes-link']\");\n    allFootnoteElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstFootnoteElement = item.parentElement;\n        }\n        else {\n            firstFootnoteElement.lastElementChild.remove();\n            firstFootnoteElement.insertAdjacentHTML(\"beforeend\", \"\" + item.parentElement.innerHTML);\n            item.parentElement.remove();\n        }\n    });\n    if (allFootnoteElement.length > 0) {\n        vditor.sv.element.insertAdjacentElement(\"beforeend\", firstFootnoteElement);\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    scrollCenter(vditor);\n    processAfterRender(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/sv/processKeydown.ts\n\n\n\n\n\n\n\nvar processKeydown_processKeydown = function (vditor, event) {\n    var _a, _b, _c, _d, _e;\n    vditor.sv.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    // 仅处理以下快捷键操作\n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\") {\n        return false;\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (range.startContainer.nodeType !== 3 && range.startContainer.tagName === \"DIV\") {\n        startContainer = range.startContainer.childNodes[range.startOffset - 1];\n    }\n    var textElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"text\");\n    // blockquote\n    var blockquoteMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"blockquote-marker\");\n    if (!blockquoteMarkerElement && range.startOffset === 0 && textElement && textElement.previousElementSibling &&\n        textElement.previousElementSibling.getAttribute(\"data-type\") === \"blockquote-marker\") {\n        blockquoteMarkerElement = textElement.previousElementSibling;\n    }\n    // 回车逐个删除 blockquote marker 标记\n    if (blockquoteMarkerElement) {\n        if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey &&\n            blockquoteMarkerElement.nextElementSibling.textContent.trim() === \"\" &&\n            (0,selection/* getSelectPosition */.im)(blockquoteMarkerElement, vditor.sv.element, range).start ===\n                blockquoteMarkerElement.textContent.length) {\n            if (((_a = blockquoteMarkerElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.getAttribute(\"data-type\")) === \"padding\") {\n                // 列表中存在多行 BQ 时，标记回车需跳出列表\n                blockquoteMarkerElement.previousElementSibling.setAttribute(\"data-action\", \"enter-remove\");\n            }\n            blockquoteMarkerElement.remove();\n            processAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // list item\n    var listMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"li-marker\");\n    var taskMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"task-marker\");\n    var listLastMarkerElement = listMarkerElement;\n    if (!listLastMarkerElement) {\n        if (taskMarkerElement && taskMarkerElement.nextElementSibling.getAttribute(\"data-type\") !== \"task-marker\") {\n            listLastMarkerElement = taskMarkerElement;\n        }\n    }\n    if (!listLastMarkerElement && range.startOffset === 0 && textElement && textElement.previousElementSibling &&\n        (textElement.previousElementSibling.getAttribute(\"data-type\") === \"li-marker\" ||\n            textElement.previousElementSibling.getAttribute(\"data-type\") === \"task-marker\")) {\n        listLastMarkerElement = textElement.previousElementSibling;\n    }\n    if (listLastMarkerElement) {\n        var startIndex = (0,selection/* getSelectPosition */.im)(listLastMarkerElement, vditor.sv.element, range).start;\n        var isTask = listLastMarkerElement.getAttribute(\"data-type\") === \"task-marker\";\n        var listFirstMarkerElement = listLastMarkerElement;\n        if (isTask) {\n            listFirstMarkerElement = listLastMarkerElement.previousElementSibling.previousElementSibling\n                .previousElementSibling;\n        }\n        if (startIndex === listLastMarkerElement.textContent.length) {\n            // 回车清空列表标记符\n            if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey &&\n                listLastMarkerElement.nextElementSibling.textContent.trim() === \"\") {\n                if (((_b = listFirstMarkerElement.previousElementSibling) === null || _b === void 0 ? void 0 : _b.getAttribute(\"data-type\")) === \"padding\") {\n                    listFirstMarkerElement.previousElementSibling.remove();\n                    inputEvent(vditor);\n                }\n                else {\n                    if (isTask) {\n                        listFirstMarkerElement.remove();\n                        listLastMarkerElement.previousElementSibling.previousElementSibling.remove();\n                        listLastMarkerElement.previousElementSibling.remove();\n                    }\n                    listLastMarkerElement.nextElementSibling.remove();\n                    listLastMarkerElement.remove();\n                    processAfterRender(vditor);\n                }\n                event.preventDefault();\n                return true;\n            }\n            // 第一个 marker 后 tab 进行缩进\n            if (event.key === \"Tab\") {\n                listFirstMarkerElement.insertAdjacentHTML(\"beforebegin\", \"<span data-type=\\\"padding\\\">\" + listFirstMarkerElement.textContent.replace(/\\S/g, \" \") + \"</span>\");\n                if (/^\\d/.test(listFirstMarkerElement.textContent)) {\n                    listFirstMarkerElement.textContent = listFirstMarkerElement.textContent.replace(/^\\d{1,}/, \"1\");\n                    range.selectNodeContents(listLastMarkerElement.firstChild);\n                    range.collapse(false);\n                }\n                inputEvent(vditor);\n                event.preventDefault();\n                return true;\n            }\n        }\n    }\n    // tab\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-block\", \"0\");\n    var spanElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(startContainer, \"SPAN\");\n    // 回车\n    if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && blockElement) {\n        var isFirst = false;\n        var newLineMatch = blockElement.textContent.match(/^\\n+/);\n        if ((0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element).start <= (newLineMatch ? newLineMatch[0].length : 0)) {\n            // 允许段落开始换行\n            isFirst = true;\n        }\n        var newLineText = \"\\n\";\n        if (spanElement) {\n            if (((_c = spanElement.previousElementSibling) === null || _c === void 0 ? void 0 : _c.getAttribute(\"data-action\")) === \"enter-remove\") {\n                // https://github.com/Vanessa219/vditor/issues/596\n                spanElement.previousElementSibling.remove();\n                processAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                newLineText += processPreviousMarkers(spanElement);\n            }\n        }\n        range.insertNode(document.createTextNode(newLineText));\n        range.collapse(false);\n        if (blockElement && blockElement.textContent.trim() !== \"\" && !isFirst) {\n            inputEvent(vditor);\n        }\n        else {\n            processAfterRender(vditor);\n        }\n        event.preventDefault();\n        return true;\n    }\n    // 删除后光标前有 newline 的处理\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey) {\n        if (spanElement && ((_d = spanElement.previousElementSibling) === null || _d === void 0 ? void 0 : _d.getAttribute(\"data-type\")) === \"newline\" &&\n            (0,selection/* getSelectPosition */.im)(spanElement, vditor.sv.element, range).start === 1 &&\n            // 飘号的处理需在 inputEvent 中，否则上下飘号对不齐\n            spanElement.getAttribute(\"data-type\").indexOf(\"code-block-\") === -1) {\n            // 光标在每一行的第一个字符后\n            range.setStart(spanElement, 0);\n            range.extractContents();\n            if (spanElement.textContent.trim() !== \"\") {\n                inputEvent(vditor);\n            }\n            else {\n                processAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // 每一段第一个字符前\n        if (blockElement && (0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element, range).start === 0 &&\n            blockElement.previousElementSibling) {\n            range.extractContents();\n            var previousLastElement = blockElement.previousElementSibling.lastElementChild;\n            if (previousLastElement.getAttribute(\"data-type\") === \"newline\") {\n                previousLastElement.remove();\n                previousLastElement = blockElement.previousElementSibling.lastElementChild;\n            }\n            // 场景：末尾无法删除 [```\\ntext\\n```\\n\\n]\n            if (previousLastElement.getAttribute(\"data-type\") !== \"newline\") {\n                previousLastElement.insertAdjacentHTML(\"afterend\", blockElement.innerHTML);\n                blockElement.remove();\n            }\n            if (blockElement.textContent.trim() !== \"\" && !((_e = blockElement.previousElementSibling) === null || _e === void 0 ? void 0 : _e.querySelector('[data-type=\"code-block-open-marker\"]'))) {\n                inputEvent(vditor);\n            }\n            else {\n                if (previousLastElement.getAttribute(\"data-type\") !== \"newline\") {\n                    // https://github.com/Vanessa219/vditor/issues/597\n                    range.selectNodeContents(previousLastElement.lastChild);\n                    range.collapse(false);\n                }\n                processAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\n\n// EXTERNAL MODULE: ./src/ts/ui/setContentTheme.ts\nvar setContentTheme = __webpack_require__(958);\n;// CONCATENATED MODULE: ./src/ts/ui/setTheme.ts\nvar setTheme = function (vditor) {\n    if (vditor.options.theme === \"dark\") {\n        vditor.element.classList.add(\"vditor--dark\");\n    }\n    else {\n        vditor.element.classList.remove(\"vditor--dark\");\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ui/initUI.ts\n\n\n\n\n\nvar initUI = function (vditor) {\n    vditor.element.innerHTML = \"\";\n    vditor.element.classList.add(\"vditor\");\n    setTheme(vditor);\n    (0,setContentTheme/* setContentTheme */.Z)(vditor.options.preview.theme.current, vditor.options.preview.theme.path);\n    if (typeof vditor.options.height === \"number\") {\n        vditor.element.style.height = vditor.options.height + \"px\";\n    }\n    if (typeof vditor.options.minHeight === \"number\") {\n        vditor.element.style.minHeight = vditor.options.minHeight + \"px\";\n    }\n    if (typeof vditor.options.width === \"number\") {\n        vditor.element.style.width = vditor.options.width + \"px\";\n    }\n    else {\n        vditor.element.style.width = vditor.options.width;\n    }\n    vditor.element.appendChild(vditor.toolbar.element);\n    var contentElement = document.createElement(\"div\");\n    contentElement.className = \"vditor-content\";\n    if (vditor.options.outline.position === \"left\") {\n        contentElement.appendChild(vditor.outline.element);\n    }\n    contentElement.appendChild(vditor.wysiwyg.element.parentElement);\n    contentElement.appendChild(vditor.sv.element);\n    contentElement.appendChild(vditor.ir.element.parentElement);\n    contentElement.appendChild(vditor.preview.element);\n    if (vditor.toolbar.elements.devtools) {\n        contentElement.appendChild(vditor.devtools.element);\n    }\n    if (vditor.options.outline.position === \"right\") {\n        vditor.outline.element.classList.add(\"vditor-outline--right\");\n        contentElement.appendChild(vditor.outline.element);\n    }\n    if (vditor.upload) {\n        contentElement.appendChild(vditor.upload.element);\n    }\n    if (vditor.options.resize.enable) {\n        contentElement.appendChild(vditor.resize.element);\n    }\n    contentElement.appendChild(vditor.hint.element);\n    contentElement.appendChild(vditor.tip.element);\n    vditor.element.appendChild(contentElement);\n    if (vditor.toolbar.elements.export) {\n        // for export pdf\n        vditor.element.insertAdjacentHTML(\"beforeend\", '<iframe style=\"width: 100%;height: 0;border: 0\"></iframe>');\n    }\n    setEditMode(vditor, vditor.options.mode, afterRender(vditor, contentElement));\n    document.execCommand(\"DefaultParagraphSeparator\", false, \"p\");\n    if (navigator.userAgent.indexOf(\"iPhone\") > -1 && typeof window.visualViewport !== \"undefined\") {\n        // https://github.com/Vanessa219/vditor/issues/379\n        var pendingUpdate_1 = false;\n        var viewportHandler = function (event) {\n            if (pendingUpdate_1) {\n                return;\n            }\n            pendingUpdate_1 = true;\n            requestAnimationFrame(function () {\n                pendingUpdate_1 = false;\n                var layoutViewport = vditor.toolbar.element;\n                layoutViewport.style.transform = \"none\";\n                if (layoutViewport.getBoundingClientRect().top < 0) {\n                    layoutViewport.style.transform = \"translate(0, \" + -layoutViewport.getBoundingClientRect().top + \"px)\";\n                }\n            });\n        };\n        window.visualViewport.addEventListener(\"scroll\", viewportHandler);\n        window.visualViewport.addEventListener(\"resize\", viewportHandler);\n    }\n};\nvar setPadding = function (vditor) {\n    var minPadding = window.innerWidth <= constants/* Constants.MOBILE_WIDTH */.g.MOBILE_WIDTH ? 10 : 35;\n    if (vditor.wysiwyg.element.parentElement.style.display !== \"none\") {\n        var padding = (vditor.wysiwyg.element.parentElement.clientWidth\n            - vditor.options.preview.maxWidth) / 2;\n        vditor.wysiwyg.element.style.padding = \"10px \" + Math.max(minPadding, padding) + \"px\";\n    }\n    if (vditor.ir.element.parentElement.style.display !== \"none\") {\n        var padding = (vditor.ir.element.parentElement.clientWidth\n            - vditor.options.preview.maxWidth) / 2;\n        vditor.ir.element.style.padding = \"10px \" + Math.max(minPadding, padding) + \"px\";\n    }\n    if (vditor.preview.element.style.display !== \"block\" || vditor.currentMode === \"sv\") {\n        vditor.toolbar.element.style.paddingLeft = Math.max(5, parseInt(vditor[vditor.currentMode].element.style.paddingLeft || \"0\", 10) +\n            (vditor.options.outline.position === \"left\" ? vditor.outline.element.offsetWidth : 0)) + \"px\";\n    }\n};\nvar setTypewriterPosition = function (vditor) {\n    if (!vditor.options.typewriterMode) {\n        return;\n    }\n    var height = window.innerHeight;\n    if (typeof vditor.options.height === \"number\") {\n        height = vditor.options.height;\n        if (typeof vditor.options.minHeight === \"number\") {\n            height = Math.max(height, vditor.options.minHeight);\n        }\n        height = Math.min(window.innerHeight, height);\n    }\n    if (vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        height = window.innerHeight;\n    }\n    // 由于 Firefox padding-bottom bug，只能使用 :after\n    vditor[vditor.currentMode].element.style.setProperty(\"--editor-bottom\", ((height - vditor.toolbar.element.offsetHeight) / 2) + \"px\");\n};\nvar afterRender = function (vditor, contentElement) {\n    setTypewriterPosition(vditor);\n    window.addEventListener(\"resize\", function () {\n        setPadding(vditor);\n        setTypewriterPosition(vditor);\n    });\n    // set default value\n    var initValue = (0,compatibility/* accessLocalStorage */.pK)() && localStorage.getItem(vditor.options.cache.id);\n    if (!vditor.options.cache.enable || !initValue) {\n        if (vditor.options.value) {\n            initValue = vditor.options.value;\n        }\n        else if (vditor.originalInnerHTML) {\n            initValue = vditor.lute.HTML2Md(vditor.originalInnerHTML);\n        }\n        else if (!vditor.options.cache.enable) {\n            initValue = \"\";\n        }\n    }\n    return initValue || \"\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/highlightToolbarIR.ts\n\n\n\n\n\nvar highlightToolbarIR = function (vditor) {\n    clearTimeout(vditor[vditor.currentMode].hlToolbarTimeoutId);\n    vditor[vditor.currentMode].hlToolbarTimeoutId = window.setTimeout(function () {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (!(0,selection/* selectIsEditor */.Gb)(vditor[vditor.currentMode].element)) {\n            return;\n        }\n        removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        var typeElement = range.startContainer;\n        if (range.startContainer.nodeType === 3) {\n            typeElement = range.startContainer.parentElement;\n        }\n        if (typeElement.classList.contains(\"vditor-reset\")) {\n            typeElement = typeElement.childNodes[range.startOffset];\n        }\n        var headingElement = vditor.currentMode === \"sv\" ?\n            (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"heading\") : (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(typeElement);\n        if (headingElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"headings\"]);\n        }\n        var quoteElement = vditor.currentMode === \"sv\" ? (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"blockquote\") :\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\");\n        if (quoteElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"quote\"]);\n        }\n        var strongElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"strong\");\n        if (strongElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"bold\"]);\n        }\n        var emElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"em\");\n        if (emElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"italic\"]);\n        }\n        var sElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"s\");\n        if (sElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"strike\"]);\n        }\n        var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"a\");\n        if (aElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"link\"]);\n        }\n        var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"LI\");\n        if (liElement) {\n            if (liElement.classList.contains(\"vditor-task\")) {\n                setCurrentToolbar(vditor.toolbar.elements, [\"check\"]);\n            }\n            else if (liElement.parentElement.tagName === \"OL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"ordered-list\"]);\n            }\n            else if (liElement.parentElement.tagName === \"UL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"list\"]);\n            }\n            enableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        var codeBlockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"code-block\");\n        if (codeBlockElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"bold\", \"italic\", \"strike\", \"line\", \"quote\",\n                \"list\", \"ordered-list\", \"check\", \"code\", \"inline-code\", \"upload\", \"link\", \"table\", \"record\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"code\"]);\n        }\n        var codeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"code\");\n        if (codeElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"bold\", \"italic\", \"strike\", \"line\", \"quote\",\n                \"list\", \"ordered-list\", \"check\", \"code\", \"upload\", \"link\", \"table\", \"record\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"inline-code\"]);\n        }\n        var tableElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"table\");\n        if (tableElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"list\", \"ordered-list\", \"check\", \"line\",\n                \"quote\", \"code\", \"table\"]);\n        }\n    }, 200);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/afterRenderEvent.ts\n\n\nvar afterRenderEvent = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        vditor.hint.render(vditor);\n    }\n    clearTimeout(vditor.wysiwyg.afterRenderTimeoutId);\n    vditor.wysiwyg.afterRenderTimeoutId = window.setTimeout(function () {\n        if (vditor.wysiwyg.composingLock) {\n            return;\n        }\n        var text = getMarkdown(vditor);\n        if (typeof vditor.options.input === \"function\" && options.enableInput) {\n            vditor.options.input(text);\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter.render(vditor, text);\n        }\n        if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n            localStorage.setItem(vditor.options.cache.id, text);\n            if (vditor.options.cache.after) {\n                vditor.options.cache.after(text);\n            }\n        }\n        if (vditor.devtools) {\n            vditor.devtools.renderEchart(vditor);\n        }\n        if (options.enableAddUndoStack) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/inlineTag.ts\n\n\nvar previoueIsEmptyA = function (node) {\n    var previousNode = node.previousSibling;\n    while (previousNode) {\n        if (previousNode.nodeType !== 3 && previousNode.tagName === \"A\" && !previousNode.previousSibling\n            && previousNode.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && previousNode.nextSibling) {\n            return previousNode;\n        }\n        previousNode = previousNode.previousSibling;\n    }\n    return false;\n};\nvar nextIsCode = function (range) {\n    var nextNode = range.startContainer.nextSibling;\n    while (nextNode && nextNode.textContent === \"\") {\n        nextNode = nextNode.nextSibling;\n    }\n    if (nextNode && nextNode.nodeType !== 3 && (nextNode.tagName === \"CODE\" ||\n        nextNode.getAttribute(\"data-type\") === \"math-inline\" ||\n        nextNode.getAttribute(\"data-type\") === \"html-entity\" ||\n        nextNode.getAttribute(\"data-type\") === \"html-inline\")) {\n        return true;\n    }\n    return false;\n};\nvar getNextHTML = function (node) {\n    var html = \"\";\n    var nextNode = node.nextSibling;\n    while (nextNode) {\n        if (nextNode.nodeType === 3) {\n            html += nextNode.textContent;\n        }\n        else {\n            html += nextNode.outerHTML;\n        }\n        nextNode = nextNode.nextSibling;\n    }\n    return html;\n};\nvar getPreviousHTML = function (node) {\n    var html = \"\";\n    var previousNode = node.previousSibling;\n    while (previousNode) {\n        if (previousNode.nodeType === 3) {\n            html = previousNode.textContent + html;\n        }\n        else {\n            html = previousNode.outerHTML + html;\n        }\n        previousNode = previousNode.previousSibling;\n    }\n    return html;\n};\nvar getRenderElementNextNode = function (blockCodeElement) {\n    var nextNode = blockCodeElement;\n    while (nextNode && !nextNode.nextSibling) {\n        nextNode = nextNode.parentElement;\n    }\n    return nextNode.nextSibling;\n};\nvar splitElement = function (range) {\n    var previousHTML = getPreviousHTML(range.startContainer);\n    var nextHTML = getNextHTML(range.startContainer);\n    var text = range.startContainer.textContent;\n    var offset = range.startOffset;\n    var beforeHTML = \"\";\n    var afterHTML = \"\";\n    if (text.substr(0, offset) !== \"\" && text.substr(0, offset) !== constants/* Constants.ZWSP */.g.ZWSP || previousHTML) {\n        beforeHTML = \"\" + previousHTML + text.substr(0, offset);\n    }\n    if (text.substr(offset) !== \"\" && text.substr(offset) !== constants/* Constants.ZWSP */.g.ZWSP || nextHTML) {\n        afterHTML = \"\" + text.substr(offset) + nextHTML;\n    }\n    return {\n        afterHTML: afterHTML,\n        beforeHTML: beforeHTML,\n    };\n};\nvar modifyPre = function (vditor, range) {\n    // 没有被块元素包裹\n    Array.from(vditor.wysiwyg.element.childNodes).find(function (node) {\n        if (node.nodeType === 3) {\n            var pElement = document.createElement(\"p\");\n            pElement.setAttribute(\"data-block\", \"0\");\n            pElement.textContent = node.textContent;\n            // 为空按下 tab 且 tab = '    ' 时，range.startContainer 不为 node\n            var cloneRangeOffset = range.startContainer.nodeType === 3 ? range.startOffset : node.textContent.length;\n            node.parentNode.insertBefore(pElement, node);\n            node.remove();\n            range.setStart(pElement.firstChild, Math.min(pElement.firstChild.textContent.length, cloneRangeOffset));\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        else if (!node.getAttribute(\"data-block\")) {\n            if (node.tagName === \"P\") {\n                node.remove();\n            }\n            else {\n                if (node.tagName === \"DIV\") {\n                    range.insertNode(document.createElement(\"wbr\"));\n                    // firefox 列表换行产生 div\n                    node.outerHTML = \"<p data-block=\\\"0\\\">\" + node.innerHTML + \"</p>\";\n                }\n                else {\n                    if (node.tagName === \"BR\") {\n                        // firefox 空换行产生 BR\n                        node.outerHTML = \"<p data-block=\\\"0\\\">\" + node.outerHTML + \"<wbr></p>\";\n                    }\n                    else {\n                        range.insertNode(document.createElement(\"wbr\"));\n                        node.outerHTML = \"<p data-block=\\\"0\\\">\" + node.outerHTML + \"</p>\";\n                    }\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n                range = getSelection().getRangeAt(0);\n            }\n            return true;\n        }\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/setHeading.ts\n\n\n\nvar setHeading = function (vditor, tagName) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        blockElement = range.startContainer.childNodes[range.startOffset];\n    }\n    if (!blockElement && vditor.wysiwyg.element.children.length === 0) {\n        blockElement = vditor.wysiwyg.element;\n    }\n    if (blockElement && !blockElement.classList.contains(\"vditor-wysiwyg__block\")) {\n        range.insertNode(document.createElement(\"wbr\"));\n        // Firefox 需要 trim https://github.com/Vanessa219/vditor/issues/207\n        if (blockElement.innerHTML.trim() === \"<wbr>\") {\n            // Firefox 光标对不齐 https://github.com/Vanessa219/vditor/issues/199 1\n            blockElement.innerHTML = \"<wbr><br>\";\n        }\n        if (blockElement.tagName === \"BLOCKQUOTE\" || blockElement.classList.contains(\"vditor-reset\")) {\n            blockElement.innerHTML = \"<\" + tagName + \" data-block=\\\"0\\\">\" + blockElement.innerHTML.trim() + \"</\" + tagName + \">\";\n        }\n        else {\n            blockElement.outerHTML = \"<\" + tagName + \" data-block=\\\"0\\\">\" + blockElement.innerHTML.trim() + \"</\" + tagName + \">\";\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        renderToc(vditor);\n    }\n};\nvar removeHeading = function (vditor) {\n    var range = getSelection().getRangeAt(0);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        blockElement = range.startContainer.childNodes[range.startOffset];\n    }\n    if (blockElement) {\n        range.insertNode(document.createElement(\"wbr\"));\n        blockElement.outerHTML = \"<p data-block=\\\"0\\\">\" + blockElement.innerHTML + \"</p>\";\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n    }\n    vditor.wysiwyg.popover.style.display = \"none\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/showCode.ts\n\n\nvar showCode = function (previewElement, vditor, first) {\n    if (first === void 0) { first = true; }\n    var previousElement = previewElement.previousElementSibling;\n    var range = previousElement.ownerDocument.createRange();\n    if (previousElement.tagName === \"CODE\") {\n        previousElement.style.display = \"inline-block\";\n        if (first) {\n            range.setStart(previousElement.firstChild, 1);\n        }\n        else {\n            range.selectNodeContents(previousElement);\n        }\n    }\n    else {\n        previousElement.style.display = \"block\";\n        if (!previousElement.firstChild.firstChild) {\n            previousElement.firstChild.appendChild(document.createTextNode(\"\"));\n        }\n        range.selectNodeContents(previousElement.firstChild);\n    }\n    if (first) {\n        range.collapse(true);\n    }\n    else {\n        range.collapse(false);\n    }\n    (0,selection/* setSelectionFocus */.Hc)(range);\n    if (previewElement.firstElementChild.classList.contains(\"language-mindmap\")) {\n        return;\n    }\n    scrollCenter(vditor);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/processKeydown.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar wysiwyg_processKeydown_processKeydown = function (vditor, event) {\n    // Chrome firefox 触发 compositionend 机制不一致 https://github.com/Vanessa219/vditor/issues/188\n    vditor.wysiwyg.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    // 添加第一次记录 undo 的光标\n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (!fixGSKeyBackspace(event, vditor, startContainer)) {\n        return false;\n    }\n    fixCJKPosition(range, vditor, event);\n    fixHR(range);\n    // 仅处理以下快捷键操作\n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\" && event.key !== \"Delete\") {\n        return false;\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n    var pElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"P\");\n    // md 处理\n    if (fixMarkdown(event, vditor, pElement, range)) {\n        return true;\n    }\n    // li\n    if (fixList(range, vditor, pElement, event)) {\n        return true;\n    }\n    // table\n    if (fixTable(vditor, event, range)) {\n        return true;\n    }\n    // code render\n    var codeRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-wysiwyg__block\");\n    if (codeRenderElement) {\n        // esc: 退出编辑，仅展示渲染\n        if (event.key === \"Escape\" && codeRenderElement.children.length === 2) {\n            vditor.wysiwyg.popover.style.display = \"none\";\n            codeRenderElement.firstElementChild.style.display = \"none\";\n            vditor.wysiwyg.element.blur();\n            event.preventDefault();\n            return true;\n        }\n        // alt+enter: 代码块切换到语言 https://github.com/Vanessa219/vditor/issues/54\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && event.altKey && event.key === \"Enter\" &&\n            codeRenderElement.getAttribute(\"data-type\") === \"code-block\") {\n            var inputElemment = vditor.wysiwyg.popover.querySelector(\".vditor-input\");\n            inputElemment.focus();\n            inputElemment.select();\n            event.preventDefault();\n            return true;\n        }\n        if (codeRenderElement.getAttribute(\"data-block\") === \"0\") {\n            if (fixCodeBlock(vditor, event, codeRenderElement.firstElementChild, range)) {\n                return true;\n            }\n            if (insertAfterBlock(vditor, event, range, codeRenderElement.firstElementChild, codeRenderElement)) {\n                return true;\n            }\n            if (codeRenderElement.getAttribute(\"data-type\") !== \"yaml-front-matter\" &&\n                insertBeforeBlock(vditor, event, range, codeRenderElement.firstElementChild, codeRenderElement)) {\n                return true;\n            }\n        }\n    }\n    // blockquote\n    if (fixBlockquote(vditor, range, event, pElement)) {\n        return true;\n    }\n    // 顶层 blockquote\n    var topBQElement = (0,hasClosest/* hasTopClosestByTag */.E2)(startContainer, \"BLOCKQUOTE\");\n    if (topBQElement) {\n        if (!event.shiftKey && event.altKey && event.key === \"Enter\") {\n            if (!(0,compatibility/* isCtrl */.yl)(event)) {\n                // alt+enter: 跳出多层 blockquote 嵌套之后 https://github.com/Vanessa219/vditor/issues/51\n                range.setStartAfter(topBQElement);\n            }\n            else {\n                // ctrl+alt+enter: 跳出多层 blockquote 嵌套之前\n                range.setStartBefore(topBQElement);\n            }\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            var node = document.createElement(\"p\");\n            node.setAttribute(\"data-block\", \"0\");\n            node.innerHTML = \"\\n\";\n            range.insertNode(node);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            afterRenderEvent(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // h1-h6\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(startContainer);\n    if (headingElement) {\n        if (headingElement.tagName === \"H6\" && startContainer.textContent.length === range.startOffset &&\n            !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Enter\") {\n            // enter: H6 回车解析问题 https://github.com/Vanessa219/vditor/issues/48\n            var pTempElement = document.createElement(\"p\");\n            pTempElement.textContent = \"\\n\";\n            pTempElement.setAttribute(\"data-block\", \"0\");\n            startContainer.parentElement.insertAdjacentElement(\"afterend\", pTempElement);\n            range.setStart(pTempElement, 0);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            afterRenderEvent(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // enter++: 标题变大\n        if (matchHotKey(\"⌘=\", event)) {\n            var index = parseInt(headingElement.tagName.substr(1), 10) - 1;\n            if (index > 0) {\n                setHeading(vditor, \"h\" + index);\n                afterRenderEvent(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // enter++: 标题变小\n        if (matchHotKey(\"⌘-\", event)) {\n            var index = parseInt(headingElement.tagName.substr(1), 10) + 1;\n            if (index < 7) {\n                setHeading(vditor, \"h\" + index);\n                afterRenderEvent(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey\n            && headingElement.textContent.length === 1) {\n            // 删除后变为空\n            removeHeading(vditor);\n        }\n    }\n    // task list\n    if (fixTask(vditor, range, event)) {\n        return true;\n    }\n    // alt+enter\n    if (event.altKey && event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey) {\n        // 切换到链接、链接引用、脚注引用弹出的输入框中\n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"A\");\n        var linRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"link-ref\");\n        var footnoteRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"footnotes-ref\");\n        if (aElement || linRefElement || footnoteRefElement ||\n            (headingElement && headingElement.tagName.length === 2)) {\n            var inputElement = vditor.wysiwyg.popover.querySelector(\"input\");\n            inputElement.focus();\n            inputElement.select();\n        }\n    }\n    // 删除有子工具栏的块\n    if (removeBlockElement(vditor, event)) {\n        return true;\n    }\n    // 对有子工具栏的块上移\n    if (matchHotKey(\"⇧⌘U\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"up\"]');\n        if (itemElement) {\n            itemElement.click();\n            event.preventDefault();\n            return true;\n        }\n    }\n    // 对有子工具栏的块下移\n    if (matchHotKey(\"⇧⌘D\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"down\"]');\n        if (itemElement) {\n            itemElement.click();\n            event.preventDefault();\n            return true;\n        }\n    }\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    // shift+enter：软换行，但 table/hr/heading 处理、cell 内换行、block render 换行处理单独写在上面，li & p 使用浏览器默认\n    if (!(0,compatibility/* isCtrl */.yl)(event) && event.shiftKey && !event.altKey && event.key === \"Enter\" &&\n        startContainer.parentElement.tagName !== \"LI\" && startContainer.parentElement.tagName !== \"P\") {\n        if ([\"STRONG\", \"STRIKE\", \"S\", \"I\", \"EM\", \"B\"].includes(startContainer.parentElement.tagName)) {\n            // 行内元素软换行需继续 https://github.com/Vanessa219/vditor/issues/170\n            range.insertNode(document.createTextNode(\"\\n\" + constants/* Constants.ZWSP */.g.ZWSP));\n        }\n        else {\n            range.insertNode(document.createTextNode(\"\\n\"));\n        }\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        afterRenderEvent(vditor);\n        scrollCenter(vditor);\n        event.preventDefault();\n        return true;\n    }\n    // 删除\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\") {\n        if (fixDelete(vditor, range, event, pElement)) {\n            return true;\n        }\n        if (blockElement) {\n            if (blockElement.previousElementSibling\n                && blockElement.previousElementSibling.classList.contains(\"vditor-wysiwyg__block\")\n                && blockElement.previousElementSibling.getAttribute(\"data-block\") === \"0\"\n                // https://github.com/Vanessa219/vditor/issues/946\n                && blockElement.tagName !== \"UL\" && blockElement.tagName !== \"OL\") {\n                var rangeStart = (0,selection/* getSelectPosition */.im)(blockElement, vditor.wysiwyg.element, range).start;\n                if ((rangeStart === 0 && range.startOffset === 0) || // https://github.com/Vanessa219/vditor/issues/894\n                    (rangeStart === 1 && blockElement.innerText.startsWith(constants/* Constants.ZWSP */.g.ZWSP))) {\n                    // 当前块删除后光标落于代码渲染块上，当前块会被删除，因此需要阻止事件，不能和 keyup 中的代码块处理合并\n                    showCode(blockElement.previousElementSibling.lastElementChild, vditor, false);\n                    if (blockElement.innerHTML.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        // 当前块为空且不是最后一个时，需要删除\n                        blockElement.remove();\n                        afterRenderEvent(vditor);\n                    }\n                    event.preventDefault();\n                    return true;\n                }\n            }\n            var rangeStartOffset = range.startOffset;\n            if (range.toString() === \"\" && startContainer.nodeType === 3 &&\n                startContainer.textContent.charAt(rangeStartOffset - 2) === \"\\n\" &&\n                startContainer.textContent.charAt(rangeStartOffset - 1) !== constants/* Constants.ZWSP */.g.ZWSP\n                && [\"STRONG\", \"STRIKE\", \"S\", \"I\", \"EM\", \"B\"].includes(startContainer.parentElement.tagName)) {\n                // 保持行内元素软换行需继续的一致性\n                startContainer.textContent = startContainer.textContent.substring(0, rangeStartOffset - 1) +\n                    constants/* Constants.ZWSP */.g.ZWSP;\n                range.setStart(startContainer, rangeStartOffset);\n                range.collapse(true);\n                afterRenderEvent(vditor);\n                event.preventDefault();\n                return true;\n            }\n            // inline code、math、html 行前零宽字符后进行删除\n            if (startContainer.textContent === constants/* Constants.ZWSP */.g.ZWSP && range.startOffset === 1\n                && !startContainer.previousSibling && nextIsCode(range)) {\n                startContainer.textContent = \"\";\n                // 不能返回，其前面为代码渲染块时需进行以下处理：修正光标位于 inline math/html 前，按下删除按钮 code 中内容会被删除\n            }\n            // 修正光标位于 inline math/html, html-entity 前，按下删除按钮 code 中内容会被删除, 不能返回，还需要进行后续处理\n            blockElement.querySelectorAll(\"span.vditor-wysiwyg__block[data-type='math-inline']\").forEach(function (item) {\n                item.firstElementChild.style.display = \"inline\";\n                item.lastElementChild.style.display = \"none\";\n            });\n            blockElement.querySelectorAll(\"span.vditor-wysiwyg__block[data-type='html-entity']\").forEach(function (item) {\n                item.firstElementChild.style.display = \"inline\";\n                item.lastElementChild.style.display = \"none\";\n            });\n        }\n    }\n    if ((0,compatibility/* isFirefox */.vU)() && range.startOffset === 1 && startContainer.textContent.indexOf(constants/* Constants.ZWSP */.g.ZWSP) > -1 &&\n        startContainer.previousSibling && startContainer.previousSibling.nodeType !== 3 &&\n        startContainer.previousSibling.tagName === \"CODE\" &&\n        (event.key === \"Backspace\" || event.key === \"ArrowLeft\")) {\n        // https://github.com/Vanessa219/vditor/issues/410\n        range.selectNodeContents(startContainer.previousSibling);\n        range.collapse(false);\n        event.preventDefault();\n        return true;\n    }\n    if (fixFirefoxArrowUpTable(event, blockElement, range)) {\n        event.preventDefault();\n        return true;\n    }\n    fixCursorDownInlineMath(range, event.key);\n    if (event.key === \"ArrowDown\") {\n        // 光标位于内联数学公式前，按下键无作用\n        var nextElement = startContainer.nextSibling;\n        if (nextElement && nextElement.nodeType !== 3 && nextElement.getAttribute(\"data-type\") === \"math-inline\") {\n            range.setStartAfter(nextElement);\n        }\n    }\n    if (blockElement && keydownToc(blockElement, vditor, event, range)) {\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar removeBlockElement = function (vditor, event) {\n    // 删除有子工具栏的块\n    if (matchHotKey(\"⇧⌘X\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"remove\"]');\n        if (itemElement) {\n            itemElement.click();\n            event.preventDefault();\n            return true;\n        }\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/highlightToolbarWYSIWYG.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar highlightToolbarWYSIWYG = function (vditor) {\n    clearTimeout(vditor.wysiwyg.hlToolbarTimeoutId);\n    vditor.wysiwyg.hlToolbarTimeoutId = window.setTimeout(function () {\n        if (vditor.wysiwyg.element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (!(0,selection/* selectIsEditor */.Gb)(vditor.wysiwyg.element)) {\n            return;\n        }\n        removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        var range = getSelection().getRangeAt(0);\n        var typeElement = range.startContainer;\n        if (range.startContainer.nodeType === 3) {\n            typeElement = range.startContainer.parentElement;\n        }\n        else {\n            typeElement = typeElement.childNodes[range.startOffset >= typeElement.childNodes.length\n                ? typeElement.childNodes.length - 1\n                : range.startOffset];\n        }\n        var footnotesElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"footnotes-block\");\n        if (footnotesElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genClose(footnotesElement, vditor);\n            setPopoverPosition(vditor, footnotesElement);\n            return;\n        }\n        // 工具栏高亮和禁用\n        var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"LI\");\n        if (liElement) {\n            if (liElement.classList.contains(\"vditor-task\")) {\n                setCurrentToolbar(vditor.toolbar.elements, [\"check\"]);\n            }\n            else if (liElement.parentElement.tagName === \"OL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"ordered-list\"]);\n            }\n            else if (liElement.parentElement.tagName === \"UL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"list\"]);\n            }\n            enableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"quote\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"B\") ||\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"STRONG\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"bold\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"I\") ||\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"EM\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"italic\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"STRIKE\") ||\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"S\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"strike\"]);\n        }\n        // comments\n        vditor.wysiwyg.element\n            .querySelectorAll(\".vditor-comment--focus\")\n            .forEach(function (item) {\n            item.classList.remove(\"vditor-comment--focus\");\n        });\n        var commentElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-comment\");\n        if (commentElement) {\n            var ids_1 = commentElement.getAttribute(\"data-cmtids\").split(\" \");\n            if (ids_1.length > 1 && commentElement.nextSibling.isSameNode(commentElement.nextElementSibling)) {\n                var nextIds_1 = commentElement.nextElementSibling\n                    .getAttribute(\"data-cmtids\")\n                    .split(\" \");\n                ids_1.find(function (id) {\n                    if (nextIds_1.includes(id)) {\n                        ids_1 = [id];\n                        return true;\n                    }\n                });\n            }\n            vditor.wysiwyg.element\n                .querySelectorAll(\".vditor-comment\")\n                .forEach(function (item) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(ids_1[0]) > -1) {\n                    item.classList.add(\"vditor-comment--focus\");\n                }\n            });\n        }\n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"A\");\n        if (aElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"link\"]);\n        }\n        var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TABLE\");\n        var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(typeElement);\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"CODE\")) {\n            if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"PRE\")) {\n                disableToolbar(vditor.toolbar.elements, [\n                    \"headings\",\n                    \"bold\",\n                    \"italic\",\n                    \"strike\",\n                    \"line\",\n                    \"quote\",\n                    \"list\",\n                    \"ordered-list\",\n                    \"check\",\n                    \"code\",\n                    \"inline-code\",\n                    \"upload\",\n                    \"link\",\n                    \"table\",\n                    \"record\",\n                ]);\n                setCurrentToolbar(vditor.toolbar.elements, [\"code\"]);\n            }\n            else {\n                disableToolbar(vditor.toolbar.elements, [\n                    \"headings\",\n                    \"bold\",\n                    \"italic\",\n                    \"strike\",\n                    \"line\",\n                    \"quote\",\n                    \"list\",\n                    \"ordered-list\",\n                    \"check\",\n                    \"code\",\n                    \"upload\",\n                    \"link\",\n                    \"table\",\n                    \"record\",\n                ]);\n                setCurrentToolbar(vditor.toolbar.elements, [\"inline-code\"]);\n            }\n        }\n        else if (headingElement) {\n            disableToolbar(vditor.toolbar.elements, [\"bold\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"headings\"]);\n        }\n        else if (tableElement) {\n            disableToolbar(vditor.toolbar.elements, [\"table\"]);\n        }\n        // toc popover\n        var tocElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-toc\");\n        if (tocElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genClose(tocElement, vditor);\n            setPopoverPosition(vditor, tocElement);\n            return;\n        }\n        // quote popover\n        var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(typeElement, \"BLOCKQUOTE\");\n        if (blockquoteElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, blockquoteElement, vditor);\n            genDown(range, blockquoteElement, vditor);\n            genClose(blockquoteElement, vditor);\n            setPopoverPosition(vditor, blockquoteElement);\n        }\n        // list item popover\n        if (liElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, liElement, vditor);\n            genDown(range, liElement, vditor);\n            genClose(liElement, vditor);\n            setPopoverPosition(vditor, liElement);\n        }\n        // table popover\n        if (tableElement) {\n            var lang = vditor.options.lang;\n            var options = vditor.options;\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var updateTable_1 = function () {\n                var oldRow = tableElement.rows.length;\n                var oldColumn = tableElement.rows[0].cells.length;\n                var row = parseInt(input_1.value, 10) || oldRow;\n                var column = parseInt(input2_1.value, 10) || oldColumn;\n                if (row === oldRow && oldColumn === column) {\n                    return;\n                }\n                if (oldColumn !== column) {\n                    var columnDiff = column - oldColumn;\n                    for (var i = 0; i < tableElement.rows.length; i++) {\n                        if (columnDiff > 0) {\n                            for (var j = 0; j < columnDiff; j++) {\n                                if (i === 0) {\n                                    tableElement.rows[i].lastElementChild.insertAdjacentHTML(\"afterend\", \"<th> </th>\");\n                                }\n                                else {\n                                    tableElement.rows[i].lastElementChild.insertAdjacentHTML(\"afterend\", \"<td> </td>\");\n                                }\n                            }\n                        }\n                        else {\n                            for (var k = oldColumn - 1; k >= column; k--) {\n                                tableElement.rows[i].cells[k].remove();\n                            }\n                        }\n                    }\n                }\n                if (oldRow !== row) {\n                    var rowDiff = row - oldRow;\n                    if (rowDiff > 0) {\n                        var rowHTML = \"<tr>\";\n                        for (var m = 0; m < column; m++) {\n                            rowHTML += \"<td> </td>\";\n                        }\n                        for (var l = 0; l < rowDiff; l++) {\n                            if (tableElement.querySelector(\"tbody\")) {\n                                tableElement\n                                    .querySelector(\"tbody\")\n                                    .insertAdjacentHTML(\"beforeend\", rowHTML);\n                            }\n                            else {\n                                tableElement\n                                    .querySelector(\"thead\")\n                                    .insertAdjacentHTML(\"afterend\", rowHTML + \"</tr>\");\n                            }\n                        }\n                    }\n                    else {\n                        for (var m = oldRow - 1; m >= row; m--) {\n                            tableElement.rows[m].remove();\n                            if (tableElement.rows.length === 1) {\n                                tableElement.querySelector(\"tbody\").remove();\n                            }\n                        }\n                    }\n                }\n            };\n            var setAlign_1 = function (type) {\n                setTableAlign(tableElement, type);\n                if (type === \"right\") {\n                    left_1.classList.remove(\"vditor-icon--current\");\n                    center_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.add(\"vditor-icon--current\");\n                }\n                else if (type === \"center\") {\n                    left_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.remove(\"vditor-icon--current\");\n                    center_1.classList.add(\"vditor-icon--current\");\n                }\n                else {\n                    center_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.remove(\"vditor-icon--current\");\n                    left_1.classList.add(\"vditor-icon--current\");\n                }\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                afterRenderEvent(vditor);\n            };\n            var td = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TD\");\n            var th = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TH\");\n            var alignType = \"left\";\n            if (td) {\n                alignType = td.getAttribute(\"align\") || \"left\";\n            }\n            else if (th) {\n                alignType = th.getAttribute(\"align\") || \"center\";\n            }\n            var left_1 = document.createElement(\"button\");\n            left_1.setAttribute(\"type\", \"button\");\n            left_1.setAttribute(\"aria-label\", window.VditorI18n.alignLeft + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘L\") + \">\");\n            left_1.setAttribute(\"data-type\", \"left\");\n            left_1.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-align-left\"></use></svg>';\n            left_1.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                    (alignType === \"left\" ? \" vditor-icon--current\" : \"\");\n            left_1.onclick = function () {\n                setAlign_1(\"left\");\n            };\n            var center_1 = document.createElement(\"button\");\n            center_1.setAttribute(\"type\", \"button\");\n            center_1.setAttribute(\"aria-label\", window.VditorI18n.alignCenter + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘C\") + \">\");\n            center_1.setAttribute(\"data-type\", \"center\");\n            center_1.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-align-center\"></use></svg>';\n            center_1.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                    (alignType === \"center\" ? \" vditor-icon--current\" : \"\");\n            center_1.onclick = function () {\n                setAlign_1(\"center\");\n            };\n            var right_1 = document.createElement(\"button\");\n            right_1.setAttribute(\"type\", \"button\");\n            right_1.setAttribute(\"aria-label\", window.VditorI18n.alignRight + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘R\") + \">\");\n            right_1.setAttribute(\"data-type\", \"right\");\n            right_1.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-align-right\"></use></svg>';\n            right_1.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                    (alignType === \"right\" ? \" vditor-icon--current\" : \"\");\n            right_1.onclick = function () {\n                setAlign_1(\"right\");\n            };\n            var insertRowElement = document.createElement(\"button\");\n            insertRowElement.setAttribute(\"type\", \"button\");\n            insertRowElement.setAttribute(\"aria-label\", window.VditorI18n.insertRowBelow + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌘=\") + \">\");\n            insertRowElement.setAttribute(\"data-type\", \"insertRow\");\n            insertRowElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-insert-row\"></use></svg>';\n            insertRowElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertRowElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertRow(vditor, range, cellElement);\n                }\n            };\n            var insertRowBElement = document.createElement(\"button\");\n            insertRowBElement.setAttribute(\"type\", \"button\");\n            insertRowBElement.setAttribute(\"aria-label\", window.VditorI18n.insertRowAbove + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘F\") + \">\");\n            insertRowBElement.setAttribute(\"data-type\", \"insertRow\");\n            insertRowBElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-insert-rowb\"></use></svg>';\n            insertRowBElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertRowBElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertRowAbove(vditor, range, cellElement);\n                }\n            };\n            var insertColumnElement = document.createElement(\"button\");\n            insertColumnElement.setAttribute(\"type\", \"button\");\n            insertColumnElement.setAttribute(\"aria-label\", window.VditorI18n.insertColumnRight + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘=\") + \">\");\n            insertColumnElement.setAttribute(\"data-type\", \"insertColumn\");\n            insertColumnElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-insert-column\"></use></svg>';\n            insertColumnElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertColumnElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertColumn(vditor, tableElement, cellElement);\n                }\n            };\n            var insertColumnBElement = document.createElement(\"button\");\n            insertColumnBElement.setAttribute(\"type\", \"button\");\n            insertColumnBElement.setAttribute(\"aria-label\", window.VditorI18n.insertColumnLeft + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘G\") + \">\");\n            insertColumnBElement.setAttribute(\"data-type\", \"insertColumn\");\n            insertColumnBElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-insert-columnb\"></use></svg>';\n            insertColumnBElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertColumnBElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertColumn(vditor, tableElement, cellElement, \"beforebegin\");\n                }\n            };\n            var deleteRowElement = document.createElement(\"button\");\n            deleteRowElement.setAttribute(\"type\", \"button\");\n            deleteRowElement.setAttribute(\"aria-label\", window.VditorI18n[\"delete-row\"] + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌘-\") + \">\");\n            deleteRowElement.setAttribute(\"data-type\", \"deleteRow\");\n            deleteRowElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-delete-row\"></use></svg>';\n            deleteRowElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            deleteRowElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    deleteRow(vditor, range, cellElement);\n                }\n            };\n            var deleteColumnElement = document.createElement(\"button\");\n            deleteColumnElement.setAttribute(\"type\", \"button\");\n            deleteColumnElement.setAttribute(\"aria-label\", window.VditorI18n[\"delete-column\"] + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘-\") + \">\");\n            deleteColumnElement.setAttribute(\"data-type\", \"deleteColumn\");\n            deleteColumnElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-delete-column\"></use></svg>';\n            deleteColumnElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            deleteColumnElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    deleteColumn(vditor, range, tableElement, cellElement);\n                }\n            };\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", window.VditorI18n.row);\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_1 = document.createElement(\"input\");\n            inputWrap.appendChild(input_1);\n            input_1.type = \"number\";\n            input_1.min = \"1\";\n            input_1.className = \"vditor-input\";\n            input_1.style.width = \"42px\";\n            input_1.style.textAlign = \"center\";\n            input_1.setAttribute(\"placeholder\", window.VditorI18n.row);\n            input_1.value = tableElement.rows.length.toString();\n            input_1.oninput = function () {\n                updateTable_1();\n            };\n            input_1.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (event.key === \"Tab\") {\n                    input2_1.focus();\n                    input2_1.select();\n                    event.preventDefault();\n                    return;\n                }\n                removeBlockElement(vditor, event);\n            };\n            var input2Wrap = document.createElement(\"span\");\n            input2Wrap.setAttribute(\"aria-label\", window.VditorI18n.column);\n            input2Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input2_1 = document.createElement(\"input\");\n            input2Wrap.appendChild(input2_1);\n            input2_1.type = \"number\";\n            input2_1.min = \"1\";\n            input2_1.className = \"vditor-input\";\n            input2_1.style.width = \"42px\";\n            input2_1.style.textAlign = \"center\";\n            input2_1.setAttribute(\"placeholder\", window.VditorI18n.column);\n            input2_1.value = tableElement.rows[0].cells.length.toString();\n            input2_1.oninput = function () {\n                updateTable_1();\n            };\n            input2_1.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (event.key === \"Tab\") {\n                    input_1.focus();\n                    input_1.select();\n                    event.preventDefault();\n                    return;\n                }\n                removeBlockElement(vditor, event);\n            };\n            genUp(range, tableElement, vditor);\n            genDown(range, tableElement, vditor);\n            genClose(tableElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", left_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", center_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", right_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertRowBElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertRowElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertColumnBElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertColumnElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", deleteRowElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", deleteColumnElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            vditor.wysiwyg.popover.insertAdjacentHTML(\"beforeend\", \" x \");\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input2Wrap);\n            setPopoverPosition(vditor, tableElement);\n        }\n        // link ref popover\n        var linkRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"link-ref\");\n        if (linkRefElement) {\n            genLinkRefPopover(vditor, linkRefElement);\n        }\n        // footnote popover\n        var footnotesRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"footnotes-ref\");\n        if (footnotesRefElement) {\n            var lang = vditor.options.lang;\n            var options = vditor.options;\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", window.VditorI18n.footnoteRef + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_2 = document.createElement(\"input\");\n            inputWrap.appendChild(input_2);\n            input_2.className = \"vditor-input\";\n            input_2.setAttribute(\"placeholder\", window.VditorI18n.footnoteRef + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            input_2.style.width = \"120px\";\n            input_2.value = footnotesRefElement.getAttribute(\"data-footnotes-label\");\n            input_2.oninput = function () {\n                if (input_2.value.trim() !== \"\") {\n                    footnotesRefElement.setAttribute(\"data-footnotes-label\", input_2.value);\n                }\n            };\n            input_2.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (!(0,compatibility/* isCtrl */.yl)(event) &&\n                    !event.shiftKey &&\n                    event.altKey &&\n                    event.key === \"Enter\") {\n                    range.selectNodeContents(footnotesRefElement);\n                    range.collapse(false);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                    event.preventDefault();\n                    return;\n                }\n                removeBlockElement(vditor, event);\n            };\n            genClose(footnotesRefElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            setPopoverPosition(vditor, footnotesRefElement);\n        }\n        var blockRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-wysiwyg__block\");\n        // block popover: math-inline, math-block, html-block, html-inline, code-block, html-entity\n        if (blockRenderElement &&\n            blockRenderElement.getAttribute(\"data-type\").indexOf(\"block\") > -1) {\n            var lang = vditor.options.lang;\n            var options = vditor.options;\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, blockRenderElement, vditor);\n            genDown(range, blockRenderElement, vditor);\n            genClose(blockRenderElement, vditor);\n            if (blockRenderElement.getAttribute(\"data-type\") === \"code-block\") {\n                var languageWrap = document.createElement(\"span\");\n                languageWrap.setAttribute(\"aria-label\", window.VditorI18n.language + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n                languageWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n                var language_1 = document.createElement(\"input\");\n                languageWrap.appendChild(language_1);\n                var codeElement_1 = blockRenderElement.firstElementChild.firstElementChild;\n                language_1.className = \"vditor-input\";\n                language_1.setAttribute(\"placeholder\", window.VditorI18n.language + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n                language_1.value =\n                    codeElement_1.className.indexOf(\"language-\") > -1\n                        ? codeElement_1.className.split(\"-\")[1].split(\" \")[0]\n                        : \"\";\n                language_1.oninput = function () {\n                    if (language_1.value.trim() !== \"\") {\n                        codeElement_1.className = \"language-\" + language_1.value;\n                    }\n                    else {\n                        codeElement_1.className = \"\";\n                        vditor.hint.recentLanguage = \"\";\n                    }\n                    if (blockRenderElement.lastElementChild.classList.contains(\"vditor-wysiwyg__preview\")) {\n                        blockRenderElement.lastElementChild.innerHTML =\n                            blockRenderElement.firstElementChild.innerHTML;\n                        processCodeRender(blockRenderElement.lastElementChild, vditor);\n                    }\n                    afterRenderEvent(vditor);\n                };\n                language_1.onkeydown = function (event) {\n                    if (event.isComposing) {\n                        return;\n                    }\n                    if (removeBlockElement(vditor, event)) {\n                        return;\n                    }\n                    if (event.key === \"Escape\" &&\n                        vditor.hint.element.style.display === \"block\") {\n                        vditor.hint.element.style.display = \"none\";\n                        event.preventDefault();\n                        return;\n                    }\n                    if (!(0,compatibility/* isCtrl */.yl)(event) &&\n                        !event.shiftKey &&\n                        event.altKey &&\n                        event.key === \"Enter\") {\n                        range.setStart(codeElement_1.firstChild, 0);\n                        range.collapse(true);\n                        (0,selection/* setSelectionFocus */.Hc)(range);\n                    }\n                    vditor.hint.select(event, vditor);\n                };\n                language_1.onkeyup = function (event) {\n                    if (event.isComposing ||\n                        event.key === \"Enter\" ||\n                        event.key === \"ArrowUp\" ||\n                        event.key === \"Escape\" ||\n                        event.key === \"ArrowDown\") {\n                        return;\n                    }\n                    var matchLangData = [];\n                    var key = language_1.value.substring(0, language_1.selectionStart);\n                    constants/* Constants.CODE_LANGUAGES.forEach */.g.CODE_LANGUAGES.forEach(function (keyName) {\n                        if (keyName.indexOf(key.toLowerCase()) > -1) {\n                            matchLangData.push({\n                                html: keyName,\n                                value: keyName,\n                            });\n                        }\n                    });\n                    vditor.hint.genHTML(matchLangData, key, vditor);\n                    event.preventDefault();\n                };\n                vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", languageWrap);\n            }\n            setPopoverPosition(vditor, blockRenderElement);\n        }\n        else {\n            if (!blockRenderElement) {\n                vditor.wysiwyg.element\n                    .querySelectorAll(\".vditor-wysiwyg__preview\")\n                    .forEach(function (itemElement) {\n                    var previousElement = itemElement.previousElementSibling;\n                    previousElement.style.display = \"none\";\n                });\n            }\n            blockRenderElement = undefined;\n        }\n        if (headingElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", \"ID\" + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_3 = document.createElement(\"input\");\n            inputWrap.appendChild(input_3);\n            input_3.className = \"vditor-input\";\n            input_3.setAttribute(\"placeholder\", \"ID\" + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            input_3.style.width = \"120px\";\n            input_3.value = headingElement.getAttribute(\"data-id\") || \"\";\n            input_3.oninput = function () {\n                headingElement.setAttribute(\"data-id\", input_3.value);\n            };\n            input_3.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (!(0,compatibility/* isCtrl */.yl)(event) &&\n                    !event.shiftKey &&\n                    event.altKey &&\n                    event.key === \"Enter\") {\n                    range.selectNodeContents(headingElement);\n                    range.collapse(false);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                    event.preventDefault();\n                    return;\n                }\n                removeBlockElement(vditor, event);\n            };\n            genUp(range, headingElement, vditor);\n            genDown(range, headingElement, vditor);\n            genClose(headingElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            setPopoverPosition(vditor, headingElement);\n        }\n        // a popover\n        if (aElement) {\n            genAPopover(vditor, aElement);\n        }\n        if (!blockquoteElement &&\n            !liElement &&\n            !tableElement &&\n            !blockRenderElement &&\n            !aElement &&\n            !linkRefElement &&\n            !footnotesRefElement &&\n            !headingElement &&\n            !tocElement) {\n            var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-block\", \"0\");\n            if (blockElement &&\n                blockElement.parentElement.isEqualNode(vditor.wysiwyg.element)) {\n                vditor.wysiwyg.popover.innerHTML = \"\";\n                genUp(range, blockElement, vditor);\n                genDown(range, blockElement, vditor);\n                genClose(blockElement, vditor);\n                setPopoverPosition(vditor, blockElement);\n            }\n            else {\n                vditor.wysiwyg.popover.style.display = \"none\";\n            }\n        }\n        // 反斜杠特殊处理\n        vditor.wysiwyg.element\n            .querySelectorAll('span[data-type=\"backslash\"] > span')\n            .forEach(function (item) {\n            item.style.display = \"none\";\n        });\n        var backslashElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"backslash\");\n        if (backslashElement) {\n            backslashElement.querySelector(\"span\").style.display = \"inline\";\n        }\n    }, 200);\n};\nvar setPopoverPosition = function (vditor, element) {\n    var targetElement = element;\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(element, \"TABLE\");\n    if (tableElement) {\n        targetElement = tableElement;\n    }\n    vditor.wysiwyg.popover.style.left = \"0\";\n    vditor.wysiwyg.popover.style.display = \"block\";\n    vditor.wysiwyg.popover.style.top =\n        Math.max(-8, targetElement.offsetTop - 21 - vditor.wysiwyg.element.scrollTop) + \"px\";\n    vditor.wysiwyg.popover.style.left =\n        Math.min(targetElement.offsetLeft, vditor.wysiwyg.element.clientWidth - vditor.wysiwyg.popover.clientWidth) + \"px\";\n    vditor.wysiwyg.popover.setAttribute(\"data-top\", (targetElement.offsetTop - 21).toString());\n};\nvar genLinkRefPopover = function (vditor, linkRefElement) {\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateLinkRef = function () {\n        if (input.value.trim() !== \"\") {\n            if (linkRefElement.tagName === \"IMG\") {\n                linkRefElement.setAttribute(\"alt\", input.value);\n            }\n            else {\n                linkRefElement.textContent = input.value;\n            }\n        }\n        // data-link-label\n        if (input1.value.trim() !== \"\") {\n            linkRefElement.setAttribute(\"data-link-label\", input1.value);\n        }\n    };\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", window.VditorI18n.textIsNotEmpty);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input = document.createElement(\"input\");\n    inputWrap.appendChild(input);\n    input.className = \"vditor-input\";\n    input.setAttribute(\"placeholder\", window.VditorI18n.textIsNotEmpty);\n    input.style.width = \"120px\";\n    input.value =\n        linkRefElement.getAttribute(\"alt\") || linkRefElement.textContent;\n    input.oninput = function () {\n        updateLinkRef();\n    };\n    input.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, linkRefElement, event, input1);\n    };\n    var input1Wrap = document.createElement(\"span\");\n    input1Wrap.setAttribute(\"aria-label\", window.VditorI18n.linkRef);\n    input1Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input1 = document.createElement(\"input\");\n    input1Wrap.appendChild(input1);\n    input1.className = \"vditor-input\";\n    input1.setAttribute(\"placeholder\", window.VditorI18n.linkRef);\n    input1.value = linkRefElement.getAttribute(\"data-link-label\");\n    input1.oninput = function () {\n        updateLinkRef();\n    };\n    input1.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, linkRefElement, event, input);\n    };\n    genClose(linkRefElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input1Wrap);\n    setPopoverPosition(vditor, linkRefElement);\n};\nvar genUp = function (range, element, vditor) {\n    var previousElement = element.previousElementSibling;\n    if (!previousElement ||\n        (!element.parentElement.isEqualNode(vditor.wysiwyg.element) &&\n            element.tagName !== \"LI\")) {\n        return;\n    }\n    var upElement = document.createElement(\"button\");\n    upElement.setAttribute(\"type\", \"button\");\n    upElement.setAttribute(\"data-type\", \"up\");\n    upElement.setAttribute(\"aria-label\", window.VditorI18n.up + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘U\") + \">\");\n    upElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-up\"></use></svg>';\n    upElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    upElement.onclick = function () {\n        range.insertNode(document.createElement(\"wbr\"));\n        previousElement.insertAdjacentElement(\"beforebegin\", element);\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n        scrollCenter(vditor);\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", upElement);\n};\nvar genDown = function (range, element, vditor) {\n    var nextElement = element.nextElementSibling;\n    if (!nextElement ||\n        (!element.parentElement.isEqualNode(vditor.wysiwyg.element) &&\n            element.tagName !== \"LI\")) {\n        return;\n    }\n    var downElement = document.createElement(\"button\");\n    downElement.setAttribute(\"type\", \"button\");\n    downElement.setAttribute(\"data-type\", \"down\");\n    downElement.setAttribute(\"aria-label\", window.VditorI18n.down + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘D\") + \">\");\n    downElement.innerHTML =\n        '<svg><use xlink:href=\"#vditor-icon-down\"></use></svg>';\n    downElement.className =\n        \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    downElement.onclick = function () {\n        range.insertNode(document.createElement(\"wbr\"));\n        nextElement.insertAdjacentElement(\"afterend\", element);\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n        scrollCenter(vditor);\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", downElement);\n};\nvar genClose = function (element, vditor) {\n    var close = document.createElement(\"button\");\n    close.setAttribute(\"type\", \"button\");\n    close.setAttribute(\"data-type\", \"remove\");\n    close.setAttribute(\"aria-label\", window.VditorI18n.remove + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘X\") + \">\");\n    close.innerHTML =\n        '<svg><use xlink:href=\"#vditor-icon-trashcan\"></use></svg>';\n    close.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    close.onclick = function () {\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        range.setStartAfter(element);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        element.remove();\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", close);\n};\nvar linkHotkey = function (vditor, element, event, nextInputElement) {\n    if (event.isComposing) {\n        return;\n    }\n    if (event.key === \"Tab\") {\n        nextInputElement.focus();\n        nextInputElement.select();\n        event.preventDefault();\n        return;\n    }\n    if (!(0,compatibility/* isCtrl */.yl)(event) &&\n        !event.shiftKey &&\n        event.altKey &&\n        event.key === \"Enter\") {\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        // firefox 不会打断 link https://github.com/Vanessa219/vditor/issues/193\n        element.insertAdjacentHTML(\"afterend\", constants/* Constants.ZWSP */.g.ZWSP);\n        range.setStartAfter(element.nextSibling);\n        range.collapse(true);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        event.preventDefault();\n    }\n};\nvar genAPopover = function (vditor, aElement) {\n    var lang = vditor.options.lang;\n    var options = vditor.options;\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateA = function () {\n        if (input.value.trim() !== \"\") {\n            aElement.innerHTML = input.value;\n        }\n        aElement.setAttribute(\"href\", input1.value);\n        aElement.setAttribute(\"title\", input2.value);\n    };\n    aElement.querySelectorAll(\"[data-marker]\").forEach(function (item) {\n        item.removeAttribute(\"data-marker\");\n    });\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", window.VditorI18n.textIsNotEmpty);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input = document.createElement(\"input\");\n    inputWrap.appendChild(input);\n    input.className = \"vditor-input\";\n    input.setAttribute(\"placeholder\", window.VditorI18n.textIsNotEmpty);\n    input.style.width = \"120px\";\n    input.value = aElement.innerHTML || \"\";\n    input.oninput = function () {\n        updateA();\n    };\n    input.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input1);\n    };\n    var input1Wrap = document.createElement(\"span\");\n    input1Wrap.setAttribute(\"aria-label\", window.VditorI18n.link);\n    input1Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input1 = document.createElement(\"input\");\n    input1Wrap.appendChild(input1);\n    input1.className = \"vditor-input\";\n    input1.setAttribute(\"placeholder\", window.VditorI18n.link);\n    input1.value = aElement.getAttribute(\"href\") || \"\";\n    input1.oninput = function () {\n        updateA();\n    };\n    input1.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input2);\n    };\n    var input2Wrap = document.createElement(\"span\");\n    input2Wrap.setAttribute(\"aria-label\", window.VditorI18n.tooltipText);\n    input2Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input2 = document.createElement(\"input\");\n    input2Wrap.appendChild(input2);\n    input2.className = \"vditor-input\";\n    input2.setAttribute(\"placeholder\", window.VditorI18n.tooltipText);\n    input2.style.width = \"60px\";\n    input2.value = aElement.getAttribute(\"title\") || \"\";\n    input2.oninput = function () {\n        updateA();\n    };\n    input2.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input);\n    };\n    genClose(aElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input1Wrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input2Wrap);\n    setPopoverPosition(vditor, aElement);\n};\nvar genImagePopover = function (event, vditor) {\n    var imgElement = event.target;\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateImg = function () {\n        imgElement.setAttribute(\"src\", inputElement.value);\n        imgElement.setAttribute(\"alt\", alt.value);\n        imgElement.setAttribute(\"title\", title.value);\n    };\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", window.VditorI18n.imageURL);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var inputElement = document.createElement(\"input\");\n    inputWrap.appendChild(inputElement);\n    inputElement.className = \"vditor-input\";\n    inputElement.setAttribute(\"placeholder\", window.VditorI18n.imageURL);\n    inputElement.value = imgElement.getAttribute(\"src\") || \"\";\n    inputElement.oninput = function () {\n        updateImg();\n    };\n    inputElement.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    var altWrap = document.createElement(\"span\");\n    altWrap.setAttribute(\"aria-label\", window.VditorI18n.alternateText);\n    altWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var alt = document.createElement(\"input\");\n    altWrap.appendChild(alt);\n    alt.className = \"vditor-input\";\n    alt.setAttribute(\"placeholder\", window.VditorI18n.alternateText);\n    alt.style.width = \"52px\";\n    alt.value = imgElement.getAttribute(\"alt\") || \"\";\n    alt.oninput = function () {\n        updateImg();\n    };\n    alt.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    var titleWrap = document.createElement(\"span\");\n    titleWrap.setAttribute(\"aria-label\", window.VditorI18n.title);\n    titleWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var title = document.createElement(\"input\");\n    titleWrap.appendChild(title);\n    title.className = \"vditor-input\";\n    title.setAttribute(\"placeholder\", window.VditorI18n.title);\n    title.value = imgElement.getAttribute(\"title\") || \"\";\n    title.oninput = function () {\n        updateImg();\n    };\n    title.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    genClose(imgElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", altWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", titleWrap);\n    setPopoverPosition(vditor, imgElement);\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/highlightToolbar.ts\n\n\nvar highlightToolbar = function (vditor) {\n    if (vditor.currentMode === \"wysiwyg\") {\n        highlightToolbarWYSIWYG(vditor);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        highlightToolbarIR(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/renderDomByMd.ts\n\n\nvar renderDomByMd = function (vditor, md, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    var editorElement = vditor.wysiwyg.element;\n    editorElement.innerHTML = vditor.lute.Md2VditorDOM(md);\n    editorElement.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\").forEach(function (item) {\n        processCodeRender(item, vditor);\n        item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n    });\n    afterRenderEvent(vditor, options);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/toolbarEvent.ts\n\n\n\n\n\n\n\n\n\nvar cancelBES = function (range, vditor, commandName) {\n    var element = range.startContainer.parentElement;\n    var jump = false;\n    var lastTagName = \"\";\n    var lastEndTagName = \"\";\n    var splitHTML = splitElement(range);\n    var lastBeforeHTML = splitHTML.beforeHTML;\n    var lastAfterHTML = splitHTML.afterHTML;\n    while (element && !jump) {\n        var tagName = element.tagName;\n        if (tagName === \"STRIKE\") {\n            tagName = \"S\";\n        }\n        if (tagName === \"I\") {\n            tagName = \"EM\";\n        }\n        if (tagName === \"B\") {\n            tagName = \"STRONG\";\n        }\n        if (tagName === \"S\" || tagName === \"STRONG\" || tagName === \"EM\") {\n            var insertHTML = \"\";\n            var previousHTML = \"\";\n            var nextHTML = \"\";\n            if (element.parentElement.getAttribute(\"data-block\") !== \"0\") {\n                previousHTML = getPreviousHTML(element);\n                nextHTML = getNextHTML(element);\n            }\n            if (lastBeforeHTML || previousHTML) {\n                insertHTML = previousHTML + \"<\" + tagName + \">\" + lastBeforeHTML + \"</\" + tagName + \">\";\n                lastBeforeHTML = insertHTML;\n            }\n            if ((commandName === \"bold\" && tagName === \"STRONG\") ||\n                (commandName === \"italic\" && tagName === \"EM\") ||\n                (commandName === \"strikeThrough\" && tagName === \"S\")) {\n                // 取消\n                insertHTML += \"\" + lastTagName + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr>\" + lastEndTagName;\n                jump = true;\n            }\n            if (lastAfterHTML || nextHTML) {\n                lastAfterHTML = \"<\" + tagName + \">\" + lastAfterHTML + \"</\" + tagName + \">\" + nextHTML;\n                insertHTML += lastAfterHTML;\n            }\n            if (element.parentElement.getAttribute(\"data-block\") !== \"0\") {\n                element = element.parentElement;\n                element.innerHTML = insertHTML;\n            }\n            else {\n                element.outerHTML = insertHTML;\n                element = element.parentElement;\n            }\n            lastTagName = \"<\" + tagName + \">\" + lastTagName;\n            lastEndTagName = \"</\" + tagName + \">\" + lastEndTagName;\n        }\n        else {\n            jump = true;\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n};\nvar toolbarEvent = function (vditor, actionBtn, event) {\n    if (vditor.wysiwyg.composingLock // Mac Chrome 中韩文结束会出发此事件，导致重复末尾字符 https://github.com/Vanessa219/vditor/issues/188\n        && event instanceof CustomEvent // 点击按钮应忽略输入法 https://github.com/Vanessa219/vditor/issues/473\n    ) {\n        return;\n    }\n    var useHighlight = true;\n    var useRender = true;\n    if (vditor.wysiwyg.element.querySelector(\"wbr\")) {\n        vditor.wysiwyg.element.querySelector(\"wbr\").remove();\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    // 移除\n    if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n        if (commandName === \"strike\") {\n            commandName = \"strikeThrough\";\n        }\n        if (commandName === \"quote\") {\n            var quoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"BLOCKQUOTE\");\n            if (!quoteElement) {\n                quoteElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (quoteElement) {\n                useHighlight = false;\n                actionBtn.classList.remove(\"vditor-menu--current\");\n                range.insertNode(document.createElement(\"wbr\"));\n                quoteElement.outerHTML = quoteElement.innerHTML.trim() === \"\" ?\n                    \"<p data-block=\\\"0\\\">\" + quoteElement.innerHTML + \"</p>\" : quoteElement.innerHTML;\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"inline-code\") {\n            var inlineCodeElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"CODE\");\n            if (!inlineCodeElement) {\n                inlineCodeElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (inlineCodeElement) {\n                inlineCodeElement.outerHTML = inlineCodeElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") + \"<wbr>\";\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"link\") {\n            if (!range.collapsed) {\n                document.execCommand(\"unlink\", false, \"\");\n            }\n            else {\n                range.selectNode(range.startContainer.parentElement);\n                document.execCommand(\"unlink\", false, \"\");\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName);\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n        }\n        else {\n            // bold, italic, strike\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n            if (range.toString() === \"\") {\n                cancelBES(range, vditor, commandName);\n            }\n            else {\n                document.execCommand(commandName, false, \"\");\n            }\n        }\n    }\n    else {\n        // 添加\n        if (vditor.wysiwyg.element.childNodes.length === 0) {\n            vditor.wysiwyg.element.innerHTML = '<p data-block=\"0\"><wbr></p>';\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n        if (commandName === \"quote\") {\n            if (!blockElement) {\n                blockElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (blockElement) {\n                useHighlight = false;\n                actionBtn.classList.add(\"vditor-menu--current\");\n                range.insertNode(document.createElement(\"wbr\"));\n                var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n                // li 中软换行\n                if (liElement && blockElement.contains(liElement)) {\n                    liElement.innerHTML = \"<blockquote data-block=\\\"0\\\">\" + liElement.innerHTML + \"</blockquote>\";\n                }\n                else {\n                    blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\" + blockElement.outerHTML + \"</blockquote>\";\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName, false);\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            useHighlight = false;\n            removeCurrentToolbar(vditor.toolbar.elements, [\"check\", \"list\", \"ordered-list\"]);\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"inline-code\") {\n            if (range.toString() === \"\") {\n                var node = document.createElement(\"code\");\n                node.textContent = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(node);\n                range.setStart(node.firstChild, 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else if (range.startContainer.nodeType === 3) {\n                var node = document.createElement(\"code\");\n                range.surroundContents(node);\n                range.insertNode(node);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"code\") {\n            var node = document.createElement(\"div\");\n            node.className = \"vditor-wysiwyg__block\";\n            node.setAttribute(\"data-type\", \"code-block\");\n            node.setAttribute(\"data-block\", \"0\");\n            node.setAttribute(\"data-marker\", \"```\");\n            if (range.toString() === \"\") {\n                node.innerHTML = \"<pre><code><wbr>\\n</code></pre>\";\n            }\n            else {\n                node.innerHTML = \"<pre><code>\" + range.toString() + \"<wbr></code></pre>\";\n                range.deleteContents();\n            }\n            range.insertNode(node);\n            if (blockElement) {\n                blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            vditor.wysiwyg.element.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\").forEach(function (item) {\n                processCodeRender(item, vditor);\n            });\n            actionBtn.classList.add(\"vditor-menu--disabled\");\n        }\n        else if (commandName === \"link\") {\n            if (range.toString() === \"\") {\n                var aElement = document.createElement(\"a\");\n                aElement.innerText = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(aElement);\n                range.setStart(aElement.firstChild, 1);\n                range.collapse(true);\n                genAPopover(vditor, aElement);\n                var textInputElement = vditor.wysiwyg.popover.querySelector(\"input\");\n                textInputElement.value = \"\";\n                textInputElement.focus();\n                useRender = false;\n            }\n            else {\n                var node = document.createElement(\"a\");\n                node.setAttribute(\"href\", \"\");\n                node.innerHTML = range.toString();\n                range.surroundContents(node);\n                range.insertNode(node);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                genAPopover(vditor, node);\n                var textInputElements = vditor.wysiwyg.popover.querySelectorAll(\"input\");\n                textInputElements[0].value = node.innerText;\n                textInputElements[1].focus();\n            }\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"table\") {\n            var tableHTML_1 = \"<table data-block=\\\"0\\\"><thead><tr><th>col1<wbr></th><th>col2</th><th>col3</th></tr></thead><tbody><tr><td> </td><td> </td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr></tbody></table>\";\n            if (range.toString().trim() === \"\") {\n                if (blockElement && blockElement.innerHTML.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                    blockElement.outerHTML = tableHTML_1;\n                }\n                else {\n                    document.execCommand(\"insertHTML\", false, tableHTML_1);\n                }\n                range.selectNode(vditor.wysiwyg.element.querySelector(\"wbr\").previousSibling);\n                vditor.wysiwyg.element.querySelector(\"wbr\").remove();\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else {\n                tableHTML_1 = \"<table data-block=\\\"0\\\"><thead><tr>\";\n                var tableText = range.toString().split(\"\\n\");\n                var delimiter_1 = tableText[0].split(\",\").length > tableText[0].split(\"\\t\").length ? \",\" : \"\\t\";\n                tableText.forEach(function (rows, index) {\n                    if (index === 0) {\n                        rows.split(delimiter_1).forEach(function (header, subIndex) {\n                            if (subIndex === 0) {\n                                tableHTML_1 += \"<th>\" + header + \"<wbr></th>\";\n                            }\n                            else {\n                                tableHTML_1 += \"<th>\" + header + \"</th>\";\n                            }\n                        });\n                        tableHTML_1 += \"</tr></thead>\";\n                    }\n                    else {\n                        if (index === 1) {\n                            tableHTML_1 += \"<tbody><tr>\";\n                        }\n                        else {\n                            tableHTML_1 += \"<tr>\";\n                        }\n                        rows.split(delimiter_1).forEach(function (cell) {\n                            tableHTML_1 += \"<td>\" + cell + \"</td>\";\n                        });\n                        tableHTML_1 += \"</tr>\";\n                    }\n                });\n                tableHTML_1 += \"</tbody></table>\";\n                document.execCommand(\"insertHTML\", false, tableHTML_1);\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--disabled\");\n        }\n        else if (commandName === \"line\") {\n            if (blockElement) {\n                var hrHTML = '<hr data-block=\"0\"><p data-block=\"0\"><wbr>\\n</p>';\n                if (blockElement.innerHTML.trim() === \"\") {\n                    blockElement.outerHTML = hrHTML;\n                }\n                else {\n                    blockElement.insertAdjacentHTML(\"afterend\", hrHTML);\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else {\n            // bold, italic, strike\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n            if (commandName === \"strike\") {\n                commandName = \"strikeThrough\";\n            }\n            if (range.toString() === \"\" && (commandName === \"bold\" || commandName === \"italic\" || commandName === \"strikeThrough\")) {\n                var tagName = \"strong\";\n                if (commandName === \"italic\") {\n                    tagName = \"em\";\n                }\n                else if (commandName === \"strikeThrough\") {\n                    tagName = \"s\";\n                }\n                var node = document.createElement(tagName);\n                node.textContent = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(node);\n                if (node.previousSibling && node.previousSibling.textContent === constants/* Constants.ZWSP */.g.ZWSP) {\n                    // 移除多层嵌套中的 zwsp\n                    node.previousSibling.textContent = \"\";\n                }\n                range.setStart(node.firstChild, 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else {\n                document.execCommand(commandName, false, \"\");\n            }\n        }\n    }\n    if (useHighlight) {\n        highlightToolbarWYSIWYG(vditor);\n    }\n    if (useRender) {\n        afterRenderEvent(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/MenuItem.ts\n\n\n\n\n\n\nvar MenuItem = /** @class */ (function () {\n    function MenuItem(vditor, menuItem) {\n        var _a;\n        var _this = this;\n        this.element = document.createElement(\"div\");\n        if (menuItem.className) {\n            (_a = this.element.classList).add.apply(_a, menuItem.className.split(\" \"));\n        }\n        var hotkey = menuItem.hotkey ? \" <\" + (0,compatibility/* updateHotkeyTip */.ns)(menuItem.hotkey) + \">\" : \"\";\n        if (menuItem.level === 2) {\n            hotkey = menuItem.hotkey ? \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(menuItem.hotkey) + \"&gt;\" : \"\";\n        }\n        var tip = menuItem.tip ? menuItem.tip + hotkey : \"\" + window.VditorI18n[menuItem.name] + hotkey;\n        var tagName = menuItem.name === \"upload\" ? \"div\" : \"button\";\n        if (menuItem.level === 2) {\n            this.element.innerHTML = \"<\" + tagName + \" data-type=\\\"\" + menuItem.name + \"\\\">\" + tip + \"</\" + tagName + \">\";\n        }\n        else {\n            this.element.classList.add(\"vditor-toolbar__item\");\n            var iconElement = document.createElement(tagName);\n            iconElement.setAttribute(\"data-type\", menuItem.name);\n            iconElement.className = \"vditor-tooltipped vditor-tooltipped__\" + menuItem.tipPosition;\n            iconElement.setAttribute(\"aria-label\", tip);\n            iconElement.innerHTML = menuItem.icon;\n            this.element.appendChild(iconElement);\n        }\n        if (!menuItem.prefix) {\n            return;\n        }\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            if (vditor.currentMode === \"wysiwyg\") {\n                toolbarEvent(vditor, _this.element.children[0], event);\n            }\n            else if (vditor.currentMode === \"ir\") {\n                process_processToolbar(vditor, _this.element.children[0], menuItem.prefix || \"\", menuItem.suffix || \"\");\n            }\n            else {\n                processToolbar(vditor, _this.element.children[0], menuItem.prefix || \"\", menuItem.suffix || \"\");\n            }\n        });\n    }\n    return MenuItem;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/EditMode.ts\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar setEditMode = function (vditor, type, event) {\n    var markdownText;\n    if (typeof event !== \"string\") {\n        hidePanel(vditor, [\"subToolbar\", \"hint\"]);\n        event.preventDefault();\n        markdownText = getMarkdown(vditor);\n    }\n    else {\n        markdownText = event;\n    }\n    if (vditor.currentMode === type && typeof event !== \"string\") {\n        return;\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n    if (vditor.options.preview.mode === \"both\" && type === \"sv\") {\n        vditor.preview.element.style.display = \"block\";\n    }\n    else {\n        vditor.preview.element.style.display = \"none\";\n    }\n    enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n    removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n    disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n    if (type === \"ir\") {\n        hideToolbar(vditor.toolbar.elements, [\"both\"]);\n        showToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.sv.element.style.display = \"none\";\n        vditor.wysiwyg.element.parentElement.style.display = \"none\";\n        vditor.ir.element.parentElement.style.display = \"block\";\n        vditor.lute.SetVditorIR(true);\n        vditor.lute.SetVditorWYSIWYG(false);\n        vditor.lute.SetVditorSV(false);\n        vditor.currentMode = \"ir\";\n        vditor.ir.element.innerHTML = vditor.lute.Md2VditorIRDOM(markdownText);\n        process_processAfterRender(vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        setPadding(vditor);\n        vditor.ir.element.querySelectorAll(\".vditor-ir__preview[data-render='2']\").forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        vditor.ir.element.querySelectorAll(\".vditor-toc\").forEach(function (item) {\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n    }\n    else if (type === \"wysiwyg\") {\n        hideToolbar(vditor.toolbar.elements, [\"both\"]);\n        showToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.sv.element.style.display = \"none\";\n        vditor.wysiwyg.element.parentElement.style.display = \"block\";\n        vditor.ir.element.parentElement.style.display = \"none\";\n        vditor.lute.SetVditorIR(false);\n        vditor.lute.SetVditorWYSIWYG(true);\n        vditor.lute.SetVditorSV(false);\n        vditor.currentMode = \"wysiwyg\";\n        setPadding(vditor);\n        renderDomByMd(vditor, markdownText, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        vditor.wysiwyg.element.querySelectorAll(\".vditor-toc\").forEach(function (item) {\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n        vditor.wysiwyg.popover.style.display = \"none\";\n    }\n    else if (type === \"sv\") {\n        showToolbar(vditor.toolbar.elements, [\"both\"]);\n        hideToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.wysiwyg.element.parentElement.style.display = \"none\";\n        vditor.ir.element.parentElement.style.display = \"none\";\n        if (vditor.options.preview.mode === \"both\") {\n            vditor.sv.element.style.display = \"block\";\n        }\n        else if (vditor.options.preview.mode === \"editor\") {\n            vditor.sv.element.style.display = \"block\";\n        }\n        vditor.lute.SetVditorIR(false);\n        vditor.lute.SetVditorWYSIWYG(false);\n        vditor.lute.SetVditorSV(true);\n        vditor.currentMode = \"sv\";\n        var svHTML = processSpinVditorSVDOM(markdownText, vditor);\n        if (svHTML === \"<div data-block='0'></div>\") {\n            // https://github.com/Vanessa219/vditor/issues/654 SV 模式 Placeholder 显示问题\n            svHTML = \"\";\n        }\n        vditor.sv.element.innerHTML = svHTML;\n        processAfterRender(vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        setPadding(vditor);\n    }\n    vditor.undo.resetIcon(vditor);\n    if (typeof event !== \"string\") {\n        // 初始化不 focus\n        vditor[vditor.currentMode].element.focus();\n        highlightToolbar(vditor);\n    }\n    renderToc(vditor);\n    setTypewriterPosition(vditor);\n    if (vditor.toolbar.elements[\"edit-mode\"]) {\n        vditor.toolbar.elements[\"edit-mode\"].querySelectorAll(\"button\").forEach(function (item) {\n            item.classList.remove(\"vditor-menu--current\");\n        });\n        vditor.toolbar.elements[\"edit-mode\"].querySelector(\"button[data-mode=\\\"\" + vditor.currentMode + \"\\\"]\").classList.add(\"vditor-menu--current\");\n    }\n    vditor.outline.toggle(vditor, vditor.currentMode !== \"sv\" && vditor.options.outline.enable);\n};\nvar EditMode = /** @class */ (function (_super) {\n    __extends(EditMode, _super);\n    function EditMode(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\" + (menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        panelElement.innerHTML = \"<button data-mode=\\\"wysiwyg\\\">\" + window.VditorI18n.wysiwyg + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘7\") + \"></button>\\n<button data-mode=\\\"ir\\\">\" + window.VditorI18n.instantRendering + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘8\") + \"></button>\\n<button data-mode=\\\"sv\\\">\" + window.VditorI18n.splitView + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘9\") + \"></button>\";\n        _this.element.appendChild(panelElement);\n        _this._bindEvent(vditor, panelElement, menuItem);\n        return _this;\n    }\n    EditMode.prototype._bindEvent = function (vditor, panelElement, menuItem) {\n        var actionBtn = this.element.children[0];\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        panelElement.children.item(0).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // wysiwyg\n            setEditMode(vditor, \"wysiwyg\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n        panelElement.children.item(1).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // ir\n            setEditMode(vditor, \"ir\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n        panelElement.children.item(2).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // markdown\n            setEditMode(vditor, \"sv\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n    };\n    return EditMode;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/util/getSelectText.ts\n\nvar getSelectText = function (editor, range) {\n    if ((0,selection/* selectIsEditor */.Gb)(editor, range)) {\n        return getSelection().toString();\n    }\n    return \"\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/editorCommonEvent.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar focusEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"focus\", function () {\n        if (vditor.options.focus) {\n            vditor.options.focus(getMarkdown(vditor));\n        }\n        hidePanel(vditor, [\"subToolbar\"]);\n    });\n};\nvar dblclickEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"dblclick\", function (event) {\n        if (event.target.tagName === \"IMG\") {\n            (0,preview_image/* previewImage */.E)(event.target, vditor.options.lang, vditor.options.theme);\n        }\n    });\n};\nvar blurEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"blur\", function (event) {\n        if (vditor.currentMode === \"ir\") {\n            var expandElement = vditor.ir.element.querySelector(\".vditor-ir__node--expand\");\n            if (expandElement) {\n                expandElement.classList.remove(\"vditor-ir__node--expand\");\n            }\n        }\n        else if (vditor.currentMode === \"wysiwyg\" &&\n            !vditor.wysiwyg.selectPopover.contains(event.relatedTarget)) {\n            vditor.wysiwyg.hideComment();\n        }\n        vditor[vditor.currentMode].range = (0,selection/* getEditorRange */.zh)(vditor);\n        if (vditor.options.blur) {\n            vditor.options.blur(getMarkdown(vditor));\n        }\n    });\n};\nvar dropEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"dragstart\", function (event) {\n        // 选中编辑器中的文字进行拖拽\n        event.dataTransfer.setData(constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR, constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR);\n    });\n    editorElement.addEventListener(\"drop\", function (event) {\n        if (event.dataTransfer.getData(constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR)) {\n            // 编辑器内选中文字拖拽\n            execAfterRender(vditor);\n        }\n        else if (event.dataTransfer.types[0] === \"Files\" || event.dataTransfer.types.includes(\"text/html\")) {\n            // 外部文件拖入编辑器中或者编辑器内选中文字拖拽\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        }\n    });\n};\nvar copyEvent = function (vditor, editorElement, copy) {\n    editorElement.addEventListener(\"copy\", function (event) { return copy(event, vditor); });\n};\nvar cutEvent = function (vditor, editorElement, copy) {\n    editorElement.addEventListener(\"cut\", function (event) {\n        copy(event, vditor);\n        // 获取 comment\n        if (vditor.options.comment.enable && vditor.currentMode === \"wysiwyg\") {\n            vditor.wysiwyg.getComments(vditor);\n        }\n        document.execCommand(\"delete\");\n    });\n};\nvar scrollCenter = function (vditor) {\n    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n        vditor.options.comment.adjustTop(vditor.wysiwyg.getComments(vditor, true));\n    }\n    if (!vditor.options.typewriterMode) {\n        return;\n    }\n    var editorElement = vditor[vditor.currentMode].element;\n    var cursorTop = (0,selection/* getCursorPosition */.Ny)(editorElement).top;\n    if (typeof vditor.options.height === \"string\" && !vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        window.scrollTo(window.scrollX, cursorTop + vditor.element.offsetTop + vditor.toolbar.element.offsetHeight - window.innerHeight / 2 + 10);\n    }\n    if (typeof vditor.options.height === \"number\" || vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        editorElement.scrollTop = cursorTop + editorElement.scrollTop - editorElement.clientHeight / 2 + 10;\n    }\n};\nvar hotkeyEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"keydown\", function (event) {\n        // hint: 上下选择\n        if ((vditor.options.hint.extend.length > 1 || vditor.toolbar.elements.emoji) &&\n            vditor.hint.select(event, vditor)) {\n            return;\n        }\n        // 重置 comment\n        if (vditor.options.comment.enable && vditor.currentMode === \"wysiwyg\" &&\n            (event.key === \"Backspace\" || matchHotKey(\"⌘X\", event))) {\n            vditor.wysiwyg.getComments(vditor);\n        }\n        if (vditor.currentMode === \"sv\") {\n            if (processKeydown_processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        else if (vditor.currentMode === \"wysiwyg\") {\n            if (wysiwyg_processKeydown_processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        else if (vditor.currentMode === \"ir\") {\n            if (processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        if (vditor.options.ctrlEnter && matchHotKey(\"⌘Enter\", event)) {\n            vditor.options.ctrlEnter(getMarkdown(vditor));\n            event.preventDefault();\n            return;\n        }\n        // undo\n        if (matchHotKey(\"⌘Z\", event) && !vditor.toolbar.elements.undo) {\n            vditor.undo.undo(vditor);\n            event.preventDefault();\n            return;\n        }\n        // redo\n        if (matchHotKey(\"⌘Y\", event) && !vditor.toolbar.elements.redo) {\n            vditor.undo.redo(vditor);\n            event.preventDefault();\n            return;\n        }\n        // esc\n        if (event.key === \"Escape\") {\n            if (vditor.hint.element.style.display === \"block\") {\n                vditor.hint.element.style.display = \"none\";\n            }\n            else if (vditor.options.esc && !event.isComposing) {\n                vditor.options.esc(getMarkdown(vditor));\n            }\n            event.preventDefault();\n            return;\n        }\n        // h1 - h6 hotkey\n        if ((0,compatibility/* isCtrl */.yl)(event) && event.altKey && !event.shiftKey && /^Digit[1-6]$/.test(event.code)) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                var tagName = event.code.replace(\"Digit\", \"H\");\n                if ((0,hasClosest/* hasClosestByMatchTag */.lG)(getSelection().getRangeAt(0).startContainer, tagName)) {\n                    removeHeading(vditor);\n                }\n                else {\n                    setHeading(vditor, tagName);\n                }\n                afterRenderEvent(vditor);\n            }\n            else if (vditor.currentMode === \"sv\") {\n                processHeading(vditor, \"#\".repeat(parseInt(event.code.replace(\"Digit\", \"\"), 10)) + \" \");\n            }\n            else if (vditor.currentMode === \"ir\") {\n                process_processHeading(vditor, \"#\".repeat(parseInt(event.code.replace(\"Digit\", \"\"), 10)) + \" \");\n            }\n            event.preventDefault();\n            return true;\n        }\n        // toggle edit mode\n        if ((0,compatibility/* isCtrl */.yl)(event) && event.altKey && !event.shiftKey && /^Digit[7-9]$/.test(event.code)) {\n            if (event.code === \"Digit7\") {\n                setEditMode(vditor, \"wysiwyg\", event);\n            }\n            else if (event.code === \"Digit8\") {\n                setEditMode(vditor, \"ir\", event);\n            }\n            else if (event.code === \"Digit9\") {\n                setEditMode(vditor, \"sv\", event);\n            }\n            return true;\n        }\n        // toolbar action\n        vditor.options.toolbar.find(function (menuItem) {\n            if (!menuItem.hotkey || menuItem.toolbar) {\n                if (menuItem.toolbar) {\n                    var sub = menuItem.toolbar.find(function (subMenuItem) {\n                        if (!subMenuItem.hotkey) {\n                            return false;\n                        }\n                        if (matchHotKey(subMenuItem.hotkey, event)) {\n                            vditor.toolbar.elements[subMenuItem.name].children[0]\n                                .dispatchEvent(new CustomEvent((0,compatibility/* getEventName */.Le)()));\n                            event.preventDefault();\n                            return true;\n                        }\n                    });\n                    return sub ? true : false;\n                }\n                return false;\n            }\n            if (matchHotKey(menuItem.hotkey, event)) {\n                vditor.toolbar.elements[menuItem.name].children[0].dispatchEvent(new CustomEvent((0,compatibility/* getEventName */.Le)()));\n                event.preventDefault();\n                return true;\n            }\n        });\n    });\n};\nvar selectEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"selectstart\", function (event) {\n        editorElement.onmouseup = function () {\n            setTimeout(function () {\n                var selectText = getSelectText(vditor[vditor.currentMode].element);\n                if (selectText.trim()) {\n                    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n                        if (!(0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"footnotes-block\") &&\n                            !(0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"link-ref-defs-block\")) {\n                            vditor.wysiwyg.showComment();\n                        }\n                        else {\n                            vditor.wysiwyg.hideComment();\n                        }\n                    }\n                    if (vditor.options.select) {\n                        vditor.options.select(selectText);\n                    }\n                }\n                else {\n                    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n                        vditor.wysiwyg.hideComment();\n                    }\n                }\n            });\n        };\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/sv/process.ts\n\n\n\n\n\n\n\n\nvar processPaste = function (vditor, text) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    range.extractContents();\n    range.insertNode(document.createTextNode(Lute.Caret));\n    range.insertNode(document.createTextNode(text));\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n    if (!blockElement) {\n        blockElement = vditor.sv.element;\n    }\n    var html = \"<div data-block='0'>\" +\n        vditor.lute.Md2VditorSVDOM(blockElement.textContent).replace(/<span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span><span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span></g, '<span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span><span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span></div><div data-block=\"0\"><') +\n        \"</div>\";\n    if (blockElement.isEqualNode(vditor.sv.element)) {\n        blockElement.innerHTML = html;\n    }\n    else {\n        blockElement.outerHTML = html;\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    scrollCenter(vditor);\n};\nvar getSideByType = function (spanNode, type, isPrevious) {\n    if (isPrevious === void 0) { isPrevious = true; }\n    var sideElement = spanNode;\n    if (sideElement.nodeType === 3) {\n        sideElement = sideElement.parentElement;\n    }\n    while (sideElement) {\n        if (sideElement.getAttribute(\"data-type\") === type) {\n            return sideElement;\n        }\n        if (isPrevious) {\n            sideElement = sideElement.previousElementSibling;\n        }\n        else {\n            sideElement = sideElement.nextElementSibling;\n        }\n    }\n    return false;\n};\nvar processSpinVditorSVDOM = function (html, vditor) {\n    log(\"SpinVditorSVDOM\", html, \"argument\", vditor.options.debugger);\n    html = \"<div data-block='0'>\" +\n        vditor.lute.SpinVditorSVDOM(html).replace(/<span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span><span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span></g, '<span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span><span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span></div><div data-block=\"0\"><') +\n        \"</div>\";\n    log(\"SpinVditorSVDOM\", html, \"result\", vditor.options.debugger);\n    return html;\n};\nvar processPreviousMarkers = function (spanElement) {\n    var spanType = spanElement.getAttribute(\"data-type\");\n    var previousElement = spanElement.previousElementSibling;\n    // 有内容的子列表/标题，在其 marker 后换行\n    var markerText = (spanType && spanType !== \"text\" && spanType !== \"table\" && spanType !== \"heading-marker\" &&\n        spanType !== \"newline\" && spanType !== \"yaml-front-matter-open-marker\" && spanType !== \"yaml-front-matter-close-marker\"\n        && spanType !== \"code-block-info\" && spanType !== \"code-block-close-marker\" && spanType !== \"code-block-open-marker\") ?\n        spanElement.textContent : \"\";\n    var hasNL = false;\n    if (spanType === \"newline\") {\n        hasNL = true;\n    }\n    while (previousElement && !hasNL) {\n        var previousType = previousElement.getAttribute(\"data-type\");\n        if (previousType === \"li-marker\" || previousType === \"blockquote-marker\" || previousType === \"task-marker\" ||\n            previousType === \"padding\") {\n            var previousText = previousElement.textContent;\n            if (previousType === \"li-marker\" &&\n                (spanType === \"code-block-open-marker\" || spanType === \"code-block-info\")) {\n                // https://github.com/Vanessa219/vditor/issues/586\n                markerText = previousText.replace(/\\S/g, \" \") + markerText;\n            }\n            else if (spanType === \"code-block-close-marker\" &&\n                previousElement.nextElementSibling.isSameNode(spanElement)) {\n                // https://github.com/Vanessa219/vditor/issues/594\n                var openMarker = getSideByType(spanElement, \"code-block-open-marker\");\n                if (openMarker && openMarker.previousElementSibling) {\n                    previousElement = openMarker.previousElementSibling;\n                    markerText = previousText + markerText;\n                }\n            }\n            else {\n                markerText = previousText + markerText;\n            }\n        }\n        else if (previousType === \"newline\") {\n            hasNL = true;\n        }\n        previousElement = previousElement.previousElementSibling;\n    }\n    return markerText;\n};\nvar processAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        vditor.hint.render(vditor);\n    }\n    vditor.preview.render(vditor);\n    var text = getMarkdown(vditor);\n    if (typeof vditor.options.input === \"function\" && options.enableInput) {\n        vditor.options.input(text);\n    }\n    if (vditor.options.counter.enable) {\n        vditor.counter.render(vditor, text);\n    }\n    if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n        localStorage.setItem(vditor.options.cache.id, text);\n        if (vditor.options.cache.after) {\n            vditor.options.cache.after(text);\n        }\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n    clearTimeout(vditor.sv.processTimeoutId);\n    vditor.sv.processTimeoutId = window.setTimeout(function () {\n        if (options.enableAddUndoStack && !vditor.sv.composingLock) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\nvar processHeading = function (vditor, value) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"SPAN\");\n    if (headingElement && headingElement.textContent.trim() !== \"\") {\n        value = \"\\n\" + value;\n    }\n    range.collapse(true);\n    document.execCommand(\"insertHTML\", false, value);\n};\nvar processToolbar = function (vditor, actionBtn, prefix, suffix) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    // 添加\n    if (vditor.sv.element.childNodes.length === 0) {\n        vditor.sv.element.innerHTML = \"<span data-type=\\\"p\\\" data-block=\\\"0\\\"><span data-type=\\\"text\\\"><wbr></span></span><span data-type=\\\"newline\\\"><br><span style=\\\"display: none\\\">\\n</span></span>\";\n        (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    var spanElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"SPAN\");\n    if (!blockElement) {\n        return;\n    }\n    if (commandName === \"link\") {\n        var html = void 0;\n        if (range.toString() === \"\") {\n            html = \"\" + prefix + Lute.Caret + suffix;\n        }\n        else {\n            html = \"\" + prefix + range.toString() + suffix.replace(\")\", Lute.Caret + \")\");\n        }\n        document.execCommand(\"insertHTML\", false, html);\n        return;\n    }\n    else if (commandName === \"italic\" || commandName === \"bold\" || commandName === \"strike\" ||\n        commandName === \"inline-code\" || commandName === \"code\" || commandName === \"table\" || commandName === \"line\") {\n        var html = void 0;\n        // https://github.com/Vanessa219/vditor/issues/563 代码块不需要后面的 ```\n        if (range.toString() === \"\") {\n            html = \"\" + prefix + Lute.Caret + (commandName === \"code\" ? \"\" : suffix);\n        }\n        else {\n            html = \"\" + prefix + range.toString() + Lute.Caret + (commandName === \"code\" ? \"\" : suffix);\n        }\n        if (commandName === \"table\" || (commandName === \"code\" && spanElement && spanElement.textContent !== \"\")) {\n            html = \"\\n\\n\" + html;\n        }\n        else if (commandName === \"line\") {\n            html = \"\\n\\n\" + prefix + \"\\n\" + Lute.Caret;\n        }\n        document.execCommand(\"insertHTML\", false, html);\n        return;\n    }\n    else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\" ||\n        commandName === \"quote\") {\n        if (spanElement) {\n            var marker = \"* \";\n            if (commandName === \"check\") {\n                marker = \"* [ ] \";\n            }\n            else if (commandName === \"ordered-list\") {\n                marker = \"1. \";\n            }\n            else if (commandName === \"quote\") {\n                marker = \"> \";\n            }\n            var newLine = getSideByType(spanElement, \"newline\");\n            if (newLine) {\n                newLine.insertAdjacentText(\"afterend\", marker);\n            }\n            else {\n                blockElement.insertAdjacentText(\"afterbegin\", marker);\n            }\n            inputEvent(vditor);\n            return;\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    processAfterRender(vditor);\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/getElement.ts\nvar getElement = function (vditor) {\n    switch (vditor.currentMode) {\n        case \"ir\":\n            return vditor.ir.element;\n        case \"wysiwyg\":\n            return vditor.wysiwyg.element;\n        case \"sv\":\n            return vditor.sv.element;\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/setHeaders.ts\nvar setHeaders = function (vditor, xhr) {\n    if (vditor.options.upload.setHeaders) {\n        vditor.options.upload.headers = vditor.options.upload.setHeaders();\n    }\n    if (vditor.options.upload.headers) {\n        Object.keys(vditor.options.upload.headers).forEach(function (key) {\n            xhr.setRequestHeader(key, vditor.options.upload.headers[key]);\n        });\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/index.ts\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\nvar Upload = /** @class */ (function () {\n    function Upload() {\n        this.isUploading = false;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-upload\";\n    }\n    return Upload;\n}());\nvar validateFile = function (vditor, files) {\n    vditor.tip.hide();\n    var uploadFileList = [];\n    var errorTip = \"\";\n    var uploadingStr = \"\";\n    var lang = vditor.options.lang;\n    var options = vditor.options;\n    var _loop_1 = function (iMax, i) {\n        var file = files[i];\n        var validate = true;\n        if (!file.name) {\n            errorTip += \"<li>\" + window.VditorI18n.nameEmpty + \"</li>\";\n            validate = false;\n        }\n        if (file.size > vditor.options.upload.max) {\n            errorTip += \"<li>\" + file.name + \" \" + window.VditorI18n.over + \" \" + vditor.options.upload.max / 1024 / 1024 + \"M</li>\";\n            validate = false;\n        }\n        var lastIndex = file.name.lastIndexOf(\".\");\n        var fileExt = file.name.substr(lastIndex);\n        var filename = vditor.options.upload.filename(file.name.substr(0, lastIndex)) + fileExt;\n        if (vditor.options.upload.accept) {\n            var isAccept = vditor.options.upload.accept.split(\",\").some(function (item) {\n                var type = item.trim();\n                if (type.indexOf(\".\") === 0) {\n                    if (fileExt.toLowerCase() === type.toLowerCase()) {\n                        return true;\n                    }\n                }\n                else {\n                    if (file.type.split(\"/\")[0] === type.split(\"/\")[0]) {\n                        return true;\n                    }\n                }\n                return false;\n            });\n            if (!isAccept) {\n                errorTip += \"<li>\" + file.name + \" \" + window.VditorI18n.fileTypeError + \"</li>\";\n                validate = false;\n            }\n        }\n        if (validate) {\n            uploadFileList.push(file);\n            uploadingStr += \"<li>\" + filename + \" \" + window.VditorI18n.uploading + \"</li>\";\n        }\n    };\n    for (var iMax = files.length, i = 0; i < iMax; i++) {\n        _loop_1(iMax, i);\n    }\n    vditor.tip.show(\"<ul>\" + errorTip + uploadingStr + \"</ul>\");\n    return uploadFileList;\n};\nvar genUploadedLabel = function (responseText, vditor) {\n    var editorElement = getElement(vditor);\n    editorElement.focus();\n    var response = JSON.parse(responseText);\n    var errorTip = \"\";\n    if (response.code === 1) {\n        errorTip = \"\" + response.msg;\n    }\n    if (response.data.errFiles && response.data.errFiles.length > 0) {\n        errorTip = \"<ul><li>\" + errorTip + \"</li>\";\n        response.data.errFiles.forEach(function (data) {\n            var lastIndex = data.lastIndexOf(\".\");\n            var filename = vditor.options.upload.filename(data.substr(0, lastIndex)) + data.substr(lastIndex);\n            errorTip += \"<li>\" + filename + \" \" + window.VditorI18n.uploadError + \"</li>\";\n        });\n        errorTip += \"</ul>\";\n    }\n    if (errorTip) {\n        vditor.tip.show(errorTip);\n    }\n    else {\n        vditor.tip.hide();\n    }\n    var succFileText = \"\";\n    Object.keys(response.data.succMap).forEach(function (key) {\n        var path = response.data.succMap[key];\n        var lastIndex = key.lastIndexOf(\".\");\n        var type = key.substr(lastIndex);\n        var filename = vditor.options.upload.filename(key.substr(0, lastIndex)) + type;\n        type = type.toLowerCase();\n        if (type.indexOf(\".wav\") === 0 || type.indexOf(\".mp3\") === 0 || type.indexOf(\".ogg\") === 0) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<div class=\\\"vditor-wysiwyg__block\\\" data-type=\\\"html-block\\\"\\n data-block=\\\"0\\\"><pre><code>&lt;audio controls=\\\"controls\\\" src=\\\"\" + path + \"\\\"&gt;&lt;/audio&gt;</code></pre>\";\n            }\n            else if (vditor.currentMode === \"ir\") {\n                succFileText += \"<audio controls=\\\"controls\\\" src=\\\"\" + path + \"\\\"></audio>\\n\";\n            }\n            else {\n                succFileText += \"[\" + filename + \"](\" + path + \")\\n\";\n            }\n        }\n        else if (type.indexOf(\".apng\") === 0\n            || type.indexOf(\".bmp\") === 0\n            || type.indexOf(\".gif\") === 0\n            || type.indexOf(\".ico\") === 0 || type.indexOf(\".cur\") === 0\n            || type.indexOf(\".jpg\") === 0 || type.indexOf(\".jpeg\") === 0 || type.indexOf(\".jfif\") === 0 || type.indexOf(\".pjp\") === 0 || type.indexOf(\".pjpeg\") === 0\n            || type.indexOf(\".png\") === 0\n            || type.indexOf(\".svg\") === 0\n            || type.indexOf(\".webp\") === 0) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<img alt=\\\"\" + filename + \"\\\" src=\\\"\" + path + \"\\\">\";\n            }\n            else {\n                succFileText += \"![\" + filename + \"](\" + path + \")\\n\";\n            }\n        }\n        else {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<a href=\\\"\" + path + \"\\\">\" + filename + \"</a>\";\n            }\n            else {\n                succFileText += \"[\" + filename + \"](\" + path + \")\\n\";\n            }\n        }\n    });\n    (0,selection/* setSelectionFocus */.Hc)(vditor.upload.range);\n    document.execCommand(\"insertHTML\", false, succFileText);\n    vditor.upload.range = getSelection().getRangeAt(0).cloneRange();\n};\nvar uploadFiles = function (vditor, files, element) { return __awaiter(void 0, void 0, void 0, function () {\n    var fileList, filesMax, i, fileItem, isValidate, isValidate, editorElement, validateResult, formData, extraData, _i, _a, key, i, iMax, xhr;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                fileList = [];\n                filesMax = vditor.options.upload.multiple === true ? files.length : 1;\n                for (i = 0; i < filesMax; i++) {\n                    fileItem = files[i];\n                    if (fileItem instanceof DataTransferItem) {\n                        fileItem = fileItem.getAsFile();\n                    }\n                    fileList.push(fileItem);\n                }\n                if (vditor.options.upload.handler) {\n                    isValidate = vditor.options.upload.handler(fileList);\n                    if (typeof isValidate === \"string\") {\n                        vditor.tip.show(isValidate);\n                        return [2 /*return*/];\n                    }\n                    return [2 /*return*/];\n                }\n                if (!vditor.options.upload.url || !vditor.upload) {\n                    if (element) {\n                        element.value = \"\";\n                    }\n                    vditor.tip.show(\"please config: options.upload.url\");\n                    return [2 /*return*/];\n                }\n                if (!vditor.options.upload.file) return [3 /*break*/, 2];\n                return [4 /*yield*/, vditor.options.upload.file(fileList)];\n            case 1:\n                fileList = _b.sent();\n                _b.label = 2;\n            case 2:\n                if (vditor.options.upload.validate) {\n                    isValidate = vditor.options.upload.validate(fileList);\n                    if (typeof isValidate === \"string\") {\n                        vditor.tip.show(isValidate);\n                        return [2 /*return*/];\n                    }\n                }\n                editorElement = getElement(vditor);\n                vditor.upload.range = (0,selection/* getEditorRange */.zh)(vditor);\n                validateResult = validateFile(vditor, fileList);\n                if (validateResult.length === 0) {\n                    if (element) {\n                        element.value = \"\";\n                    }\n                    return [2 /*return*/];\n                }\n                formData = new FormData();\n                extraData = vditor.options.upload.extraData;\n                for (_i = 0, _a = Object.keys(extraData); _i < _a.length; _i++) {\n                    key = _a[_i];\n                    formData.append(key, extraData[key]);\n                }\n                for (i = 0, iMax = validateResult.length; i < iMax; i++) {\n                    formData.append(vditor.options.upload.fieldName, validateResult[i]);\n                }\n                xhr = new XMLHttpRequest();\n                xhr.open(\"POST\", vditor.options.upload.url);\n                if (vditor.options.upload.token) {\n                    xhr.setRequestHeader(\"X-Upload-Token\", vditor.options.upload.token);\n                }\n                if (vditor.options.upload.withCredentials) {\n                    xhr.withCredentials = true;\n                }\n                setHeaders(vditor, xhr);\n                vditor.upload.isUploading = true;\n                editorElement.setAttribute(\"contenteditable\", \"false\");\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState === XMLHttpRequest.DONE) {\n                        vditor.upload.isUploading = false;\n                        editorElement.setAttribute(\"contenteditable\", \"true\");\n                        if (xhr.status >= 200 && xhr.status < 300) {\n                            if (vditor.options.upload.success) {\n                                vditor.options.upload.success(editorElement, xhr.responseText);\n                            }\n                            else {\n                                var responseText = xhr.responseText;\n                                if (vditor.options.upload.format) {\n                                    responseText = vditor.options.upload.format(files, xhr.responseText);\n                                }\n                                genUploadedLabel(responseText, vditor);\n                            }\n                        }\n                        else {\n                            if (vditor.options.upload.error) {\n                                vditor.options.upload.error(xhr.responseText);\n                            }\n                            else {\n                                vditor.tip.show(xhr.responseText);\n                            }\n                        }\n                        if (element) {\n                            element.value = \"\";\n                        }\n                        vditor.upload.element.style.display = \"none\";\n                    }\n                };\n                xhr.upload.onprogress = function (event) {\n                    if (!event.lengthComputable) {\n                        return;\n                    }\n                    var progress = event.loaded / event.total * 100;\n                    vditor.upload.element.style.display = \"block\";\n                    var progressBar = vditor.upload.element;\n                    progressBar.style.width = progress + \"%\";\n                };\n                xhr.send(formData);\n                return [2 /*return*/];\n        }\n    });\n}); };\n\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/input.ts\n\n\n\n\n\n\n\n\nvar input_input = function (vditor, range, event) {\n    var _a;\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        // 使用顶级块元素，应使用 innerHTML\n        blockElement = vditor.wysiwyg.element;\n    }\n    if (event && event.inputType !== \"formatItalic\"\n        && event.inputType !== \"deleteByDrag\"\n        && event.inputType !== \"insertFromDrop\"\n        && event.inputType !== \"formatBold\"\n        && event.inputType !== \"formatRemove\"\n        && event.inputType !== \"formatStrikeThrough\"\n        && event.inputType !== \"insertUnorderedList\"\n        && event.inputType !== \"insertOrderedList\"\n        && event.inputType !== \"formatOutdent\"\n        && event.inputType !== \"formatIndent\"\n        && event.inputType !== \"\" // document.execCommand('unlink', false)\n        || !event) {\n        var previousAEmptyElement = previoueIsEmptyA(range.startContainer);\n        if (previousAEmptyElement) {\n            // 链接结尾回车不应该复制到下一行 https://github.com/Vanessa219/vditor/issues/163\n            previousAEmptyElement.remove();\n        }\n        // 保存光标\n        vditor.wysiwyg.element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        // 在行首进行删除，后面的元素会带有样式，需清除\n        blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n            item.removeAttribute(\"style\");\n        });\n        // 移除空评论\n        blockElement.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n            if (item.textContent.trim() === \"\") {\n                item.classList.remove(\"vditor-comment\", \"vditor-comment--focus\");\n                item.removeAttribute(\"data-cmtids\");\n            }\n        });\n        //  在有评论的行首换行后，该行的前一段会带有评论标识\n        (_a = blockElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n            if (item.textContent.trim() === \"\") {\n                item.classList.remove(\"vditor-comment\", \"vditor-comment--focus\");\n                item.removeAttribute(\"data-cmtids\");\n            }\n        });\n        var html_1 = \"\";\n        if (blockElement.getAttribute(\"data-type\") === \"link-ref-defs-block\") {\n            // 修改链接引用\n            blockElement = vditor.wysiwyg.element;\n        }\n        var isWYSIWYGElement = blockElement.isEqualNode(vditor.wysiwyg.element);\n        var footnoteElement = (0,hasClosest/* hasClosestByAttribute */.a1)(blockElement, \"data-type\", \"footnotes-block\");\n        if (!isWYSIWYGElement) {\n            // 列表需要到最顶层\n            var topListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n            if (topListElement && !footnoteElement) {\n                var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"BLOCKQUOTE\");\n                if (blockquoteElement) {\n                    // li 中有 blockquote 就只渲染 blockquote\n                    blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer) || blockElement;\n                }\n                else {\n                    blockElement = topListElement;\n                }\n            }\n            // 修改脚注\n            if (footnoteElement) {\n                blockElement = footnoteElement;\n            }\n            html_1 = blockElement.outerHTML;\n            if (blockElement.tagName === \"UL\" || blockElement.tagName === \"OL\") {\n                // 如果为列表的话，需要把上下的列表都重绘\n                var listPrevElement = blockElement.previousElementSibling;\n                var listNextElement = blockElement.nextElementSibling;\n                if (listPrevElement && (listPrevElement.tagName === \"UL\" || listPrevElement.tagName === \"OL\")) {\n                    html_1 = listPrevElement.outerHTML + html_1;\n                    listPrevElement.remove();\n                }\n                if (listNextElement && (listNextElement.tagName === \"UL\" || listNextElement.tagName === \"OL\")) {\n                    html_1 = html_1 + listNextElement.outerHTML;\n                    listNextElement.remove();\n                }\n                // firefox 列表回车不会产生新的 list item https://github.com/Vanessa219/vditor/issues/194\n                html_1 = html_1.replace(\"<div><wbr><br></div>\", \"<li><p><wbr><br></p></li>\");\n            }\n            // 添加链接引用\n            vditor.wysiwyg.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item) {\n                if (item && !blockElement.isEqualNode(item)) {\n                    html_1 += item.outerHTML;\n                    item.remove();\n                }\n            });\n            // 添加脚注\n            vditor.wysiwyg.element.querySelectorAll(\"[data-type='footnotes-block']\").forEach(function (item) {\n                if (item && !blockElement.isEqualNode(item)) {\n                    html_1 += item.outerHTML;\n                    item.remove();\n                }\n            });\n        }\n        else {\n            html_1 = blockElement.innerHTML;\n        }\n        // 合并多个 em， strong，s。以防止多个相同元素在一起时不满足 commonmark 规范，出现标记符\n        html_1 = html_1.replace(/<\\/(strong|b)><strong data-marker=\"\\W{2}\">/g, \"\")\n            .replace(/<\\/(em|i)><em data-marker=\"\\W{1}\">/g, \"\")\n            .replace(/<\\/(s|strike)><s data-marker=\"~{1,2}\">/g, \"\");\n        if (html_1 === '<p data-block=\"0\">```<wbr></p>' && vditor.hint.recentLanguage) {\n            html_1 = '<p data-block=\"0\">```<wbr></p>'.replace(\"```\", \"```\" + vditor.hint.recentLanguage);\n        }\n        log(\"SpinVditorDOM\", html_1, \"argument\", vditor.options.debugger);\n        html_1 = vditor.lute.SpinVditorDOM(html_1);\n        log(\"SpinVditorDOM\", html_1, \"result\", vditor.options.debugger);\n        if (isWYSIWYGElement) {\n            blockElement.innerHTML = html_1;\n        }\n        else {\n            blockElement.outerHTML = html_1;\n            if (footnoteElement) {\n                // 更新正文中的 tip\n                var footnoteItemElement = (0,hasClosest/* hasTopClosestByTag */.E2)(vditor.wysiwyg.element.querySelector(\"wbr\"), \"LI\");\n                if (footnoteItemElement) {\n                    var footnoteRefElement = vditor.wysiwyg.element.querySelector(\"sup[data-type=\\\"footnotes-ref\\\"][data-footnotes-label=\\\"\" + footnoteItemElement.getAttribute(\"data-marker\") + \"\\\"]\");\n                    if (footnoteRefElement) {\n                        footnoteRefElement.setAttribute(\"aria-label\", footnoteItemElement.textContent.trim().substr(0, 24));\n                    }\n                }\n            }\n        }\n        var firstLinkRefDefElement_1;\n        var allLinkRefDefsElement = vditor.wysiwyg.element.querySelectorAll(\"[data-type='link-ref-defs-block']\");\n        allLinkRefDefsElement.forEach(function (item, index) {\n            if (index === 0) {\n                firstLinkRefDefElement_1 = item;\n            }\n            else {\n                firstLinkRefDefElement_1.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n                item.remove();\n            }\n        });\n        if (allLinkRefDefsElement.length > 0) {\n            vditor.wysiwyg.element.insertAdjacentElement(\"beforeend\", allLinkRefDefsElement[0]);\n        }\n        // 脚注合并后添加的末尾\n        var firstFootnoteElement_1;\n        var allFootnoteElement = vditor.wysiwyg.element.querySelectorAll(\"[data-type='footnotes-block']\");\n        allFootnoteElement.forEach(function (item, index) {\n            if (index === 0) {\n                firstFootnoteElement_1 = item;\n            }\n            else {\n                firstFootnoteElement_1.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n                item.remove();\n            }\n        });\n        if (allFootnoteElement.length > 0) {\n            vditor.wysiwyg.element.insertAdjacentElement(\"beforeend\", allFootnoteElement[0]);\n        }\n        // 设置光标\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        vditor.wysiwyg.element.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\")\n            .forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        if (event && (event.inputType === \"deleteContentBackward\" || event.inputType === \"deleteContentForward\") &&\n            vditor.options.comment.enable) {\n            vditor.wysiwyg.triggerRemoveComment(vditor);\n            vditor.options.comment.adjustTop(vditor.wysiwyg.getComments(vditor, true));\n        }\n    }\n    renderToc(vditor);\n    afterRenderEvent(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/fixBrowserBehavior.ts\nvar __makeTemplateObject = (undefined && undefined.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar fixBrowserBehavior_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar fixBrowserBehavior_generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// https://github.com/Vanessa219/vditor/issues/508 软键盘无法删除空块\nvar fixGSKeyBackspace = function (event, vditor, startContainer) {\n    if (event.keyCode === 229 && event.code === \"\" && event.key === \"Unidentified\" && vditor.currentMode !== \"sv\") {\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n        // 移动端的标点符号都显示为 299，因此需限定为空删除的条件\n        if (blockElement && blockElement.textContent.trim() === \"\") {\n            vditor[vditor.currentMode].composingLock = true;\n            return false;\n        }\n    }\n    return true;\n};\n// https://github.com/Vanessa219/vditor/issues/361 代码块后输入中文\nvar fixCJKPosition = function (range, vditor, event) {\n    if (event.key === \"Enter\" || event.key === \"Tab\" || event.key === \"Backspace\" || event.key.indexOf(\"Arrow\") > -1\n        || (0,compatibility/* isCtrl */.yl)(event) || event.key === \"Escape\" || event.shiftKey || event.altKey) {\n        return;\n    }\n    var pLiElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"P\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n    if (pLiElement && (0,selection/* getSelectPosition */.im)(pLiElement, vditor[vditor.currentMode].element, range).start === 0) {\n        var zwspNode = document.createTextNode(constants/* Constants.ZWSP */.g.ZWSP);\n        range.insertNode(zwspNode);\n        range.setStartAfter(zwspNode);\n    }\n};\n// https://github.com/Vanessa219/vditor/issues/381 光标在内联数学公式中无法向下移动\nvar fixCursorDownInlineMath = function (range, key) {\n    if (key === \"ArrowDown\" || key === \"ArrowUp\") {\n        var inlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"math-inline\") ||\n            (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"html-entity\") ||\n            (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"html-inline\");\n        if (inlineElement) {\n            if (key === \"ArrowDown\") {\n                range.setStartAfter(inlineElement.parentElement);\n            }\n            if (key === \"ArrowUp\") {\n                range.setStartBefore(inlineElement.parentElement);\n            }\n        }\n    }\n};\nvar insertEmptyBlock = function (vditor, position) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (blockElement) {\n        blockElement.insertAdjacentHTML(position, \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr>\\n</p>\");\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        highlightToolbar(vditor);\n        execAfterRender(vditor);\n    }\n};\nvar isFirstCell = function (cellElement) {\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(cellElement, \"TABLE\");\n    if (tableElement && tableElement.rows[0].cells[0].isSameNode(cellElement)) {\n        return tableElement;\n    }\n    return false;\n};\nvar isLastCell = function (cellElement) {\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(cellElement, \"TABLE\");\n    if (tableElement && tableElement.lastElementChild.lastElementChild.lastElementChild.isSameNode(cellElement)) {\n        return tableElement;\n    }\n    return false;\n};\n// 光标设置到前一个表格中\nvar goPreviousCell = function (cellElement, range, isSelected) {\n    if (isSelected === void 0) { isSelected = true; }\n    var previousElement = cellElement.previousElementSibling;\n    if (!previousElement) {\n        if (cellElement.parentElement.previousElementSibling) {\n            previousElement = cellElement.parentElement.previousElementSibling.lastElementChild;\n        }\n        else if (cellElement.parentElement.parentElement.tagName === \"TBODY\" &&\n            cellElement.parentElement.parentElement.previousElementSibling) {\n            previousElement = cellElement.parentElement\n                .parentElement.previousElementSibling.lastElementChild.lastElementChild;\n        }\n        else {\n            previousElement = null;\n        }\n    }\n    if (previousElement) {\n        range.selectNodeContents(previousElement);\n        if (!isSelected) {\n            range.collapse(false);\n        }\n        (0,selection/* setSelectionFocus */.Hc)(range);\n    }\n    return previousElement;\n};\nvar insertAfterBlock = function (vditor, event, range, element, blockElement) {\n    var position = (0,selection/* getSelectPosition */.im)(element, vditor[vditor.currentMode].element, range);\n    if ((event.key === \"ArrowDown\" && element.textContent.trimRight().substr(position.start).indexOf(\"\\n\") === -1) ||\n        (event.key === \"ArrowRight\" && position.start >= element.textContent.trimRight().length)) {\n        var nextElement = blockElement.nextElementSibling;\n        if (!nextElement ||\n            (nextElement && (nextElement.tagName === \"TABLE\" || nextElement.getAttribute(\"data-type\")))) {\n            blockElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr></p>\");\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        }\n        else {\n            range.selectNodeContents(nextElement);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n        }\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar insertBeforeBlock = function (vditor, event, range, element, blockElement) {\n    var position = (0,selection/* getSelectPosition */.im)(element, vditor[vditor.currentMode].element, range);\n    if ((event.key === \"ArrowUp\" && element.textContent.substr(0, position.start).indexOf(\"\\n\") === -1) ||\n        ((event.key === \"ArrowLeft\" || (event.key === \"Backspace\" && range.toString() === \"\")) &&\n            position.start === 0)) {\n        var previousElement = blockElement.previousElementSibling;\n        // table || code\n        if (!previousElement ||\n            (previousElement && (previousElement.tagName === \"TABLE\" || previousElement.getAttribute(\"data-type\")))) {\n            blockElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr></p>\");\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        }\n        else {\n            range.selectNodeContents(previousElement);\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n        }\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar listToggle = function (vditor, range, type, cancel) {\n    if (cancel === void 0) { cancel = true; }\n    var itemElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n    vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n        wbr.remove();\n    });\n    range.insertNode(document.createElement(\"wbr\"));\n    if (cancel && itemElement) {\n        // 取消\n        var pHTML = \"\";\n        for (var i = 0; i < itemElement.parentElement.childElementCount; i++) {\n            var inputElement = itemElement.parentElement.children[i].querySelector(\"input\");\n            if (inputElement) {\n                inputElement.remove();\n            }\n            pHTML += \"<p data-block=\\\"0\\\">\" + itemElement.parentElement.children[i].innerHTML.trimLeft() + \"</p>\";\n        }\n        itemElement.parentElement.insertAdjacentHTML(\"beforebegin\", pHTML);\n        itemElement.parentElement.remove();\n    }\n    else {\n        if (!itemElement) {\n            // 添加\n            var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n            if (!blockElement) {\n                vditor[vditor.currentMode].element.querySelector(\"wbr\").remove();\n                blockElement = vditor[vditor.currentMode].element.querySelector(\"p\");\n                blockElement.innerHTML = \"<wbr>\";\n            }\n            if (type === \"check\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ul data-block=\\\"0\\\"><li class=\\\"vditor-task\\\"><input type=\\\"checkbox\\\" /> \" + blockElement.innerHTML + \"</li></ul>\");\n                blockElement.remove();\n            }\n            else if (type === \"list\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ul data-block=\\\"0\\\"><li>\" + blockElement.innerHTML + \"</li></ul>\");\n                blockElement.remove();\n            }\n            else if (type === \"ordered-list\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ol data-block=\\\"0\\\"><li>\" + blockElement.innerHTML + \"</li></ol>\");\n                blockElement.remove();\n            }\n        }\n        else {\n            // 切换\n            if (type === \"check\") {\n                itemElement.parentElement.querySelectorAll(\"li\").forEach(function (item) {\n                    item.insertAdjacentHTML(\"afterbegin\", \"<input type=\\\"checkbox\\\" />\" + (item.textContent.indexOf(\" \") === 0 ? \"\" : \" \"));\n                    item.classList.add(\"vditor-task\");\n                });\n            }\n            else {\n                if (itemElement.querySelector(\"input\")) {\n                    itemElement.parentElement.querySelectorAll(\"li\").forEach(function (item) {\n                        item.querySelector(\"input\").remove();\n                        item.classList.remove(\"vditor-task\");\n                    });\n                }\n                var element = void 0;\n                if (type === \"list\") {\n                    element = document.createElement(\"ul\");\n                }\n                else {\n                    element = document.createElement(\"ol\");\n                }\n                element.innerHTML = itemElement.parentElement.innerHTML;\n                itemElement.parentElement.parentNode.replaceChild(element, itemElement.parentElement);\n            }\n        }\n    }\n};\nvar listIndent = function (vditor, liElement, range) {\n    var previousElement = liElement.previousElementSibling;\n    if (liElement && previousElement) {\n        var liElements_1 = [liElement];\n        Array.from(range.cloneContents().children).forEach(function (item, index) {\n            if (item.nodeType !== 3 && liElement && item.textContent.trim() !== \"\"\n                && liElement.getAttribute(\"data-node-id\") === item.getAttribute(\"data-node-id\")) {\n                if (index !== 0) {\n                    liElements_1.push(liElement);\n                }\n                liElement = liElement.nextElementSibling;\n            }\n        });\n        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        var liParentElement = previousElement.parentElement;\n        var liHTML_1 = \"\";\n        liElements_1.forEach(function (item) {\n            var marker = item.getAttribute(\"data-marker\");\n            if (marker.length !== 1) {\n                marker = \"1\" + marker.slice(-1);\n            }\n            liHTML_1 += \"<li data-node-id=\\\"\" + item.getAttribute(\"data-node-id\") + \"\\\" data-marker=\\\"\" + marker + \"\\\">\" + item.innerHTML + \"</li>\";\n            item.remove();\n        });\n        previousElement.insertAdjacentHTML(\"beforeend\", \"<\" + liParentElement.tagName + \" data-block=\\\"0\\\">\" + liHTML_1 + \"</\" + liParentElement.tagName + \">\");\n        if (vditor.currentMode === \"wysiwyg\") {\n            liParentElement.outerHTML = vditor.lute.SpinVditorDOM(liParentElement.outerHTML);\n        }\n        else {\n            liParentElement.outerHTML = vditor.lute.SpinVditorIRDOM(liParentElement.outerHTML);\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        var tempTopListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (tempTopListElement) {\n            tempTopListElement.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n                .forEach(function (item) {\n                processCodeRender(item, vditor);\n                if (vditor.currentMode === \"wysiwyg\") {\n                    item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n            });\n        }\n        execAfterRender(vditor);\n        highlightToolbar(vditor);\n    }\n    else {\n        vditor[vditor.currentMode].element.focus();\n    }\n};\nvar listOutdent = function (vditor, liElement, range, topListElement) {\n    var liParentLiElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(liElement.parentElement, \"LI\");\n    if (liParentLiElement) {\n        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        var liParentElement = liElement.parentElement;\n        var liParentAfterElement = liParentElement.cloneNode();\n        var liElements_2 = [liElement];\n        Array.from(range.cloneContents().children).forEach(function (item, index) {\n            if (item.nodeType !== 3 && liElement && item.textContent.trim() !== \"\" &&\n                liElement.getAttribute(\"data-node-id\") === item.getAttribute(\"data-node-id\")) {\n                if (index !== 0) {\n                    liElements_2.push(liElement);\n                }\n                liElement = liElement.nextElementSibling;\n            }\n        });\n        var isMatch_1 = false;\n        var afterHTML_1 = \"\";\n        liParentElement.querySelectorAll(\"li\").forEach(function (item) {\n            if (isMatch_1) {\n                afterHTML_1 += item.outerHTML;\n                if (!item.nextElementSibling && !item.previousElementSibling) {\n                    item.parentElement.remove();\n                }\n                else {\n                    item.remove();\n                }\n            }\n            if (item.isSameNode(liElements_2[liElements_2.length - 1])) {\n                isMatch_1 = true;\n            }\n        });\n        liElements_2.reverse().forEach(function (item) {\n            liParentLiElement.insertAdjacentElement(\"afterend\", item);\n        });\n        if (afterHTML_1) {\n            liParentAfterElement.innerHTML = afterHTML_1;\n            liElements_2[0].insertAdjacentElement(\"beforeend\", liParentAfterElement);\n        }\n        if (vditor.currentMode === \"wysiwyg\") {\n            topListElement.outerHTML = vditor.lute.SpinVditorDOM(topListElement.outerHTML);\n        }\n        else {\n            topListElement.outerHTML = vditor.lute.SpinVditorIRDOM(topListElement.outerHTML);\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        var tempTopListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (tempTopListElement) {\n            tempTopListElement.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n                .forEach(function (item) {\n                processCodeRender(item, vditor);\n                if (vditor.currentMode === \"wysiwyg\") {\n                    item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n            });\n        }\n        execAfterRender(vditor);\n        highlightToolbar(vditor);\n    }\n    else {\n        vditor[vditor.currentMode].element.focus();\n    }\n};\nvar setTableAlign = function (tableElement, type) {\n    var cell = getSelection().getRangeAt(0).startContainer.parentElement;\n    var columnCnt = tableElement.rows[0].cells.length;\n    var rowCnt = tableElement.rows.length;\n    var currentColumn = 0;\n    for (var i = 0; i < rowCnt; i++) {\n        for (var j = 0; j < columnCnt; j++) {\n            if (tableElement.rows[i].cells[j].isSameNode(cell)) {\n                currentColumn = j;\n                break;\n            }\n        }\n    }\n    for (var k = 0; k < rowCnt; k++) {\n        tableElement.rows[k].cells[currentColumn].setAttribute(\"align\", type);\n    }\n};\nvar isHrMD = function (text) {\n    // - _ *\n    var marker = text.trimRight().split(\"\\n\").pop();\n    if (marker === \"\") {\n        return false;\n    }\n    if (marker.replace(/ |-/g, \"\") === \"\"\n        || marker.replace(/ |_/g, \"\") === \"\"\n        || marker.replace(/ |\\*/g, \"\") === \"\") {\n        if (marker.replace(/ /g, \"\").length > 2) {\n            if (marker.indexOf(\"-\") > -1 && marker.trimLeft().indexOf(\" \") === -1\n                && text.trimRight().split(\"\\n\").length > 1) {\n                // 满足 heading\n                return false;\n            }\n            if (marker.indexOf(\"    \") === 0 || marker.indexOf(\"\\t\") === 0) {\n                // 代码块\n                return false;\n            }\n            return true;\n        }\n        return false;\n    }\n    return false;\n};\nvar isHeadingMD = function (text) {\n    // - =\n    var textArray = text.trimRight().split(\"\\n\");\n    text = textArray.pop();\n    if (text.indexOf(\"    \") === 0 || text.indexOf(\"\\t\") === 0) {\n        return false;\n    }\n    text = text.trimLeft();\n    if (text === \"\" || textArray.length === 0) {\n        return false;\n    }\n    if (text.replace(/-/g, \"\") === \"\"\n        || text.replace(/=/g, \"\") === \"\") {\n        return true;\n    }\n    return false;\n};\nvar execAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (vditor.currentMode === \"wysiwyg\") {\n        afterRenderEvent(vditor, options);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        process_processAfterRender(vditor, options);\n    }\n    else if (vditor.currentMode === \"sv\") {\n        processAfterRender(vditor, options);\n    }\n};\nvar fixList = function (range, vditor, pElement, event) {\n    var _a;\n    var startContainer = range.startContainer;\n    var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"LI\");\n    if (liElement) {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\" &&\n            // fix li 中有多个 P 时，在第一个 P 中换行会在下方生成新的 li\n            (!event.shiftKey && pElement && liElement.contains(pElement) && pElement.nextElementSibling)) {\n            if (liElement && !liElement.textContent.endsWith(\"\\n\")) {\n                // li 结尾需 \\n\n                liElement.insertAdjacentText(\"beforeend\", \"\\n\");\n            }\n            range.insertNode(document.createTextNode(\"\\n\\n\"));\n            range.collapse(false);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\" &&\n            !liElement.previousElementSibling && range.toString() === \"\" &&\n            (0,selection/* getSelectPosition */.im)(liElement, vditor[vditor.currentMode].element, range).start === 0) {\n            // 光标位于点和第一个字符中间时，无法删除 li 元素\n            if (liElement.nextElementSibling) {\n                liElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\"><wbr>\" + liElement.innerHTML + \"</p>\");\n                liElement.remove();\n            }\n            else {\n                liElement.parentElement.outerHTML = \"<p data-block=\\\"0\\\"><wbr>\" + liElement.innerHTML + \"</p>\";\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // 空列表删除后与上一级段落对齐\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\" &&\n            liElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" &&\n            range.toString() === \"\" && ((_a = liElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.tagName) === \"LI\") {\n            liElement.previousElementSibling.insertAdjacentText(\"beforeend\", \"\\n\\n\");\n            range.selectNodeContents(liElement.previousElementSibling);\n            range.collapse(false);\n            liElement.remove();\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Tab\") {\n            // 光标位于第一/零字符时，tab 用于列表的缩进\n            var isFirst = false;\n            if (range.startOffset === 0\n                && ((startContainer.nodeType === 3 && !startContainer.previousSibling)\n                    || (startContainer.nodeType !== 3 && startContainer.nodeName === \"LI\"))) {\n                // 有序/无序列表\n                isFirst = true;\n            }\n            else if (liElement.classList.contains(\"vditor-task\") && range.startOffset === 1\n                && startContainer.previousSibling.nodeType !== 3\n                && startContainer.previousSibling.tagName === \"INPUT\") {\n                // 任务列表\n                isFirst = true;\n            }\n            if (isFirst || range.toString() !== \"\") {\n                if (event.shiftKey) {\n                    listOutdent(vditor, liElement, range, liElement.parentElement);\n                }\n                else {\n                    listIndent(vditor, liElement, range);\n                }\n                event.preventDefault();\n                return true;\n            }\n        }\n    }\n    return false;\n};\n// tab 处理: block code render, table, 列表第一个字符中的 tab 处理单独写在上面\nvar fixTab = function (vditor, range, event) {\n    if (vditor.options.tab && event.key === \"Tab\") {\n        if (event.shiftKey) {\n            // TODO shift+tab\n        }\n        else {\n            if (range.toString() === \"\") {\n                range.insertNode(document.createTextNode(vditor.options.tab));\n                range.collapse(false);\n            }\n            else {\n                range.extractContents();\n                range.insertNode(document.createTextNode(vditor.options.tab));\n                range.collapse(false);\n            }\n        }\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        execAfterRender(vditor);\n        event.preventDefault();\n        return true;\n    }\n};\nvar fixMarkdown = function (event, vditor, pElement, range) {\n    if (!pElement) {\n        return;\n    }\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n        var pText = String.raw(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\", \"\"], [\"\", \"\"])), pElement.textContent).replace(/\\\\\\|/g, \"\").trim();\n        var pTextList = pText.split(\"|\");\n        if (pText.startsWith(\"|\") && pText.endsWith(\"|\") && pTextList.length > 3) {\n            // table 自动完成\n            var tableHeaderMD = pTextList.map(function () { return \"---\"; }).join(\"|\");\n            tableHeaderMD =\n                pElement.textContent + \"\\n\" + tableHeaderMD.substring(3, tableHeaderMD.length - 3) + \"\\n|<wbr>\";\n            pElement.outerHTML = vditor.lute.SpinVditorDOM(tableHeaderMD);\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // hr 渲染\n        if (isHrMD(pElement.innerHTML) && pElement.previousElementSibling) {\n            // 软换行后 hr 前有内容\n            var pInnerHTML = \"\";\n            var innerHTMLList = pElement.innerHTML.trimRight().split(\"\\n\");\n            if (innerHTMLList.length > 1) {\n                innerHTMLList.pop();\n                pInnerHTML = \"<p data-block=\\\"0\\\">\" + innerHTMLList.join(\"\\n\") + \"</p>\";\n            }\n            pElement.insertAdjacentHTML(\"afterend\", pInnerHTML + \"<hr data-block=\\\"0\\\"><p data-block=\\\"0\\\"><wbr>\\n</p>\");\n            pElement.remove();\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (isHeadingMD(pElement.innerHTML)) {\n            // heading 渲染\n            if (vditor.currentMode === \"wysiwyg\") {\n                pElement.outerHTML = vditor.lute.SpinVditorDOM(pElement.innerHTML + '<p data-block=\"0\"><wbr>\\n</p>');\n            }\n            else {\n                pElement.outerHTML = vditor.lute.SpinVditorIRDOM(pElement.innerHTML + '<p data-block=\"0\"><wbr>\\n</p>');\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // 软换行会被切割 https://github.com/Vanessa219/vditor/issues/220\n    if (range.collapsed && pElement.previousElementSibling && event.key === \"Backspace\" &&\n        !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey &&\n        pElement.textContent.trimRight().split(\"\\n\").length > 1 &&\n        (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start === 0) {\n        var lastElement = (0,hasClosest/* getLastNode */.DX)(pElement.previousElementSibling);\n        if (!lastElement.textContent.endsWith(\"\\n\")) {\n            lastElement.textContent = lastElement.textContent + \"\\n\";\n        }\n        lastElement.parentElement.insertAdjacentHTML(\"beforeend\", \"<wbr>\" + pElement.innerHTML);\n        pElement.remove();\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        return false;\n    }\n    return false;\n};\nvar insertRow = function (vditor, range, cellElement) {\n    var rowHTML = \"\";\n    for (var m = 0; m < cellElement.parentElement.childElementCount; m++) {\n        rowHTML += \"<td align=\\\"\" + cellElement.parentElement.children[m].getAttribute(\"align\") + \"\\\"> </td>\";\n    }\n    if (cellElement.tagName === \"TH\") {\n        cellElement.parentElement.parentElement.insertAdjacentHTML(\"afterend\", \"<tbody><tr>\" + rowHTML + \"</tr></tbody>\");\n    }\n    else {\n        cellElement.parentElement.insertAdjacentHTML(\"afterend\", \"<tr>\" + rowHTML + \"</tr>\");\n    }\n    execAfterRender(vditor);\n};\nvar insertRowAbove = function (vditor, range, cellElement) {\n    var rowHTML = \"\";\n    for (var m = 0; m < cellElement.parentElement.childElementCount; m++) {\n        if (cellElement.tagName === \"TH\") {\n            rowHTML += \"<th align=\\\"\" + cellElement.parentElement.children[m].getAttribute(\"align\") + \"\\\"> </th>\";\n        }\n        else {\n            rowHTML += \"<td align=\\\"\" + cellElement.parentElement.children[m].getAttribute(\"align\") + \"\\\"> </td>\";\n        }\n    }\n    if (cellElement.tagName === \"TH\") {\n        cellElement.parentElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<thead><tr>\" + rowHTML + \"</tr></thead>\");\n        range.insertNode(document.createElement(\"wbr\"));\n        var theadHTML = cellElement.parentElement.innerHTML.replace(/<th>/g, \"<td>\").replace(/<\\/th>/g, \"</td>\");\n        cellElement.parentElement.parentElement.nextElementSibling.insertAdjacentHTML(\"afterbegin\", theadHTML);\n        cellElement.parentElement.parentElement.remove();\n        (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    }\n    else {\n        cellElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<tr>\" + rowHTML + \"</tr>\");\n    }\n    execAfterRender(vditor);\n};\nvar insertColumn = function (vditor, tableElement, cellElement, type) {\n    if (type === void 0) { type = \"afterend\"; }\n    var index = 0;\n    var previousElement = cellElement.previousElementSibling;\n    while (previousElement) {\n        index++;\n        previousElement = previousElement.previousElementSibling;\n    }\n    for (var i = 0; i < tableElement.rows.length; i++) {\n        if (i === 0) {\n            tableElement.rows[i].cells[index].insertAdjacentHTML(type, \"<th> </th>\");\n        }\n        else {\n            tableElement.rows[i].cells[index].insertAdjacentHTML(type, \"<td> </td>\");\n        }\n    }\n    execAfterRender(vditor);\n};\nvar deleteRow = function (vditor, range, cellElement) {\n    if (cellElement.tagName === \"TD\") {\n        var tbodyElement = cellElement.parentElement.parentElement;\n        if (cellElement.parentElement.previousElementSibling) {\n            range.selectNodeContents(cellElement.parentElement.previousElementSibling.lastElementChild);\n        }\n        else {\n            range.selectNodeContents(tbodyElement.previousElementSibling.lastElementChild.lastElementChild);\n        }\n        if (tbodyElement.childElementCount === 1) {\n            tbodyElement.remove();\n        }\n        else {\n            cellElement.parentElement.remove();\n        }\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        execAfterRender(vditor);\n    }\n};\nvar deleteColumn = function (vditor, range, tableElement, cellElement) {\n    var index = 0;\n    var previousElement = cellElement.previousElementSibling;\n    while (previousElement) {\n        index++;\n        previousElement = previousElement.previousElementSibling;\n    }\n    if (cellElement.previousElementSibling || cellElement.nextElementSibling) {\n        range.selectNodeContents(cellElement.previousElementSibling || cellElement.nextElementSibling);\n        range.collapse(true);\n    }\n    for (var i = 0; i < tableElement.rows.length; i++) {\n        var cells = tableElement.rows[i].cells;\n        if (cells.length === 1) {\n            tableElement.remove();\n            highlightToolbar(vditor);\n            break;\n        }\n        cells[index].remove();\n    }\n    (0,selection/* setSelectionFocus */.Hc)(range);\n    execAfterRender(vditor);\n};\nvar fixTable = function (vditor, event, range) {\n    var startContainer = range.startContainer;\n    var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n    if (cellElement) {\n        // 换行或软换行：在 cell 中添加 br\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n            if (!cellElement.lastElementChild ||\n                (cellElement.lastElementChild && (!cellElement.lastElementChild.isSameNode(cellElement.lastChild) ||\n                    cellElement.lastElementChild.tagName !== \"BR\"))) {\n                cellElement.insertAdjacentHTML(\"beforeend\", \"<br>\");\n            }\n            var brElement = document.createElement(\"br\");\n            range.insertNode(brElement);\n            range.setStartAfter(brElement);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // tab：光标移向下一个 cell\n        if (event.key === \"Tab\") {\n            if (event.shiftKey) {\n                // shift + tab 光标移动到前一个 cell\n                goPreviousCell(cellElement, range);\n                event.preventDefault();\n                return true;\n            }\n            var nextElement = cellElement.nextElementSibling;\n            if (!nextElement) {\n                if (cellElement.parentElement.nextElementSibling) {\n                    nextElement = cellElement.parentElement.nextElementSibling.firstElementChild;\n                }\n                else if (cellElement.parentElement.parentElement.tagName === \"THEAD\" &&\n                    cellElement.parentElement.parentElement.nextElementSibling) {\n                    nextElement =\n                        cellElement.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild;\n                }\n                else {\n                    nextElement = null;\n                }\n            }\n            if (nextElement) {\n                range.selectNodeContents(nextElement);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            event.preventDefault();\n            return true;\n        }\n        var tableElement = cellElement.parentElement.parentElement.parentElement;\n        if (event.key === \"ArrowUp\") {\n            event.preventDefault();\n            if (cellElement.tagName === \"TH\") {\n                if (tableElement.previousElementSibling) {\n                    range.selectNodeContents(tableElement.previousElementSibling);\n                    range.collapse(false);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n                else {\n                    insertEmptyBlock(vditor, \"beforebegin\");\n                }\n                return true;\n            }\n            var m = 0;\n            var trElement = cellElement.parentElement;\n            for (; m < trElement.cells.length; m++) {\n                if (trElement.cells[m].isSameNode(cellElement)) {\n                    break;\n                }\n            }\n            var previousElement = trElement.previousElementSibling;\n            if (!previousElement) {\n                previousElement = trElement.parentElement.previousElementSibling.firstChild;\n            }\n            range.selectNodeContents(previousElement.cells[m]);\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        if (event.key === \"ArrowDown\") {\n            event.preventDefault();\n            var trElement = cellElement.parentElement;\n            if (!trElement.nextElementSibling && cellElement.tagName === \"TD\") {\n                if (tableElement.nextElementSibling) {\n                    range.selectNodeContents(tableElement.nextElementSibling);\n                    range.collapse(true);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n                else {\n                    insertEmptyBlock(vditor, \"afterend\");\n                }\n                return true;\n            }\n            var m = 0;\n            for (; m < trElement.cells.length; m++) {\n                if (trElement.cells[m].isSameNode(cellElement)) {\n                    break;\n                }\n            }\n            var nextElement = trElement.nextElementSibling;\n            if (!nextElement) {\n                nextElement = trElement.parentElement.nextElementSibling.firstChild;\n            }\n            range.selectNodeContents(nextElement.cells[m]);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        // focus row input, only wysiwyg\n        if (vditor.currentMode === \"wysiwyg\" &&\n            !(0,compatibility/* isCtrl */.yl)(event) && event.key === \"Enter\" && !event.shiftKey && event.altKey) {\n            var inputElement = vditor.wysiwyg.popover.querySelector(\".vditor-input\");\n            inputElement.focus();\n            inputElement.select();\n            event.preventDefault();\n            return true;\n        }\n        // Backspace：光标移动到前一个 cell\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\"\n            && range.startOffset === 0 && range.toString() === \"\") {\n            var previousCellElement = goPreviousCell(cellElement, range, false);\n            if (!previousCellElement && tableElement) {\n                if (tableElement.textContent.trim() === \"\") {\n                    tableElement.outerHTML = \"<p data-block=\\\"0\\\"><wbr>\\n</p>\";\n                    (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                }\n                else {\n                    range.setStartBefore(tableElement);\n                    range.collapse(true);\n                }\n                execAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // 上方新添加一行\n        if (matchHotKey(\"⇧⌘F\", event)) {\n            insertRowAbove(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 下方新添加一行 https://github.com/Vanessa219/vditor/issues/46\n        if (matchHotKey(\"⌘=\", event)) {\n            insertRow(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 左方新添加一列\n        if (matchHotKey(\"⇧⌘G\", event)) {\n            insertColumn(vditor, tableElement, cellElement, \"beforebegin\");\n            event.preventDefault();\n            return true;\n        }\n        // 后方新添加一列\n        if (matchHotKey(\"⇧⌘=\", event)) {\n            insertColumn(vditor, tableElement, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 删除当前行\n        if (matchHotKey(\"⌘-\", event)) {\n            deleteRow(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 删除当前列\n        if (matchHotKey(\"⇧⌘-\", event)) {\n            deleteColumn(vditor, range, tableElement, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 剧左\n        if (matchHotKey(\"⇧⌘L\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"left\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"left\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n        // 剧中\n        if (matchHotKey(\"⇧⌘C\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"center\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"center\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n        // 剧右\n        if (matchHotKey(\"⇧⌘R\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"right\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"right\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n};\nvar fixCodeBlock = function (vditor, event, codeRenderElement, range) {\n    // 行级代码块中 command + a，近对当前代码块进行全选\n    if (codeRenderElement.tagName === \"PRE\" && matchHotKey(\"⌘A\", event)) {\n        range.selectNodeContents(codeRenderElement.firstElementChild);\n        event.preventDefault();\n        return true;\n    }\n    // tab\n    // TODO shift + tab, shift and 选中文字\n    if (vditor.options.tab && event.key === \"Tab\" && !event.shiftKey && range.toString() === \"\") {\n        range.insertNode(document.createTextNode(vditor.options.tab));\n        range.collapse(false);\n        execAfterRender(vditor);\n        event.preventDefault();\n        return true;\n    }\n    // Backspace: 光标位于第零个字符，仅删除代码块标签\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey) {\n        var codePosition = (0,selection/* getSelectPosition */.im)(codeRenderElement, vditor[vditor.currentMode].element, range);\n        if ((codePosition.start === 0 ||\n            (codePosition.start === 1 && codeRenderElement.innerText === \"\\n\")) // 空代码块，光标在 \\n 后\n            && range.toString() === \"\") {\n            codeRenderElement.parentElement.outerHTML =\n                \"<p data-block=\\\"0\\\"><wbr>\" + codeRenderElement.firstElementChild.innerHTML + \"</p>\";\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // 换行\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n        if (!codeRenderElement.firstElementChild.textContent.endsWith(\"\\n\")) {\n            codeRenderElement.firstElementChild.insertAdjacentText(\"beforeend\", \"\\n\");\n        }\n        range.extractContents();\n        range.insertNode(document.createTextNode(\"\\n\"));\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        if (!(0,compatibility/* isFirefox */.vU)()) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                input_input(vditor, range);\n            }\n            else {\n                input(vditor, range);\n            }\n        }\n        scrollCenter(vditor);\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar fixBlockquote = function (vditor, range, event, pElement) {\n    var startContainer = range.startContainer;\n    var blockquoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"BLOCKQUOTE\");\n    if (blockquoteElement && range.toString() === \"\") {\n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey &&\n            (0,selection/* getSelectPosition */.im)(blockquoteElement, vditor[vditor.currentMode].element, range).start === 0) {\n            // Backspace: 光标位于引用中的第零个字符，仅删除引用标签\n            range.insertNode(document.createElement(\"wbr\"));\n            blockquoteElement.outerHTML = blockquoteElement.innerHTML;\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (pElement && event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey\n            && pElement.parentElement.tagName === \"BLOCKQUOTE\") {\n            // Enter: 空行回车应逐层跳出\n            var isEmpty = false;\n            if (pElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\\n\" ||\n                pElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                // 空 P\n                isEmpty = true;\n                pElement.remove();\n            }\n            else if (pElement.innerHTML.endsWith(\"\\n\\n\") &&\n                (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start ===\n                    pElement.textContent.length - 1) {\n                // 软换行\n                pElement.innerHTML = pElement.innerHTML.substr(0, pElement.innerHTML.length - 2);\n                isEmpty = true;\n            }\n            if (isEmpty) {\n                // 需添加零宽字符，否则的话无法记录 undo\n                blockquoteElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr>\\n</p>\");\n                (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n        if (vditor.currentMode === \"wysiwyg\" && blockElement && matchHotKey(\"⇧⌘;\", event)) {\n            // 插入 blockquote\n            range.insertNode(document.createElement(\"wbr\"));\n            blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\" + blockElement.outerHTML + \"</blockquote>\";\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            afterRenderEvent(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (insertAfterBlock(vditor, event, range, blockquoteElement, blockquoteElement)) {\n            return true;\n        }\n        if (insertBeforeBlock(vditor, event, range, blockquoteElement, blockquoteElement)) {\n            return true;\n        }\n    }\n    return false;\n};\nvar fixTask = function (vditor, range, event) {\n    var startContainer = range.startContainer;\n    var taskItemElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-task\");\n    if (taskItemElement) {\n        if (matchHotKey(\"⇧⌘J\", event)) {\n            // ctrl + shift: toggle checked\n            var inputElement = taskItemElement.firstElementChild;\n            if (inputElement.checked) {\n                inputElement.removeAttribute(\"checked\");\n            }\n            else {\n                inputElement.setAttribute(\"checked\", \"checked\");\n            }\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // Backspace: 在选择框前进行删除\n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\"\n            && range.startOffset === 1\n            && ((startContainer.nodeType === 3 && startContainer.previousSibling &&\n                startContainer.previousSibling.tagName === \"INPUT\")\n                || startContainer.nodeType !== 3)) {\n            var previousElement = taskItemElement.previousElementSibling;\n            taskItemElement.querySelector(\"input\").remove();\n            if (previousElement) {\n                var lastNode = (0,hasClosest/* getLastNode */.DX)(previousElement);\n                lastNode.parentElement.insertAdjacentHTML(\"beforeend\", \"<wbr>\" + taskItemElement.innerHTML.trim());\n                taskItemElement.remove();\n            }\n            else {\n                taskItemElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\"><wbr>\" + (taskItemElement.innerHTML.trim() || \"\\n\") + \"</p>\");\n                if (taskItemElement.nextElementSibling) {\n                    taskItemElement.remove();\n                }\n                else {\n                    taskItemElement.parentElement.remove();\n                }\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey) {\n            if (taskItemElement.textContent.trim() === \"\") {\n                // 当前任务列表无文字\n                if ((0,hasClosest/* hasClosestByClassName */.fb)(taskItemElement.parentElement, \"vditor-task\")) {\n                    // 为子元素时，需进行反向缩进\n                    var topListElement = (0,hasClosest/* getTopList */.O9)(startContainer);\n                    if (topListElement) {\n                        listOutdent(vditor, taskItemElement, range, topListElement);\n                    }\n                }\n                else {\n                    // 仅有一级任务列表\n                    if (taskItemElement.nextElementSibling) {\n                        // 任务列表下方还有元素，需要使用用段落隔断\n                        var afterHTML_2 = \"\";\n                        var beforeHTML_1 = \"\";\n                        var isAfter_1 = false;\n                        Array.from(taskItemElement.parentElement.children).forEach(function (taskItem) {\n                            if (taskItemElement.isSameNode(taskItem)) {\n                                isAfter_1 = true;\n                            }\n                            else {\n                                if (isAfter_1) {\n                                    afterHTML_2 += taskItem.outerHTML;\n                                }\n                                else {\n                                    beforeHTML_1 += taskItem.outerHTML;\n                                }\n                            }\n                        });\n                        var parentTagName = taskItemElement.parentElement.tagName;\n                        var dataMarker = taskItemElement.parentElement.tagName === \"OL\" ? \"\" : \" data-marker=\\\"\" + taskItemElement.parentElement.getAttribute(\"data-marker\") + \"\\\"\";\n                        var startAttribute = \"\";\n                        if (beforeHTML_1) {\n                            startAttribute = taskItemElement.parentElement.tagName === \"UL\" ? \"\" : \" start=\\\"1\\\"\";\n                            beforeHTML_1 = \"<\" + parentTagName + \" data-tight=\\\"true\\\"\" + dataMarker + \" data-block=\\\"0\\\">\" + beforeHTML_1 + \"</\" + parentTagName + \">\";\n                        }\n                        // <p data-block=\"0\">\\n<wbr></p> => <p data-block=\"0\"><wbr>\\n</p>\n                        // https://github.com/Vanessa219/vditor/issues/430\n                        taskItemElement.parentElement.outerHTML = beforeHTML_1 + \"<p data-block=\\\"0\\\"><wbr>\\n</p><\" + parentTagName + \"\\n data-tight=\\\"true\\\"\" + dataMarker + \" data-block=\\\"0\\\"\" + startAttribute + \">\" + afterHTML_2 + \"</\" + parentTagName + \">\";\n                    }\n                    else {\n                        // 任务列表下方无任务列表元素\n                        taskItemElement.parentElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\"><wbr>\\n</p>\");\n                        if (taskItemElement.parentElement.querySelectorAll(\"li\").length === 1) {\n                            // 任务列表仅有一项时，使用 p 元素替换\n                            taskItemElement.parentElement.remove();\n                        }\n                        else {\n                            // 任务列表有多项时，当前任务列表位于最后一项，移除该任务列表\n                            taskItemElement.remove();\n                        }\n                    }\n                }\n            }\n            else if (startContainer.nodeType !== 3 && range.startOffset === 0 &&\n                startContainer.firstChild.tagName === \"INPUT\") {\n                // 光标位于 input 之前\n                range.setStart(startContainer.childNodes[1], 1);\n            }\n            else {\n                // 当前任务列表有文字，光标后的文字需添加到新任务列表中\n                range.setEndAfter(taskItemElement.lastChild);\n                taskItemElement.insertAdjacentHTML(\"afterend\", \"<li class=\\\"vditor-task\\\" data-marker=\\\"\" + taskItemElement.getAttribute(\"data-marker\") + \"\\\"><input type=\\\"checkbox\\\"> <wbr></li>\");\n                document.querySelector(\"wbr\").after(range.extractContents());\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\nvar fixDelete = function (vditor, range, event, pElement) {\n    if (range.startContainer.nodeType !== 3) {\n        // 光标位于 hr 前，hr 前有内容\n        var rangeElement = range.startContainer.children[range.startOffset];\n        if (rangeElement && rangeElement.tagName === \"HR\") {\n            range.selectNodeContents(rangeElement.previousElementSibling);\n            range.collapse(false);\n            event.preventDefault();\n            return true;\n        }\n    }\n    if (pElement) {\n        var previousElement = pElement.previousElementSibling;\n        if (previousElement && (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start === 0 &&\n            (((0,compatibility/* isFirefox */.vU)() && previousElement.tagName === \"HR\") || previousElement.tagName === \"TABLE\")) {\n            if (previousElement.tagName === \"TABLE\") {\n                // table 后删除 https://github.com/Vanessa219/vditor/issues/243\n                var lastCellElement = previousElement.lastElementChild.lastElementChild.lastElementChild;\n                lastCellElement.innerHTML =\n                    lastCellElement.innerHTML.trimLeft() + \"<wbr>\" + pElement.textContent.trim();\n                pElement.remove();\n            }\n            else {\n                // 光标位于 hr 后进行删除\n                previousElement.remove();\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\nvar fixHR = function (range) {\n    if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.nodeType !== 3 &&\n        range.startContainer.tagName === \"HR\") {\n        range.setStartBefore(range.startContainer);\n    }\n};\n// firefox https://github.com/Vanessa219/vditor/issues/407\nvar fixFirefoxArrowUpTable = function (event, blockElement, range) {\n    var _a, _b;\n    if (!(0,compatibility/* isFirefox */.vU)()) {\n        return false;\n    }\n    if (event.key === \"ArrowUp\" && blockElement && ((_a = blockElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.tagName) === \"TABLE\") {\n        var tableElement = blockElement.previousElementSibling;\n        range.selectNodeContents(tableElement.rows[tableElement.rows.length - 1].lastElementChild);\n        range.collapse(false);\n        event.preventDefault();\n        return true;\n    }\n    if (event.key === \"ArrowDown\" && blockElement && ((_b = blockElement.nextElementSibling) === null || _b === void 0 ? void 0 : _b.tagName) === \"TABLE\") {\n        range.selectNodeContents(blockElement.nextElementSibling.rows[0].cells[0]);\n        range.collapse(true);\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar paste = function (vditor, event, callback) { return fixBrowserBehavior_awaiter(void 0, void 0, void 0, function () {\n    var textHTML, textPlain, files, renderers, renderLinkDest, doc, height, code, codeElement, position, tempElement, blockElement, range;\n    var _a;\n    return fixBrowserBehavior_generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                event.stopPropagation();\n                event.preventDefault();\n                if (\"clipboardData\" in event) {\n                    textHTML = event.clipboardData.getData(\"text/html\");\n                    textPlain = event.clipboardData.getData(\"text/plain\");\n                    files = event.clipboardData.files;\n                }\n                else {\n                    textHTML = event.dataTransfer.getData(\"text/html\");\n                    textPlain = event.dataTransfer.getData(\"text/plain\");\n                    if (event.dataTransfer.types[0] === \"Files\") {\n                        files = event.dataTransfer.items;\n                    }\n                }\n                renderers = {};\n                renderLinkDest = function (node, entering) {\n                    if (!entering) {\n                        return [\"\", Lute.WalkContinue];\n                    }\n                    var src = node.TokensStr();\n                    if (node.__internal_object__.Parent.Type === 34 && src && src.indexOf(\"file://\") === -1 &&\n                        vditor.options.upload.linkToImgUrl) {\n                        var xhr_1 = new XMLHttpRequest();\n                        xhr_1.open(\"POST\", vditor.options.upload.linkToImgUrl);\n                        if (vditor.options.upload.token) {\n                            xhr_1.setRequestHeader(\"X-Upload-Token\", vditor.options.upload.token);\n                        }\n                        if (vditor.options.upload.withCredentials) {\n                            xhr_1.withCredentials = true;\n                        }\n                        setHeaders(vditor, xhr_1);\n                        xhr_1.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\");\n                        xhr_1.onreadystatechange = function () {\n                            if (xhr_1.readyState === XMLHttpRequest.DONE) {\n                                if (xhr_1.status === 200) {\n                                    var responseText = xhr_1.responseText;\n                                    if (vditor.options.upload.linkToImgFormat) {\n                                        responseText = vditor.options.upload.linkToImgFormat(xhr_1.responseText);\n                                    }\n                                    var responseJSON_1 = JSON.parse(responseText);\n                                    if (responseJSON_1.code !== 0) {\n                                        vditor.tip.show(responseJSON_1.msg);\n                                        return;\n                                    }\n                                    var original_1 = responseJSON_1.data.originalURL;\n                                    if (vditor.currentMode === \"sv\") {\n                                        vditor.sv.element.querySelectorAll(\".vditor-sv__marker--link\")\n                                            .forEach(function (item) {\n                                            if (item.textContent === original_1) {\n                                                item.textContent = responseJSON_1.data.url;\n                                            }\n                                        });\n                                    }\n                                    else {\n                                        var imgElement = vditor[vditor.currentMode].element.querySelector(\"img[src=\\\"\" + original_1 + \"\\\"]\");\n                                        imgElement.src = responseJSON_1.data.url;\n                                        if (vditor.currentMode === \"ir\") {\n                                            imgElement.previousElementSibling.previousElementSibling.innerHTML =\n                                                responseJSON_1.data.url;\n                                        }\n                                    }\n                                    execAfterRender(vditor);\n                                }\n                                else {\n                                    vditor.tip.show(xhr_1.responseText);\n                                }\n                                if (vditor.options.upload.linkToImgCallback) {\n                                    vditor.options.upload.linkToImgCallback(xhr_1.responseText);\n                                }\n                            }\n                        };\n                        xhr_1.send(JSON.stringify({ url: src }));\n                    }\n                    if (vditor.currentMode === \"ir\") {\n                        return [\"<span class=\\\"vditor-ir__marker vditor-ir__marker--link\\\">\" + src + \"</span>\", Lute.WalkContinue];\n                    }\n                    else if (vditor.currentMode === \"wysiwyg\") {\n                        return [\"\", Lute.WalkContinue];\n                    }\n                    else {\n                        return [\"<span class=\\\"vditor-sv__marker--link\\\">\" + src + \"</span>\", Lute.WalkContinue];\n                    }\n                };\n                // 浏览器地址栏拷贝处理\n                if (textHTML.replace(/&amp;/g, \"&\").replace(/<(|\\/)(html|body|meta)[^>]*?>/ig, \"\").trim() ===\n                    \"<a href=\\\"\" + textPlain + \"\\\">\" + textPlain + \"</a>\" ||\n                    textHTML.replace(/&amp;/g, \"&\").replace(/<(|\\/)(html|body|meta)[^>]*?>/ig, \"\").trim() ===\n                        \"<!--StartFragment--><a href=\\\"\" + textPlain + \"\\\">\" + textPlain + \"</a><!--EndFragment-->\") {\n                    textHTML = \"\";\n                }\n                doc = new DOMParser().parseFromString(textHTML, \"text/html\");\n                if (doc.body) {\n                    textHTML = doc.body.innerHTML;\n                }\n                vditor.wysiwyg.getComments(vditor);\n                height = vditor[vditor.currentMode].element.scrollHeight;\n                code = processPasteCode(textHTML, textPlain, vditor.currentMode);\n                codeElement = vditor.currentMode === \"sv\" ?\n                    (0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"code-block\") :\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"CODE\");\n                if (!codeElement) return [3 /*break*/, 1];\n                // 粘贴在代码位置\n                if (vditor.currentMode === \"sv\") {\n                    document.execCommand(\"insertHTML\", false, textPlain.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\"));\n                }\n                else {\n                    position = (0,selection/* getSelectPosition */.im)(event.target, vditor[vditor.currentMode].element);\n                    if (codeElement.parentElement.tagName !== \"PRE\") {\n                        // https://github.com/Vanessa219/vditor/issues/463\n                        textPlain += constants/* Constants.ZWSP */.g.ZWSP;\n                    }\n                    codeElement.textContent = codeElement.textContent.substring(0, position.start)\n                        + textPlain + codeElement.textContent.substring(position.end);\n                    (0,selection/* setSelectionByPosition */.$j)(position.start + textPlain.length, position.start + textPlain.length, codeElement.parentElement);\n                    if ((_a = codeElement.parentElement) === null || _a === void 0 ? void 0 : _a.nextElementSibling.classList.contains(\"vditor-\" + vditor.currentMode + \"__preview\")) {\n                        codeElement.parentElement.nextElementSibling.innerHTML = codeElement.outerHTML;\n                        processCodeRender(codeElement.parentElement.nextElementSibling, vditor);\n                    }\n                }\n                return [3 /*break*/, 6];\n            case 1:\n                if (!code) return [3 /*break*/, 2];\n                callback.pasteCode(code);\n                return [3 /*break*/, 6];\n            case 2:\n                if (!(textHTML.trim() !== \"\")) return [3 /*break*/, 3];\n                tempElement = document.createElement(\"div\");\n                tempElement.innerHTML = textHTML;\n                tempElement.querySelectorAll(\"[style]\").forEach(function (e) {\n                    e.removeAttribute(\"style\");\n                });\n                tempElement.querySelectorAll(\".vditor-copy\").forEach(function (e) {\n                    e.remove();\n                });\n                if (vditor.currentMode === \"ir\") {\n                    renderers.HTML2VditorIRDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    (0,selection/* insertHTML */.oC)(vditor.lute.HTML2VditorIRDOM(tempElement.innerHTML), vditor);\n                }\n                else if (vditor.currentMode === \"wysiwyg\") {\n                    renderers.HTML2VditorDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    (0,selection/* insertHTML */.oC)(vditor.lute.HTML2VditorDOM(tempElement.innerHTML), vditor);\n                }\n                else {\n                    renderers.Md2VditorSVDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    processPaste(vditor, vditor.lute.HTML2Md(tempElement.innerHTML).trimRight());\n                }\n                vditor.outline.render(vditor);\n                return [3 /*break*/, 6];\n            case 3:\n                if (!(files.length > 0 && vditor.options.upload.url)) return [3 /*break*/, 5];\n                return [4 /*yield*/, uploadFiles(vditor, files)];\n            case 4:\n                _b.sent();\n                return [3 /*break*/, 6];\n            case 5:\n                if (textPlain.trim() !== \"\" && files.length === 0) {\n                    if (vditor.currentMode === \"ir\") {\n                        renderers.Md2VditorIRDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        (0,selection/* insertHTML */.oC)(vditor.lute.Md2VditorIRDOM(textPlain), vditor);\n                    }\n                    else if (vditor.currentMode === \"wysiwyg\") {\n                        renderers.Md2VditorDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        (0,selection/* insertHTML */.oC)(vditor.lute.Md2VditorDOM(textPlain), vditor);\n                    }\n                    else {\n                        renderers.Md2VditorSVDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        processPaste(vditor, textPlain);\n                    }\n                    vditor.outline.render(vditor);\n                }\n                _b.label = 6;\n            case 6:\n                if (vditor.currentMode !== \"sv\") {\n                    blockElement = (0,hasClosest/* hasClosestBlock */.F9)((0,selection/* getEditorRange */.zh)(vditor).startContainer);\n                    if (blockElement) {\n                        range = (0,selection/* getEditorRange */.zh)(vditor);\n                        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n                            wbr.remove();\n                        });\n                        range.insertNode(document.createElement(\"wbr\"));\n                        if (vditor.currentMode === \"wysiwyg\") {\n                            blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n                        }\n                        else {\n                            blockElement.outerHTML = vditor.lute.SpinVditorIRDOM(blockElement.outerHTML);\n                        }\n                        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                    }\n                    vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n                        .forEach(function (item) {\n                        processCodeRender(item, vditor);\n                    });\n                }\n                vditor.wysiwyg.triggerRemoveComment(vditor);\n                execAfterRender(vditor);\n                if (vditor[vditor.currentMode].element.scrollHeight - height >\n                    Math.min(vditor[vditor.currentMode].element.clientHeight, window.innerHeight) / 2) {\n                    scrollCenter(vditor);\n                }\n                return [2 /*return*/];\n        }\n    });\n}); };\nvar templateObject_1;\n\n;// CONCATENATED MODULE: ./src/ts/ir/process.ts\n\n\n\n\n\n\n\n\n\nvar processHint = function (vditor) {\n    vditor.hint.render(vditor);\n    var startContainer = (0,selection/* getEditorRange */.zh)(vditor).startContainer;\n    // 代码块语言提示\n    var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-info\");\n    if (preBeforeElement) {\n        if (preBeforeElement.textContent.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && vditor.hint.recentLanguage) {\n            preBeforeElement.textContent = constants/* Constants.ZWSP */.g.ZWSP + vditor.hint.recentLanguage;\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            range.selectNodeContents(preBeforeElement);\n        }\n        else {\n            var matchLangData_1 = [];\n            var key_1 = preBeforeElement.textContent.substring(0, (0,selection/* getSelectPosition */.im)(preBeforeElement, vditor.ir.element).start)\n                .replace(constants/* Constants.ZWSP */.g.ZWSP, \"\");\n            constants/* Constants.CODE_LANGUAGES.forEach */.g.CODE_LANGUAGES.forEach(function (keyName) {\n                if (keyName.indexOf(key_1.toLowerCase()) > -1) {\n                    matchLangData_1.push({\n                        html: keyName,\n                        value: keyName,\n                    });\n                }\n            });\n            vditor.hint.genHTML(matchLangData_1, key_1, vditor);\n        }\n    }\n};\nvar process_processAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        processHint(vditor);\n    }\n    clearTimeout(vditor.ir.processTimeoutId);\n    vditor.ir.processTimeoutId = window.setTimeout(function () {\n        if (vditor.ir.composingLock) {\n            return;\n        }\n        var text = getMarkdown(vditor);\n        if (typeof vditor.options.input === \"function\" && options.enableInput) {\n            vditor.options.input(text);\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter.render(vditor, text);\n        }\n        if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n            localStorage.setItem(vditor.options.cache.id, text);\n            if (vditor.options.cache.after) {\n                vditor.options.cache.after(text);\n            }\n        }\n        if (vditor.devtools) {\n            vditor.devtools.renderEchart(vditor);\n        }\n        if (options.enableAddUndoStack) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\nvar process_processHeading = function (vditor, value) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var headingElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer) || range.startContainer;\n    if (headingElement) {\n        var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n        if (headingMarkerElement) {\n            headingMarkerElement.innerHTML = value;\n        }\n        else {\n            headingElement.insertAdjacentText(\"afterbegin\", value);\n            range.selectNodeContents(headingElement);\n            range.collapse(false);\n        }\n        input(vditor, range.cloneRange());\n        highlightToolbarIR(vditor);\n    }\n};\nvar removeInline = function (range, vditor, type) {\n    var inlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", type);\n    if (inlineElement) {\n        inlineElement.firstElementChild.remove();\n        inlineElement.lastElementChild.remove();\n        range.insertNode(document.createElement(\"wbr\"));\n        var tempElement = document.createElement(\"div\");\n        tempElement.innerHTML = vditor.lute.SpinVditorIRDOM(inlineElement.outerHTML);\n        inlineElement.outerHTML = tempElement.firstElementChild.innerHTML.trim();\n    }\n};\nvar process_processToolbar = function (vditor, actionBtn, prefix, suffix) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    var typeElement = range.startContainer;\n    if (typeElement.nodeType === 3) {\n        typeElement = typeElement.parentElement;\n    }\n    var useHighlight = true;\n    // 移除\n    if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n        if (commandName === \"quote\") {\n            var quoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\");\n            if (quoteElement) {\n                range.insertNode(document.createElement(\"wbr\"));\n                quoteElement.outerHTML = quoteElement.innerHTML.trim() === \"\" ?\n                    \"<p data-block=\\\"0\\\">\" + quoteElement.innerHTML + \"</p>\" : quoteElement.innerHTML;\n            }\n        }\n        else if (commandName === \"link\") {\n            var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"a\");\n            if (aElement) {\n                var aTextElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__link\");\n                if (aTextElement) {\n                    range.insertNode(document.createElement(\"wbr\"));\n                    aElement.outerHTML = aTextElement.innerHTML;\n                }\n                else {\n                    aElement.outerHTML = aElement.querySelector(\".vditor-ir__link\").innerHTML + \"<wbr>\";\n                }\n            }\n        }\n        else if (commandName === \"italic\") {\n            removeInline(range, vditor, \"em\");\n        }\n        else if (commandName === \"bold\") {\n            removeInline(range, vditor, \"strong\");\n        }\n        else if (commandName === \"strike\") {\n            removeInline(range, vditor, \"s\");\n        }\n        else if (commandName === \"inline-code\") {\n            removeInline(range, vditor, \"code\");\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName);\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n        }\n    }\n    else {\n        // 添加\n        if (vditor.ir.element.childNodes.length === 0) {\n            vditor.ir.element.innerHTML = '<p data-block=\"0\"><wbr></p>';\n            (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n        if (commandName === \"line\") {\n            if (blockElement) {\n                var hrHTML = '<hr data-block=\"0\"><p data-block=\"0\"><wbr>\\n</p>';\n                if (blockElement.innerHTML.trim() === \"\") {\n                    blockElement.outerHTML = hrHTML;\n                }\n                else {\n                    blockElement.insertAdjacentHTML(\"afterend\", hrHTML);\n                }\n            }\n        }\n        else if (commandName === \"quote\") {\n            if (blockElement) {\n                range.insertNode(document.createElement(\"wbr\"));\n                blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\" + blockElement.outerHTML + \"</blockquote>\";\n                useHighlight = false;\n                actionBtn.classList.add(\"vditor-menu--current\");\n            }\n        }\n        else if (commandName === \"link\") {\n            var html = void 0;\n            if (range.toString() === \"\") {\n                html = prefix + \"<wbr>\" + suffix;\n            }\n            else {\n                html = \"\" + prefix + range.toString() + suffix.replace(\")\", \"<wbr>)\");\n            }\n            document.execCommand(\"insertHTML\", false, html);\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"italic\" || commandName === \"bold\" || commandName === \"strike\"\n            || commandName === \"inline-code\" || commandName === \"code\" || commandName === \"table\") {\n            var html = void 0;\n            if (range.toString() === \"\") {\n                html = prefix + \"<wbr>\" + suffix;\n            }\n            else {\n                if (commandName === \"code\" || commandName === \"table\") {\n                    html = \"\" + prefix + range.toString() + \"<wbr>\" + suffix;\n                }\n                else {\n                    html = \"\" + prefix + range.toString() + suffix + \"<wbr>\";\n                }\n                range.deleteContents();\n            }\n            if (commandName === \"table\" || commandName === \"code\") {\n                html = \"\\n\" + html + \"\\n\\n\";\n            }\n            var spanElement = document.createElement(\"span\");\n            spanElement.innerHTML = html;\n            range.insertNode(spanElement);\n            input(vditor, range);\n            if (commandName === \"table\") {\n                range.selectNodeContents(getSelection().getRangeAt(0).startContainer.parentElement);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName, false);\n            useHighlight = false;\n            removeCurrentToolbar(vditor.toolbar.elements, [\"check\", \"list\", \"ordered-list\"]);\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    process_processAfterRender(vditor);\n    if (useHighlight) {\n        highlightToolbarIR(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/hint/index.ts\n\n\n\n\n\n\n\n\nvar Hint = /** @class */ (function () {\n    function Hint(hintExtends) {\n        var _this = this;\n        this.splitChar = \"\";\n        this.lastIndex = -1;\n        this.fillEmoji = function (element, vditor) {\n            _this.element.style.display = \"none\";\n            var value = decodeURIComponent(element.getAttribute(\"data-value\"));\n            var range = window.getSelection().getRangeAt(0);\n            // 代码提示\n            if (vditor.currentMode === \"ir\") {\n                var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"code-block-info\");\n                if (preBeforeElement) {\n                    preBeforeElement.textContent = constants/* Constants.ZWSP */.g.ZWSP + value.trimRight();\n                    range.selectNodeContents(preBeforeElement);\n                    range.collapse(false);\n                    process_processAfterRender(vditor);\n                    preBeforeElement.parentElement.querySelectorAll(\"code\").forEach(function (item) {\n                        item.className = \"language-\" + value.trimRight();\n                    });\n                    processCodeRender(preBeforeElement.parentElement.querySelector(\".vditor-ir__preview\"), vditor);\n                    _this.recentLanguage = value.trimRight();\n                    return;\n                }\n            }\n            if (vditor.currentMode === \"wysiwyg\" && range.startContainer.nodeType !== 3 &&\n                range.startContainer.firstElementChild.classList.contains(\"vditor-input\")) {\n                var inputElement = range.startContainer.firstElementChild;\n                inputElement.value = value.trimRight();\n                range.selectNodeContents(inputElement);\n                range.collapse(false);\n                inputElement.dispatchEvent(new CustomEvent(\"input\"));\n                _this.recentLanguage = value.trimRight();\n                return;\n            }\n            range.setStart(range.startContainer, _this.lastIndex);\n            range.deleteContents();\n            if (vditor.options.hint.parse) {\n                if (vditor.currentMode === \"sv\") {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorSVDOM(value), vditor);\n                }\n                else if (vditor.currentMode === \"wysiwyg\") {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorDOM(value), vditor);\n                }\n                else {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorIRDOM(value), vditor);\n                }\n            }\n            else {\n                (0,selection/* insertHTML */.oC)(value, vditor);\n            }\n            if (_this.splitChar === \":\" && value.indexOf(\":\") > -1 && vditor.currentMode !== \"sv\") {\n                range.insertNode(document.createTextNode(\" \"));\n            }\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            if (vditor.currentMode === \"wysiwyg\") {\n                var preElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-wysiwyg__block\");\n                if (preElement && preElement.lastElementChild.classList.contains(\"vditor-wysiwyg__preview\")) {\n                    preElement.lastElementChild.innerHTML = preElement.firstElementChild.innerHTML;\n                    processCodeRender(preElement.lastElementChild, vditor);\n                }\n            }\n            else if (vditor.currentMode === \"ir\") {\n                var preElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__marker--pre\");\n                if (preElement && preElement.nextElementSibling.classList.contains(\"vditor-ir__preview\")) {\n                    preElement.nextElementSibling.innerHTML = preElement.innerHTML;\n                    processCodeRender(preElement.nextElementSibling, vditor);\n                }\n            }\n            execAfterRender(vditor);\n        };\n        this.timeId = -1;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-hint\";\n        this.recentLanguage = \"\";\n        hintExtends.push({ key: \":\" });\n    }\n    Hint.prototype.render = function (vditor) {\n        var _this = this;\n        if (!window.getSelection().focusNode) {\n            return;\n        }\n        var currentLineValue;\n        var range = getSelection().getRangeAt(0);\n        currentLineValue = range.startContainer.textContent.substring(0, range.startOffset) || \"\";\n        var key = this.getKey(currentLineValue, vditor.options.hint.extend);\n        if (typeof key === \"undefined\") {\n            this.element.style.display = \"none\";\n            clearTimeout(this.timeId);\n        }\n        else {\n            if (this.splitChar === \":\") {\n                var emojiHint_1 = key === \"\" ? vditor.options.hint.emoji : vditor.lute.GetEmojis();\n                var matchEmojiData_1 = [];\n                Object.keys(emojiHint_1).forEach(function (keyName) {\n                    if (keyName.indexOf(key.toLowerCase()) === 0) {\n                        if (emojiHint_1[keyName].indexOf(\".\") > -1) {\n                            matchEmojiData_1.push({\n                                html: \"<img src=\\\"\" + emojiHint_1[keyName] + \"\\\" title=\\\":\" + keyName + \":\\\"/> :\" + keyName + \":\",\n                                value: \":\" + keyName + \":\",\n                            });\n                        }\n                        else {\n                            matchEmojiData_1.push({\n                                html: \"<span class=\\\"vditor-hint__emoji\\\">\" + emojiHint_1[keyName] + \"</span>\" + keyName,\n                                value: emojiHint_1[keyName],\n                            });\n                        }\n                    }\n                });\n                this.genHTML(matchEmojiData_1, key, vditor);\n            }\n            else {\n                vditor.options.hint.extend.forEach(function (item) {\n                    if (item.key === _this.splitChar) {\n                        clearTimeout(_this.timeId);\n                        _this.timeId = window.setTimeout(function () {\n                            _this.genHTML(item.hint(key), key, vditor);\n                        }, vditor.options.hint.delay);\n                    }\n                });\n            }\n        }\n    };\n    Hint.prototype.genHTML = function (data, key, vditor) {\n        var _this = this;\n        if (data.length === 0) {\n            this.element.style.display = \"none\";\n            return;\n        }\n        var editorElement = vditor[vditor.currentMode].element;\n        var textareaPosition = (0,selection/* getCursorPosition */.Ny)(editorElement);\n        var x = textareaPosition.left +\n            (vditor.options.outline.position === \"left\" ? vditor.outline.element.offsetWidth : 0);\n        var y = textareaPosition.top;\n        var hintsHTML = \"\";\n        data.forEach(function (hintData, i) {\n            if (i > 7) {\n                return;\n            }\n            // process high light\n            var html = hintData.html;\n            if (key !== \"\") {\n                var lastIndex = html.lastIndexOf(\">\") + 1;\n                var replaceHtml = html.substr(lastIndex);\n                var replaceIndex = replaceHtml.toLowerCase().indexOf(key.toLowerCase());\n                if (replaceIndex > -1) {\n                    replaceHtml = replaceHtml.substring(0, replaceIndex) + \"<b>\" +\n                        replaceHtml.substring(replaceIndex, replaceIndex + key.length) + \"</b>\" +\n                        replaceHtml.substring(replaceIndex + key.length);\n                    html = html.substr(0, lastIndex) + replaceHtml;\n                }\n            }\n            hintsHTML += \"<button data-value=\\\"\" + encodeURIComponent(hintData.value) + \" \\\"\\n\" + (i === 0 ? \"class='vditor-hint--current'\" : \"\") + \"> \" + html + \"</button>\";\n        });\n        this.element.innerHTML = hintsHTML;\n        var lineHeight = parseInt(document.defaultView.getComputedStyle(editorElement, null)\n            .getPropertyValue(\"line-height\"), 10);\n        this.element.style.top = y + (lineHeight || 22) + \"px\";\n        this.element.style.left = x + \"px\";\n        this.element.style.display = \"block\";\n        this.element.style.right = \"auto\";\n        this.element.querySelectorAll(\"button\").forEach(function (element) {\n            element.addEventListener(\"click\", function (event) {\n                _this.fillEmoji(element, vditor);\n                event.preventDefault();\n            });\n        });\n        // hint 展现在上部\n        if (this.element.getBoundingClientRect().bottom > window.innerHeight) {\n            this.element.style.top = y - this.element.offsetHeight + \"px\";\n        }\n        if (this.element.getBoundingClientRect().right > window.innerWidth) {\n            this.element.style.left = \"auto\";\n            this.element.style.right = \"0\";\n        }\n    };\n    Hint.prototype.select = function (event, vditor) {\n        if (this.element.querySelectorAll(\"button\").length === 0 ||\n            this.element.style.display === \"none\") {\n            return false;\n        }\n        var currentHintElement = this.element.querySelector(\".vditor-hint--current\");\n        if (event.key === \"ArrowDown\") {\n            event.preventDefault();\n            event.stopPropagation();\n            currentHintElement.removeAttribute(\"class\");\n            if (!currentHintElement.nextElementSibling) {\n                this.element.children[0].className = \"vditor-hint--current\";\n            }\n            else {\n                currentHintElement.nextElementSibling.className = \"vditor-hint--current\";\n            }\n            return true;\n        }\n        else if (event.key === \"ArrowUp\") {\n            event.preventDefault();\n            event.stopPropagation();\n            currentHintElement.removeAttribute(\"class\");\n            if (!currentHintElement.previousElementSibling) {\n                var length_1 = this.element.children.length;\n                this.element.children[length_1 - 1].className = \"vditor-hint--current\";\n            }\n            else {\n                currentHintElement.previousElementSibling.className = \"vditor-hint--current\";\n            }\n            return true;\n        }\n        else if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Enter\" && !event.isComposing) {\n            event.preventDefault();\n            event.stopPropagation();\n            this.fillEmoji(currentHintElement, vditor);\n            return true;\n        }\n        return false;\n    };\n    Hint.prototype.getKey = function (currentLineValue, extend) {\n        var _this = this;\n        this.lastIndex = -1;\n        this.splitChar = \"\";\n        extend.forEach(function (item) {\n            var currentLastIndex = currentLineValue.lastIndexOf(item.key);\n            if (_this.lastIndex < currentLastIndex) {\n                _this.splitChar = item.key;\n                _this.lastIndex = currentLastIndex;\n            }\n        });\n        var key;\n        if (this.lastIndex === -1) {\n            return key;\n        }\n        var lineArray = currentLineValue.split(this.splitChar);\n        var lastItem = lineArray[lineArray.length - 1];\n        var maxLength = 32;\n        if (lineArray.length > 1 && lastItem.trim() === lastItem) {\n            if (lineArray.length === 2 && lineArray[0] === \"\" && lineArray[1].length < maxLength) {\n                key = lineArray[1];\n            }\n            else {\n                var preChar = lineArray[lineArray.length - 2].slice(-1);\n                if ((0,code160to32/* code160to32 */.X)(preChar) === \" \" && lastItem.length < maxLength) {\n                    key = lastItem;\n                }\n            }\n        }\n        return key;\n    };\n    return Hint;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/ir/index.ts\n\n\n\n\n\n\n\n\n\n\n\nvar IR = /** @class */ (function () {\n    function IR(vditor) {\n        this.composingLock = false;\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-ir\";\n        divElement.innerHTML = \"<pre class=\\\"vditor-reset\\\" placeholder=\\\"\" + vditor.options.placeholder + \"\\\"\\n contenteditable=\\\"true\\\" spellcheck=\\\"false\\\"></pre>\";\n        this.element = divElement.firstElementChild;\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        dblclickEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n    }\n    IR.prototype.copy = function (event, vditor) {\n        var range = getSelection().getRangeAt(0);\n        if (range.toString() === \"\") {\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        var tempElement = document.createElement(\"div\");\n        tempElement.appendChild(range.cloneContents());\n        event.clipboardData.setData(\"text/plain\", vditor.lute.VditorIRDOM2Md(tempElement.innerHTML).trim());\n        event.clipboardData.setData(\"text/html\", \"\");\n    };\n    IR.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        });\n        this.element.addEventListener(\"compositionstart\", function (event) {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                input(vditor, getSelection().getRangeAt(0).cloneRange());\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 编辑器内容拖拽问题\n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                return;\n            }\n            if (_this.composingLock || event.data === \"‘\" || event.data === \"“\" || event.data === \"《\") {\n                return;\n            }\n            input(vditor, getSelection().getRangeAt(0).cloneRange(), false, event);\n        });\n        this.element.addEventListener(\"click\", function (event) {\n            if (event.target.tagName === \"INPUT\") {\n                if (event.target.checked) {\n                    event.target.setAttribute(\"checked\", \"checked\");\n                }\n                else {\n                    event.target.removeAttribute(\"checked\");\n                }\n                _this.preventInput = true;\n                process_processAfterRender(vditor);\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            // 点击后光标落于预览区\n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(event.target, \"vditor-ir__preview\");\n            if (!previewElement) {\n                previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n            }\n            if (previewElement) {\n                if (previewElement.previousElementSibling.firstElementChild) {\n                    range.selectNodeContents(previewElement.previousElementSibling.firstElementChild);\n                }\n                else {\n                    // 行内数学公式\n                    range.selectNodeContents(previewElement.previousElementSibling);\n                }\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                scrollCenter(vditor);\n            }\n            // 点击图片光标选中图片地址\n            if (event.target.tagName === \"IMG\") {\n                var linkElement = event.target.parentElement.querySelector(\".vditor-ir__marker--link\");\n                if (linkElement) {\n                    range.selectNode(linkElement);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n            }\n            // 打开链接\n            var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"a\");\n            if (aElement && (!aElement.classList.contains(\"vditor-ir__node--expand\"))) {\n                window.open(aElement.querySelector(\":scope > .vditor-ir__marker--link\").textContent);\n                return;\n            }\n            if (event.target.isEqualNode(_this.element) && _this.element.lastElementChild && range.collapsed) {\n                var lastRect = _this.element.lastElementChild.getBoundingClientRect();\n                if (event.y > lastRect.top + lastRect.height) {\n                    if (_this.element.lastElementChild.tagName === \"P\" &&\n                        _this.element.lastElementChild.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        range.selectNodeContents(_this.element.lastElementChild);\n                        range.collapse(false);\n                    }\n                    else {\n                        _this.element.insertAdjacentHTML(\"beforeend\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr></p>\");\n                        (0,selection/* setRangeByWbr */.ib)(_this.element, range);\n                    }\n                }\n            }\n            if (range.toString() === \"\") {\n                expandMarker(range, vditor);\n            }\n            else {\n                // https://github.com/Vanessa219/vditor/pull/681 当点击选中区域时 eventTarget 与 range 不一致，需延迟等待 range 发生变化\n                setTimeout(function () {\n                    expandMarker((0,selection/* getEditorRange */.zh)(vditor), vditor);\n                });\n            }\n            clickToc(event, vditor);\n            highlightToolbarIR(vditor);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n            highlightToolbarIR(vditor);\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.ir.element.innerHTML !== \"\" && vditor.ir.element.childNodes.length === 1 &&\n                vditor.ir.element.firstElementChild && vditor.ir.element.firstElementChild.tagName === \"P\"\n                && vditor.ir.element.firstElementChild.childElementCount === 0\n                && (vditor.ir.element.textContent === \"\" || vditor.ir.element.textContent === \"\\n\")) {\n                // 为空时显示 placeholder\n                vditor.ir.element.innerHTML = \"\";\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.key === \"Backspace\") {\n                // firefox headings https://github.com/Vanessa219/vditor/issues/211\n                if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.textContent === \"\\n\" && range.startOffset === 1) {\n                    range.startContainer.textContent = \"\";\n                    expandMarker(range, vditor);\n                }\n                // 数学公式前是空块，空块前是 table，在空块前删除，数学公式会多一个 br\n                _this.element.querySelectorAll(\".language-math\").forEach(function (item) {\n                    var brElement = item.querySelector(\"br\");\n                    if (brElement) {\n                        brElement.remove();\n                    }\n                });\n            }\n            else if (event.key.indexOf(\"Arrow\") > -1) {\n                if (event.key === \"ArrowLeft\" || event.key === \"ArrowRight\") {\n                    processHint(vditor);\n                }\n                expandMarker(range, vditor);\n            }\n            else if (event.keyCode === 229 && event.code === \"\" && event.key === \"Unidentified\") {\n                // https://github.com/Vanessa219/vditor/issues/508 IR 删除到节点需展开\n                expandMarker(range, vditor);\n            }\n            var previewRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n            if (previewRenderElement) {\n                if (event.key === \"ArrowUp\" || event.key === \"ArrowLeft\") {\n                    if (previewRenderElement.previousElementSibling.firstElementChild) {\n                        range.selectNodeContents(previewRenderElement.previousElementSibling.firstElementChild);\n                    }\n                    else {\n                        // 行内数学公式/html entity\n                        range.selectNodeContents(previewRenderElement.previousElementSibling);\n                    }\n                    range.collapse(false);\n                    event.preventDefault();\n                    return true;\n                }\n                if (previewRenderElement.tagName === \"SPAN\" &&\n                    (event.key === \"ArrowDown\" || event.key === \"ArrowRight\")) {\n                    if (previewRenderElement.parentElement.getAttribute(\"data-type\") === \"html-entity\") {\n                        // html entity\n                        previewRenderElement.parentElement.insertAdjacentText(\"afterend\", constants/* Constants.ZWSP */.g.ZWSP);\n                        range.setStart(previewRenderElement.parentElement.nextSibling, 1);\n                    }\n                    else {\n                        range.selectNodeContents(previewRenderElement.parentElement.lastElementChild);\n                    }\n                    range.collapse(false);\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        });\n    };\n    return IR;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/markdown/getHTML.ts\n\nvar getHTML = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return vditor.lute.Md2HTML(getMarkdown(vditor));\n    }\n    else if (vditor.currentMode === \"wysiwyg\") {\n        return vditor.lute.VditorDOM2HTML(vditor.wysiwyg.element.innerHTML);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        return vditor.lute.VditorIRDOM2HTML(vditor.ir.element.innerHTML);\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/setLute.ts\nvar setLute = __webpack_require__(792);\n// EXTERNAL MODULE: ./src/ts/markdown/outlineRender.ts\nvar outlineRender = __webpack_require__(198);\n;// CONCATENATED MODULE: ./src/ts/outline/index.ts\n\n\n\n\nvar Outline = /** @class */ (function () {\n    function Outline(outlineLabel) {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-outline\";\n        this.element.innerHTML = \"<div class=\\\"vditor-outline__title\\\">\" + outlineLabel + \"</div>\\n<div class=\\\"vditor-outline__content\\\"></div>\";\n    }\n    Outline.prototype.render = function (vditor) {\n        var html = \"\";\n        if (vditor.preview.element.style.display === \"block\") {\n            html = (0,outlineRender/* outlineRender */.k)(vditor.preview.element.lastElementChild, this.element.lastElementChild, vditor);\n        }\n        else {\n            html = (0,outlineRender/* outlineRender */.k)(vditor[vditor.currentMode].element, this.element.lastElementChild, vditor);\n        }\n        return html;\n    };\n    Outline.prototype.toggle = function (vditor, show) {\n        var _a;\n        if (show === void 0) { show = true; }\n        var btnElement = (_a = vditor.toolbar.elements.outline) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n        if (show && window.innerWidth >= constants/* Constants.MOBILE_WIDTH */.g.MOBILE_WIDTH) {\n            this.element.style.display = \"block\";\n            this.render(vditor);\n            btnElement === null || btnElement === void 0 ? void 0 : btnElement.classList.add(\"vditor-menu--current\");\n        }\n        else {\n            this.element.style.display = \"none\";\n            btnElement === null || btnElement === void 0 ? void 0 : btnElement.classList.remove(\"vditor-menu--current\");\n        }\n        if (getSelection().rangeCount > 0) {\n            var range = getSelection().getRangeAt(0);\n            if (vditor[vditor.currentMode].element.contains(range.startContainer)) {\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else {\n                vditor[vditor.currentMode].element.focus();\n            }\n        }\n        setPadding(vditor);\n    };\n    return Outline;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/markdown/mediaRender.ts\nvar mediaRender = __webpack_require__(207);\n;// CONCATENATED MODULE: ./src/ts/preview/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Preview = /** @class */ (function () {\n    function Preview(vditor) {\n        var _this = this;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-preview\";\n        var previewElement = document.createElement(\"div\");\n        previewElement.className = \"vditor-reset\";\n        if (vditor.options.classes.preview) {\n            previewElement.classList.add(vditor.options.classes.preview);\n        }\n        previewElement.style.maxWidth = vditor.options.preview.maxWidth + \"px\";\n        previewElement.addEventListener(\"copy\", function (event) {\n            if (event.target.tagName === \"TEXTAREA\") {\n                // https://github.com/Vanessa219/vditor/issues/901\n                return;\n            }\n            var tempElement = document.createElement(\"div\");\n            tempElement.className = \"vditor-reset\";\n            tempElement.appendChild(getSelection().getRangeAt(0).cloneContents());\n            _this.copyToX(vditor, tempElement);\n            event.preventDefault();\n        });\n        previewElement.addEventListener(\"click\", function (event) {\n            var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n            if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n                var headingElement = previewElement.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n                if (headingElement) {\n                    _this.element.scrollTop = headingElement.offsetTop;\n                }\n                return;\n            }\n            if (event.target.tagName === \"IMG\") {\n                (0,preview_image/* previewImage */.E)(event.target, vditor.options.lang, vditor.options.theme);\n            }\n        });\n        var actions = vditor.options.preview.actions;\n        var actionElement = document.createElement(\"div\");\n        actionElement.className = \"vditor-preview__action\";\n        var actionHtml = [];\n        for (var i = 0; i < actions.length; i++) {\n            var action = actions[i];\n            if (typeof action === \"object\") {\n                actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"\" + action.key + \"\\\" class=\\\"\" + action.className + \"\\\"\" + (action.tooltip ? \" aria-label=\\\"\" + action.tooltip + \"\\\"\" : \"\") + \"\\\">\" + action.text + \"</button>\");\n                continue;\n            }\n            switch (action) {\n                case \"desktop\":\n                    actionHtml.push(\"<button type=\\\"button\\\" class=\\\"vditor-preview__action--current\\\" data-type=\\\"desktop\\\">Desktop</button>\");\n                    break;\n                case \"tablet\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"tablet\\\">Tablet</button>\");\n                    break;\n                case \"mobile\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"mobile\\\">Mobile/Wechat</button>\");\n                    break;\n                case \"mp-wechat\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"mp-wechat\\\" class=\\\"vditor-tooltipped vditor-tooltipped__w\\\" aria-label=\\\"\\u590D\\u5236\\u5230\\u516C\\u4F17\\u53F7\\\"><svg><use xlink:href=\\\"#vditor-icon-mp-wechat\\\"></use></svg></button>\");\n                    break;\n                case \"zhihu\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"zhihu\\\" class=\\\"vditor-tooltipped vditor-tooltipped__w\\\" aria-label=\\\"\\u590D\\u5236\\u5230\\u77E5\\u4E4E\\\"><svg><use xlink:href=\\\"#vditor-icon-zhihu\\\"></use></svg></button>\");\n                    break;\n            }\n        }\n        actionElement.innerHTML = actionHtml.join(\"\");\n        if (actions.length === 0) {\n            actionElement.style.display = \"none\";\n        }\n        this.element.appendChild(actionElement);\n        this.element.appendChild(previewElement);\n        actionElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btn = (0,hasClosestByHeadings/* hasClosestByTag */.S)(event.target, \"BUTTON\");\n            if (!btn) {\n                return;\n            }\n            var type = btn.getAttribute(\"data-type\");\n            var actionCustom = actions.find(function (w) { return (w === null || w === void 0 ? void 0 : w.key) === type; });\n            if (actionCustom) {\n                actionCustom.click(type);\n                return;\n            }\n            if (type === \"mp-wechat\" || type === \"zhihu\") {\n                _this.copyToX(vditor, _this.element.lastElementChild.cloneNode(true), type);\n                return;\n            }\n            if (type === \"desktop\") {\n                previewElement.style.width = \"auto\";\n            }\n            else if (type === \"tablet\") {\n                previewElement.style.width = \"780px\";\n            }\n            else {\n                previewElement.style.width = \"360px\";\n            }\n            if (previewElement.scrollWidth > previewElement.parentElement.clientWidth) {\n                previewElement.style.width = \"auto\";\n            }\n            _this.render(vditor);\n            actionElement.querySelectorAll(\"button\").forEach(function (item) {\n                item.classList.remove(\"vditor-preview__action--current\");\n            });\n            btn.classList.add(\"vditor-preview__action--current\");\n        });\n    }\n    Preview.prototype.render = function (vditor, value) {\n        var _this = this;\n        clearTimeout(this.mdTimeoutId);\n        if (this.element.style.display === \"none\") {\n            if (this.element.getAttribute(\"data-type\") === \"renderPerformance\") {\n                vditor.tip.hide();\n            }\n            return;\n        }\n        if (value) {\n            this.element.lastElementChild.innerHTML = value;\n            return;\n        }\n        if (getMarkdown(vditor)\n            .replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, \"\") === \"\") {\n            this.element.lastElementChild.innerHTML = \"\";\n            return;\n        }\n        var renderStartTime = new Date().getTime();\n        var markdownText = getMarkdown(vditor);\n        this.mdTimeoutId = window.setTimeout(function () {\n            if (vditor.options.preview.url) {\n                var xhr_1 = new XMLHttpRequest();\n                xhr_1.open(\"POST\", vditor.options.preview.url);\n                xhr_1.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\n                xhr_1.onreadystatechange = function () {\n                    if (xhr_1.readyState === XMLHttpRequest.DONE) {\n                        if (xhr_1.status === 200) {\n                            var responseJSON = JSON.parse(xhr_1.responseText);\n                            if (responseJSON.code !== 0) {\n                                vditor.tip.show(responseJSON.msg);\n                                return;\n                            }\n                            if (vditor.options.preview.transform) {\n                                responseJSON.data = vditor.options.preview.transform(responseJSON.data);\n                            }\n                            _this.element.lastElementChild.innerHTML = responseJSON.data;\n                            _this.afterRender(vditor, renderStartTime);\n                        }\n                        else {\n                            var html = vditor.lute.Md2HTML(markdownText);\n                            if (vditor.options.preview.transform) {\n                                html = vditor.options.preview.transform(html);\n                            }\n                            _this.element.lastElementChild.innerHTML = html;\n                            _this.afterRender(vditor, renderStartTime);\n                        }\n                    }\n                };\n                xhr_1.send(JSON.stringify({ markdownText: markdownText }));\n            }\n            else {\n                var html = vditor.lute.Md2HTML(markdownText);\n                if (vditor.options.preview.transform) {\n                    html = vditor.options.preview.transform(html);\n                }\n                _this.element.lastElementChild.innerHTML = html;\n                _this.afterRender(vditor, renderStartTime);\n            }\n        }, vditor.options.preview.delay);\n    };\n    Preview.prototype.afterRender = function (vditor, startTime) {\n        if (vditor.options.preview.parse) {\n            vditor.options.preview.parse(this.element);\n        }\n        var time = (new Date().getTime() - startTime);\n        if ((new Date().getTime() - startTime) > 2600) {\n            // https://github.com/b3log/vditor/issues/67\n            vditor.tip.show(window.VditorI18n.performanceTip.replace(\"${x}\", time.toString()));\n            vditor.preview.element.setAttribute(\"data-type\", \"renderPerformance\");\n        }\n        else if (vditor.preview.element.getAttribute(\"data-type\") === \"renderPerformance\") {\n            vditor.tip.hide();\n            vditor.preview.element.removeAttribute(\"data-type\");\n        }\n        var cmtFocusElement = vditor.preview.element.querySelector(\".vditor-comment--focus\");\n        if (cmtFocusElement) {\n            cmtFocusElement.classList.remove(\"vditor-comment--focus\");\n        }\n        (0,codeRender/* codeRender */.O)(vditor.preview.element.lastElementChild);\n        (0,highlightRender/* highlightRender */.s)(vditor.options.preview.hljs, vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,mermaidRender/* mermaidRender */.i)(vditor.preview.element.lastElementChild, vditor.options.cdn, vditor.options.theme);\n        (0,flowchartRender/* flowchartRender */.P)(vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,graphvizRender/* graphvizRender */.v)(vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,chartRender/* chartRender */.p)(vditor.preview.element.lastElementChild, vditor.options.cdn, vditor.options.theme);\n        (0,mindmapRender/* mindmapRender */.P)(vditor.preview.element.lastElementChild, vditor.options.cdn, vditor.options.theme);\n        (0,plantumlRender/* plantumlRender */.B)(vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,abcRender/* abcRender */.Q)(vditor.preview.element.lastElementChild, vditor.options.cdn);\n        (0,mediaRender/* mediaRender */.Y)(vditor.preview.element.lastElementChild);\n        // toc render\n        var editorElement = vditor.preview.element;\n        var tocHTML = vditor.outline.render(vditor);\n        if (tocHTML === \"\") {\n            tocHTML = \"[ToC]\";\n        }\n        editorElement.querySelectorAll('[data-type=\"toc-block\"]').forEach(function (item) {\n            item.innerHTML = tocHTML;\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n        (0,mathRender/* mathRender */.H)(vditor.preview.element.lastElementChild, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    };\n    Preview.prototype.copyToX = function (vditor, copyElement, type) {\n        if (type === void 0) { type = \"mp-wechat\"; }\n        // fix math render\n        if (type !== \"zhihu\") {\n            copyElement.querySelectorAll(\".katex-html .base\").forEach(function (item) {\n                item.style.display = \"initial\";\n            });\n        }\n        else {\n            copyElement.querySelectorAll(\".language-math\").forEach(function (item) {\n                item.outerHTML = \"<img class=\\\"Formula-image\\\" data-eeimg=\\\"true\\\" src=\\\"//www.zhihu.com/equation?tex=\\\" alt=\\\"\" + item.getAttribute(\"data-math\") + \"\\\\\\\" style=\\\"display: block; margin: 0 auto; max-width: 100%;\\\">\";\n            });\n        }\n        // 防止背景色被粘贴到公众号中\n        copyElement.style.backgroundColor = \"#fff\";\n        // 代码背景\n        copyElement.querySelectorAll(\"code\").forEach(function (item) {\n            item.style.backgroundImage = \"none\";\n        });\n        this.element.append(copyElement);\n        var range = copyElement.ownerDocument.createRange();\n        range.selectNode(copyElement);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        document.execCommand(\"copy\");\n        this.element.lastElementChild.remove();\n        vditor.tip.show(\"\\u5DF2\\u590D\\u5236\\uFF0C\\u53EF\\u5230\" + (type === \"zhihu\" ? \"知乎\" : \"微信公众号平台\") + \"\\u8FDB\\u884C\\u7C98\\u8D34\");\n    };\n    return Preview;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/resize/index.ts\nvar Resize = /** @class */ (function () {\n    function Resize(vditor) {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-resize vditor-resize--\" + vditor.options.resize.position;\n        this.element.innerHTML = \"<div><svg><use xlink:href=\\\"#vditor-icon-resize\\\"></use></svg></div>\";\n        this.bindEvent(vditor);\n    }\n    Resize.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"mousedown\", function (event) {\n            var documentSelf = document;\n            var y = event.clientY;\n            var height = vditor.element.offsetHeight;\n            var minHeight = 63 + vditor.element.querySelector(\".vditor-toolbar\").clientHeight;\n            documentSelf.ondragstart = function () { return false; };\n            if (window.captureEvents) {\n                window.captureEvents();\n            }\n            _this.element.classList.add(\"vditor-resize--selected\");\n            documentSelf.onmousemove = function (moveEvent) {\n                if (vditor.options.resize.position === \"top\") {\n                    vditor.element.style.height = Math.max(minHeight, height + (y - moveEvent.clientY)) + \"px\";\n                }\n                else {\n                    vditor.element.style.height = Math.max(minHeight, height + (moveEvent.clientY - y)) + \"px\";\n                }\n                if (vditor.options.typewriterMode) {\n                    vditor.sv.element.style.paddingBottom =\n                        vditor.sv.element.parentElement.offsetHeight / 2 + \"px\";\n                }\n            };\n            documentSelf.onmouseup = function () {\n                if (vditor.options.resize.after) {\n                    vditor.options.resize.after(vditor.element.offsetHeight - height);\n                }\n                if (window.captureEvents) {\n                    window.captureEvents();\n                }\n                documentSelf.onmousemove = null;\n                documentSelf.onmouseup = null;\n                documentSelf.ondragstart = null;\n                documentSelf.onselectstart = null;\n                documentSelf.onselect = null;\n                _this.element.classList.remove(\"vditor-resize--selected\");\n            };\n        });\n    };\n    return Resize;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/sv/index.ts\n\n\n\n\n\nvar Editor = /** @class */ (function () {\n    function Editor(vditor) {\n        this.composingLock = false;\n        this.element = document.createElement(\"pre\");\n        this.element.className = \"vditor-sv vditor-reset\";\n        this.element.setAttribute(\"placeholder\", vditor.options.placeholder);\n        this.element.setAttribute(\"contenteditable\", \"true\");\n        this.element.setAttribute(\"spellcheck\", \"false\");\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n    }\n    Editor.prototype.copy = function (event, vditor) {\n        event.stopPropagation();\n        event.preventDefault();\n        event.clipboardData.setData(\"text/plain\", getSelectText(vditor[vditor.currentMode].element));\n    };\n    Editor.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        });\n        this.element.addEventListener(\"scroll\", function () {\n            if (vditor.preview.element.style.display !== \"block\") {\n                return;\n            }\n            var textScrollTop = _this.element.scrollTop;\n            var textHeight = _this.element.clientHeight;\n            var textScrollHeight = _this.element.scrollHeight - parseFloat(_this.element.style.paddingBottom || \"0\");\n            var preview = vditor.preview.element;\n            if ((textScrollTop / textHeight > 0.5)) {\n                preview.scrollTop = (textScrollTop + textHeight) *\n                    preview.scrollHeight / textScrollHeight - textHeight;\n            }\n            else {\n                preview.scrollTop = textScrollTop *\n                    preview.scrollHeight / textScrollHeight;\n            }\n        });\n        this.element.addEventListener(\"compositionstart\", function (event) {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                inputEvent(vditor, event);\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 编辑器内容拖拽问题\n                return;\n            }\n            if (_this.composingLock || event.data === \"‘\" || event.data === \"“\" || event.data === \"《\") {\n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                return;\n            }\n            inputEvent(vditor, event);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.sv.element.innerHTML !== \"\" && vditor.sv.element.childNodes.length === 1 &&\n                vditor.sv.element.firstElementChild && vditor.sv.element.firstElementChild.tagName === \"DIV\"\n                && vditor.sv.element.firstElementChild.childElementCount === 2\n                && (vditor.sv.element.firstElementChild.textContent === \"\" || vditor.sv.element.textContent === \"\\n\")) {\n                // 为空时显示 placeholder\n                vditor.sv.element.innerHTML = \"\";\n                return;\n            }\n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n        });\n    };\n    return Editor;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/tip/index.ts\nvar Tip = /** @class */ (function () {\n    function Tip() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-tip\";\n    }\n    Tip.prototype.show = function (text, time) {\n        var _this = this;\n        if (time === void 0) { time = 6000; }\n        this.element.className = \"vditor-tip vditor-tip--show\";\n        if (time === 0) {\n            this.element.innerHTML = \"<div class=\\\"vditor-tip__content\\\">\" + text + \"\\n<div class=\\\"vditor-tip__close\\\">X</div></div>\";\n            this.element.querySelector(\".vditor-tip__close\").addEventListener(\"click\", function () {\n                _this.hide();\n            });\n            return;\n        }\n        this.element.innerHTML = \"<div class=\\\"vditor-tip__content\\\">\" + text + \"</div>\";\n        setTimeout(function () {\n            _this.hide();\n        }, time);\n    };\n    Tip.prototype.hide = function () {\n        this.element.className = \"vditor-messageElementtip\";\n        this.element.innerHTML = \"\";\n    };\n    return Tip;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/ui/setPreviewMode.ts\n\n\nvar setPreviewMode = function (mode, vditor) {\n    if (vditor.options.preview.mode === mode) {\n        return;\n    }\n    vditor.options.preview.mode = mode;\n    switch (mode) {\n        case \"both\":\n            vditor.sv.element.style.display = \"block\";\n            vditor.preview.element.style.display = \"block\";\n            vditor.preview.render(vditor);\n            setCurrentToolbar(vditor.toolbar.elements, [\"both\"]);\n            break;\n        case \"editor\":\n            vditor.sv.element.style.display = \"block\";\n            vditor.preview.element.style.display = \"none\";\n            removeCurrentToolbar(vditor.toolbar.elements, [\"both\"]);\n            break;\n        default:\n            break;\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Both.ts\nvar Both_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Both = /** @class */ (function (_super) {\n    Both_extends(Both, _super);\n    function Both(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        if (vditor.options.preview.mode === \"both\") {\n            _this.element.children[0].classList.add(\"vditor-menu--current\");\n        }\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            event.preventDefault();\n            if (vditor.currentMode !== \"sv\") {\n                return;\n            }\n            if (vditor.options.preview.mode === \"both\") {\n                setPreviewMode(\"editor\", vditor);\n            }\n            else {\n                setPreviewMode(\"both\", vditor);\n            }\n        });\n        return _this;\n    }\n    return Both;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Br.ts\nvar Br = /** @class */ (function () {\n    function Br() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar__br\";\n    }\n    return Br;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/ui/setCodeTheme.ts\nvar setCodeTheme = __webpack_require__(968);\n;// CONCATENATED MODULE: ./src/ts/toolbar/CodeTheme.ts\nvar CodeTheme_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar CodeTheme = /** @class */ (function (_super) {\n    CodeTheme_extends(CodeTheme, _super);\n    function CodeTheme(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\" + (menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        var innerHTML = \"\";\n        constants/* Constants.CODE_THEME.forEach */.g.CODE_THEME.forEach(function (theme) {\n            innerHTML += \"<button>\" + theme + \"</button>\";\n        });\n        panelElement.innerHTML =\n            \"<div style=\\\"overflow: auto;max-height:\" + window.innerHeight / 2 + \"px\\\">\" + innerHTML + \"</div>\";\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (event.target.tagName === \"BUTTON\") {\n                hidePanel(vditor, [\"subToolbar\"]);\n                vditor.options.preview.hljs.style = event.target.textContent;\n                (0,setCodeTheme/* setCodeTheme */.Y)(event.target.textContent, vditor.options.cdn);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return CodeTheme;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/ContentTheme.ts\nvar ContentTheme_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar ContentTheme = /** @class */ (function (_super) {\n    ContentTheme_extends(ContentTheme, _super);\n    function ContentTheme(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\" + (menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        var innerHTML = \"\";\n        Object.keys(vditor.options.preview.theme.list).forEach(function (key) {\n            innerHTML += \"<button data-type=\\\"\" + key + \"\\\">\" + vditor.options.preview.theme.list[key] + \"</button>\";\n        });\n        panelElement.innerHTML =\n            \"<div style=\\\"overflow: auto;max-height:\" + window.innerHeight / 2 + \"px\\\">\" + innerHTML + \"</div>\";\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (event.target.tagName === \"BUTTON\") {\n                hidePanel(vditor, [\"subToolbar\"]);\n                vditor.options.preview.theme.current = event.target.getAttribute(\"data-type\");\n                (0,setContentTheme/* setContentTheme */.Z)(vditor.options.preview.theme.current, vditor.options.preview.theme.path);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return ContentTheme;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Counter.ts\nvar Counter = /** @class */ (function () {\n    function Counter(vditor) {\n        this.element = document.createElement(\"span\");\n        this.element.className = \"vditor-counter vditor-tooltipped vditor-tooltipped__nw\";\n        this.render(vditor, \"\");\n    }\n    Counter.prototype.render = function (vditor, mdText) {\n        var length = mdText.endsWith(\"\\n\") ? mdText.length - 1 : mdText.length;\n        if (vditor.options.counter.type === \"text\" && vditor[vditor.currentMode]) {\n            var tempElement = vditor[vditor.currentMode].element.cloneNode(true);\n            tempElement.querySelectorAll(\".vditor-wysiwyg__preview\").forEach(function (item) {\n                item.remove();\n            });\n            length = tempElement.textContent.length;\n        }\n        if (typeof vditor.options.counter.max === \"number\") {\n            if (length > vditor.options.counter.max) {\n                this.element.className = \"vditor-counter vditor-counter--error\";\n            }\n            else {\n                this.element.className = \"vditor-counter\";\n            }\n            this.element.innerHTML = length + \"/\" + vditor.options.counter.max;\n        }\n        else {\n            this.element.innerHTML = \"\" + length;\n        }\n        this.element.setAttribute(\"aria-label\", vditor.options.counter.type);\n        if (vditor.options.counter.after) {\n            vditor.options.counter.after(length, {\n                enable: vditor.options.counter.enable,\n                max: vditor.options.counter.max,\n                type: vditor.options.counter.type,\n            });\n        }\n    };\n    return Counter;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Custom.ts\nvar Custom_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Custom = /** @class */ (function (_super) {\n    Custom_extends(Custom, _super);\n    function Custom(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].innerHTML = menuItem.icon;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (event.currentTarget.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            menuItem.click(event, vditor);\n        });\n        return _this;\n    }\n    return Custom;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Devtools.ts\nvar Devtools_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Devtools = /** @class */ (function (_super) {\n    Devtools_extends(Devtools, _super);\n    function Devtools(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.firstElementChild.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            event.preventDefault();\n            if (btnElement.classList.contains(\"vditor-menu--current\")) {\n                btnElement.classList.remove(\"vditor-menu--current\");\n                vditor.devtools.element.style.display = \"none\";\n                setPadding(vditor);\n            }\n            else {\n                btnElement.classList.add(\"vditor-menu--current\");\n                vditor.devtools.element.style.display = \"block\";\n                setPadding(vditor);\n                vditor.devtools.renderEchart(vditor);\n            }\n        });\n        return _this;\n    }\n    return Devtools;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Divider.ts\nvar Divider = /** @class */ (function () {\n    function Divider() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar__divider\";\n    }\n    return Divider;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Emoji.ts\nvar Emoji_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar Emoji = /** @class */ (function (_super) {\n    Emoji_extends(Emoji, _super);\n    function Emoji(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-panel vditor-panel--arrow\";\n        var commonEmojiHTML = \"\";\n        Object.keys(vditor.options.hint.emoji).forEach(function (key) {\n            var emojiValue = vditor.options.hint.emoji[key];\n            if (emojiValue.indexOf(\".\") > -1) {\n                commonEmojiHTML += \"<button data-value=\\\":\" + key + \": \\\" data-key=\\\":\" + key + \":\\\"><img\\ndata-value=\\\":\" + key + \": \\\" data-key=\\\":\" + key + \":\\\" class=\\\"vditor-emojis__icon\\\" src=\\\"\" + emojiValue + \"\\\"/></button>\";\n            }\n            else {\n                commonEmojiHTML += \"<button data-value=\\\"\" + emojiValue + \" \\\"\\n data-key=\\\"\" + key + \"\\\"><span class=\\\"vditor-emojis__icon\\\">\" + emojiValue + \"</span></button>\";\n            }\n        });\n        var tailHTML = \"<div class=\\\"vditor-emojis__tail\\\">\\n    <span class=\\\"vditor-emojis__tip\\\"></span><span>\" + (vditor.options.hint.emojiTail || \"\") + \"</span>\\n</div>\";\n        panelElement.innerHTML = \"<div class=\\\"vditor-emojis\\\" style=\\\"max-height: \" + (vditor.options.height === \"auto\" ? \"auto\" : vditor.options.height - 80) + \"px\\\">\" + commonEmojiHTML + \"</div>\" + tailHTML;\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, _this.element.children[0], menuItem.level);\n        _this._bindEvent(vditor, panelElement);\n        return _this;\n    }\n    Emoji.prototype._bindEvent = function (vditor, panelElement) {\n        panelElement.querySelectorAll(\".vditor-emojis button\").forEach(function (element) {\n            element.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n                event.preventDefault();\n                var value = element.getAttribute(\"data-value\");\n                var range = (0,selection/* getEditorRange */.zh)(vditor);\n                var html = value;\n                if (vditor.currentMode === \"wysiwyg\") {\n                    html = vditor.lute.SpinVditorDOM(value);\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    html = vditor.lute.SpinVditorIRDOM(value);\n                }\n                if (value.indexOf(\":\") > -1 && vditor.currentMode !== \"sv\") {\n                    var tempElement = document.createElement(\"div\");\n                    tempElement.innerHTML = html;\n                    html = tempElement.firstElementChild.firstElementChild.outerHTML + \" \";\n                    (0,selection/* insertHTML */.oC)(html, vditor);\n                }\n                else {\n                    range.extractContents();\n                    range.insertNode(document.createTextNode(value));\n                }\n                range.collapse(false);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                panelElement.style.display = \"none\";\n                execAfterRender(vditor);\n            });\n            element.addEventListener(\"mouseover\", function (event) {\n                if (event.target.tagName === \"BUTTON\") {\n                    panelElement.querySelector(\".vditor-emojis__tip\").innerHTML =\n                        event.target.getAttribute(\"data-key\");\n                }\n            });\n        });\n    };\n    return Emoji;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/export/index.ts\n\n\nvar download = function (vditor, content, filename) {\n    var aElement = document.createElement(\"a\");\n    if (\"download\" in aElement) {\n        aElement.download = filename;\n        aElement.style.display = \"none\";\n        aElement.href = URL.createObjectURL(new Blob([content]));\n        document.body.appendChild(aElement);\n        aElement.click();\n        aElement.remove();\n    }\n    else {\n        vditor.tip.show(window.VditorI18n.downloadTip, 0);\n    }\n};\nvar exportMarkdown = function (vditor) {\n    var content = getMarkdown(vditor);\n    download(vditor, content, content.substr(0, 10) + \".md\");\n};\nvar exportPDF = function (vditor) {\n    vditor.tip.show(window.VditorI18n.generate, 3800);\n    var iframe = document.querySelector(\"iframe\");\n    iframe.contentDocument.open();\n    iframe.contentDocument.write(\"<link rel=\\\"stylesheet\\\" href=\\\"\" + vditor.options.cdn + \"/dist/index.css\\\"/>\\n<script src=\\\"\" + vditor.options.cdn + \"/dist/method.min.js\\\"></script>\\n<div id=\\\"preview\\\"></div>\\n<script>\\nwindow.addEventListener(\\\"message\\\", (e) => {\\n  if(!e.data) {\\n    return;\\n  }\\n  Vditor.preview(document.getElementById('preview'), e.data, {\\n    markdown: {\\n      theme: \\\"\" + vditor.options.preview.theme + \"\\\"\\n    },\\n    hljs: {\\n      style: \\\"\" + vditor.options.preview.hljs.style + \"\\\"\\n    }\\n  });\\n  setTimeout(() => {\\n        window.print();\\n    }, 3600);\\n}, false);\\n</script>\");\n    iframe.contentDocument.close();\n    setTimeout(function () {\n        iframe.contentWindow.postMessage(getMarkdown(vditor), \"*\");\n    }, 200);\n};\nvar exportHTML = function (vditor) {\n    var content = getHTML(vditor);\n    var html = \"<html><head><link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"\" + vditor.options.cdn + \"/dist/index.css\\\"/>\\n<script src=\\\"\" + vditor.options.cdn + \"/dist/js/i18n/\" + vditor.options.lang + \".js\\\"></script>\\n<script src=\\\"\" + vditor.options.cdn + \"/dist/method.min.js\\\"></script></head>\\n<body><div class=\\\"vditor-reset\\\" id=\\\"preview\\\">\" + content + \"</div>\\n<script>\\n    const previewElement = document.getElementById('preview')\\n    Vditor.setContentTheme('\" + vditor.options.preview.theme.current + \"', '\" + vditor.options.preview.theme.path + \"');\\n    Vditor.codeRender(previewElement);\\n    Vditor.highlightRender(\" + JSON.stringify(vditor.options.preview.hljs) + \", previewElement, '\" + vditor.options.cdn + \"');\\n    Vditor.mathRender(previewElement, {\\n        cdn: '\" + vditor.options.cdn + \"',\\n        math: \" + JSON.stringify(vditor.options.preview.math) + \",\\n    });\\n    Vditor.mermaidRender(previewElement, '\" + vditor.options.cdn + \"', '\" + vditor.options.theme + \"');\\n    Vditor.flowchartRender(previewElement, '\" + vditor.options.cdn + \"');\\n    Vditor.graphvizRender(previewElement, '\" + vditor.options.cdn + \"');\\n    Vditor.chartRender(previewElement, '\" + vditor.options.cdn + \"', '\" + vditor.options.theme + \"');\\n    Vditor.mindmapRender(previewElement, '\" + vditor.options.cdn + \"', '\" + vditor.options.theme + \"');\\n    Vditor.abcRender(previewElement, '\" + vditor.options.cdn + \"');\\n    Vditor.mediaRender(previewElement);\\n    Vditor.speechRender(previewElement);\\n</script>\\n<script src=\\\"\" + vditor.options.cdn + \"/dist/js/icons/\" + vditor.options.icon + \".js\\\"></script></body></html>\";\n    download(vditor, html, content.substr(0, 10) + \".html\");\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Export.ts\nvar Export_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Export = /** @class */ (function (_super) {\n    Export_extends(Export, _super);\n    function Export(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\" + (menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        panelElement.innerHTML = \"<button data-type=\\\"markdown\\\">Markdown</button>\\n<button data-type=\\\"pdf\\\">PDF</button>\\n<button data-type=\\\"html\\\">HTML</button>\";\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = event.target;\n            if (btnElement.tagName === \"BUTTON\") {\n                switch (btnElement.getAttribute(\"data-type\")) {\n                    case \"markdown\":\n                        exportMarkdown(vditor);\n                        break;\n                    case \"pdf\":\n                        exportPDF(vditor);\n                        break;\n                    case \"html\":\n                        exportHTML(vditor);\n                        break;\n                    default:\n                        break;\n                }\n                hidePanel(vditor, [\"subToolbar\"]);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return Export;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Fullscreen.ts\nvar Fullscreen_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Fullscreen = /** @class */ (function (_super) {\n    Fullscreen_extends(Fullscreen, _super);\n    function Fullscreen(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor, menuItem);\n        return _this;\n    }\n    Fullscreen.prototype._bindEvent = function (vditor, menuItem) {\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (vditor.element.className.includes(\"vditor--fullscreen\")) {\n                if (!menuItem.level) {\n                    this.innerHTML = menuItem.icon;\n                }\n                vditor.element.style.zIndex = \"\";\n                document.body.style.overflow = \"\";\n                vditor.element.classList.remove(\"vditor--fullscreen\");\n                Object.keys(vditor.toolbar.elements).forEach(function (key) {\n                    var svgElement = vditor.toolbar.elements[key].firstChild;\n                    if (svgElement) {\n                        svgElement.className = svgElement.className.replace(\"__s\", \"__n\");\n                    }\n                });\n                if (vditor.counter) {\n                    vditor.counter.element.className = vditor.counter.element.className.replace(\"__s\", \"__n\");\n                }\n            }\n            else {\n                if (!menuItem.level) {\n                    this.innerHTML = '<svg><use xlink:href=\"#vditor-icon-contract\"></use></svg>';\n                }\n                vditor.element.style.zIndex = vditor.options.fullscreen.index.toString();\n                document.body.style.overflow = \"hidden\";\n                vditor.element.classList.add(\"vditor--fullscreen\");\n                Object.keys(vditor.toolbar.elements).forEach(function (key) {\n                    var svgElement = vditor.toolbar.elements[key].firstChild;\n                    if (svgElement) {\n                        svgElement.className = svgElement.className.replace(\"__n\", \"__s\");\n                    }\n                });\n                if (vditor.counter) {\n                    vditor.counter.element.className = vditor.counter.element.className.replace(\"__n\", \"__s\");\n                }\n            }\n            if (vditor.devtools) {\n                vditor.devtools.renderEchart(vditor);\n            }\n            if (menuItem.click) {\n                menuItem.click(event, vditor);\n            }\n            setPadding(vditor);\n            setTypewriterPosition(vditor);\n        });\n    };\n    return Fullscreen;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Headings.ts\nvar Headings_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\nvar Headings = /** @class */ (function (_super) {\n    Headings_extends(Headings, _super);\n    function Headings(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint vditor-panel--arrow\";\n        panelElement.innerHTML = \"<button data-tag=\\\"h1\\\" data-value=\\\"# \\\">\" + window.VditorI18n.heading1 + \" \" + (0,compatibility/* updateHotkeyTip */.ns)(\"&lt;⌥⌘1>\") + \"</button>\\n<button data-tag=\\\"h2\\\" data-value=\\\"## \\\">\" + window.VditorI18n.heading2 + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘2\") + \"></button>\\n<button data-tag=\\\"h3\\\" data-value=\\\"### \\\">\" + window.VditorI18n.heading3 + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘3\") + \"></button>\\n<button data-tag=\\\"h4\\\" data-value=\\\"#### \\\">\" + window.VditorI18n.heading4 + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘4\") + \"></button>\\n<button data-tag=\\\"h5\\\" data-value=\\\"##### \\\">\" + window.VditorI18n.heading5 + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘5\") + \"></button>\\n<button data-tag=\\\"h6\\\" data-value=\\\"###### \\\">\" + window.VditorI18n.heading6 + \" &lt;\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘6\") + \"></button>\";\n        _this.element.appendChild(panelElement);\n        _this._bindEvent(vditor, panelElement);\n        return _this;\n    }\n    Headings.prototype._bindEvent = function (vditor, panelElement) {\n        var actionBtn = this.element.children[0];\n        actionBtn.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (actionBtn.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            actionBtn.blur();\n            if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n                if (vditor.currentMode === \"wysiwyg\") {\n                    removeHeading(vditor);\n                    afterRenderEvent(vditor);\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    process_processHeading(vditor, \"\");\n                }\n                actionBtn.classList.remove(\"vditor-menu--current\");\n            }\n            else {\n                hidePanel(vditor, [\"subToolbar\"]);\n                panelElement.style.display = \"block\";\n            }\n        });\n        for (var i = 0; i < 6; i++) {\n            panelElement.children.item(i).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n                event.preventDefault();\n                if (vditor.currentMode === \"wysiwyg\") {\n                    setHeading(vditor, event.target.getAttribute(\"data-tag\"));\n                    afterRenderEvent(vditor);\n                    actionBtn.classList.add(\"vditor-menu--current\");\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    process_processHeading(vditor, event.target.getAttribute(\"data-value\"));\n                    actionBtn.classList.add(\"vditor-menu--current\");\n                }\n                else {\n                    processHeading(vditor, event.target.getAttribute(\"data-value\"));\n                }\n                panelElement.style.display = \"none\";\n            });\n        }\n    };\n    return Headings;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Help.ts\nvar Help_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar Help = /** @class */ (function (_super) {\n    Help_extends(Help, _super);\n    function Help(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            vditor.tip.show(\"<div style=\\\"margin-bottom:14px;font-size: 14px;line-height: 22px;min-width:300px;max-width: 360px;display: flex;\\\">\\n<div style=\\\"margin-top: 14px;flex: 1\\\">\\n    <div>Markdown \\u4F7F\\u7528\\u6307\\u5357</div>\\n    <ul style=\\\"list-style: none\\\">\\n        <li><a href=\\\"https://ld246.com/article/1583308420519\\\" target=\\\"_blank\\\">\\u8BED\\u6CD5\\u901F\\u67E5\\u624B\\u518C</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1583129520165\\\" target=\\\"_blank\\\">\\u57FA\\u7840\\u8BED\\u6CD5</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1583305480675\\\" target=\\\"_blank\\\">\\u6269\\u5C55\\u8BED\\u6CD5</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1582778815353\\\" target=\\\"_blank\\\">\\u952E\\u76D8\\u5FEB\\u6377\\u952E</a></li>\\n    </ul>\\n</div>\\n<div style=\\\"margin-top: 14px;flex: 1\\\">\\n    <div>Vditor \\u652F\\u6301</div>\\n    <ul style=\\\"list-style: none\\\">\\n        <li><a href=\\\"https://github.com/Vanessa219/vditor/issues\\\" target=\\\"_blank\\\">Issues</a></li>\\n        <li><a href=\\\"https://ld246.com/tag/vditor\\\" target=\\\"_blank\\\">\\u5B98\\u65B9\\u8BA8\\u8BBA\\u533A</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1549638745630\\\" target=\\\"_blank\\\">\\u5F00\\u53D1\\u624B\\u518C</a></li>\\n        <li><a href=\\\"https://ld246.com/guide/markdown\\\" target=\\\"_blank\\\">\\u6F14\\u793A\\u5730\\u5740</a></li>\\n    </ul>\\n</div></div>\", 0);\n        });\n        return _this;\n    }\n    return Help;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Indent.ts\nvar Indent_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar Indent = /** @class */ (function (_super) {\n    Indent_extends(Indent, _super);\n    function Indent(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n            if (liElement) {\n                listIndent(vditor, liElement, range);\n            }\n        });\n        return _this;\n    }\n    return Indent;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Info.ts\nvar Info_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Info = /** @class */ (function (_super) {\n    Info_extends(Info, _super);\n    function Info(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            vditor.tip.show(\"<div style=\\\"max-width: 520px; font-size: 14px;line-height: 22px;margin-bottom: 14px;\\\">\\n<p style=\\\"text-align: center;margin: 14px 0\\\">\\n    <em>\\u4E0B\\u4E00\\u4EE3\\u7684 Markdown \\u7F16\\u8F91\\u5668\\uFF0C\\u4E3A\\u672A\\u6765\\u800C\\u6784\\u5EFA</em>\\n</p>\\n<div style=\\\"display: flex;margin-bottom: 14px;flex-wrap: wrap;align-items: center\\\">\\n    <img src=\\\"https://cdn.jsdelivr.net/npm/vditor/src/assets/images/logo.png\\\" style=\\\"margin: 0 auto;height: 68px\\\"/>\\n    <div>&nbsp;&nbsp;</div>\\n    <div style=\\\"flex: 1;min-width: 250px\\\">\\n        Vditor \\u662F\\u4E00\\u6B3E\\u6D4F\\u89C8\\u5668\\u7AEF\\u7684 Markdown \\u7F16\\u8F91\\u5668\\uFF0C\\u652F\\u6301\\u6240\\u89C1\\u5373\\u6240\\u5F97\\u3001\\u5373\\u65F6\\u6E32\\u67D3\\uFF08\\u7C7B\\u4F3C Typora\\uFF09\\u548C\\u5206\\u5C4F\\u9884\\u89C8\\u6A21\\u5F0F\\u3002\\n        \\u5B83\\u4F7F\\u7528 TypeScript \\u5B9E\\u73B0\\uFF0C\\u652F\\u6301\\u539F\\u751F JavaScript\\u3001Vue\\u3001React\\u3001Angular\\uFF0C\\u63D0\\u4F9B<a target=\\\"_blank\\\" href=\\\"https://b3log.org/siyuan\\\">\\u684C\\u9762\\u7248</a>\\u3002\\n    </div>\\n</div>\\n<div style=\\\"display: flex;flex-wrap: wrap;\\\">\\n    <ul style=\\\"list-style: none;flex: 1;min-width:148px\\\">\\n        <li>\\n        \\u9879\\u76EE\\u5730\\u5740\\uFF1A<a href=\\\"https://b3log.org/vditor\\\" target=\\\"_blank\\\">b3log.org/vditor</a>\\n        </li>\\n        <li>\\n        \\u5F00\\u6E90\\u534F\\u8BAE\\uFF1AMIT\\n        </li>\\n    </ul>\\n    <ul style=\\\"list-style: none;margin-right: 18px\\\">\\n        <li>\\n        \\u7EC4\\u4EF6\\u7248\\u672C\\uFF1AVditor v\" + constants/* VDITOR_VERSION */.H + \" / Lute v\" + Lute.Version + \"\\n        </li>\\n        <li>\\n        \\u8D5E\\u52A9\\u6350\\u8D60\\uFF1A<a href=\\\"https://ld246.com/sponsor\\\" target=\\\"_blank\\\">https://ld246.com/sponsor</a>\\n        </li>\\n    </ul>\\n</div>\\n</div>\", 0);\n        });\n        return _this;\n    }\n    return Info;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/InsertAfter.ts\nvar InsertAfter_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar InsertAfter = /** @class */ (function (_super) {\n    InsertAfter_extends(InsertAfter, _super);\n    function InsertAfter(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            insertEmptyBlock(vditor, \"afterend\");\n        });\n        return _this;\n    }\n    return InsertAfter;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/InsertBefore.ts\nvar InsertBefore_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar InsertBefore = /** @class */ (function (_super) {\n    InsertBefore_extends(InsertBefore, _super);\n    function InsertBefore(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            insertEmptyBlock(vditor, \"beforebegin\");\n        });\n        return _this;\n    }\n    return InsertBefore;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Outdent.ts\nvar Outdent_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar Outdent = /** @class */ (function (_super) {\n    Outdent_extends(Outdent, _super);\n    function Outdent(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n            if (liElement) {\n                listOutdent(vditor, liElement, range, liElement.parentElement);\n            }\n        });\n        return _this;\n    }\n    return Outdent;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Outline.ts\nvar Outline_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Outline_Outline = /** @class */ (function (_super) {\n    Outline_extends(Outline, _super);\n    function Outline(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        if (vditor.options.outline) {\n            _this.element.firstElementChild.classList.add(\"vditor-menu--current\");\n        }\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            var btnElement = vditor.toolbar.elements.outline.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.options.outline.enable = !_this.element.firstElementChild.classList.contains(\"vditor-menu--current\");\n            vditor.outline.toggle(vditor, vditor.options.outline.enable);\n        });\n        return _this;\n    }\n    return Outline;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Preview.ts\nvar Preview_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar Preview_Preview = /** @class */ (function (_super) {\n    Preview_extends(Preview, _super);\n    function Preview(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Preview.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            var toolbars = constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"both\", \"edit-mode\", \"devtools\"]);\n            if (btnElement.classList.contains(\"vditor-menu--current\")) {\n                btnElement.classList.remove(\"vditor-menu--current\");\n                if (vditor.currentMode === \"sv\") {\n                    vditor.sv.element.style.display = \"block\";\n                    if (vditor.options.preview.mode === \"both\") {\n                        vditor.preview.element.style.display = \"block\";\n                    }\n                    else {\n                        vditor.preview.element.style.display = \"none\";\n                    }\n                }\n                else {\n                    vditor[vditor.currentMode].element.parentElement.style.display = \"block\";\n                    vditor.preview.element.style.display = \"none\";\n                }\n                enableToolbar(vditor.toolbar.elements, toolbars);\n                vditor.outline.render(vditor);\n            }\n            else {\n                disableToolbar(vditor.toolbar.elements, toolbars);\n                vditor.preview.element.style.display = \"block\";\n                if (vditor.currentMode === \"sv\") {\n                    vditor.sv.element.style.display = \"none\";\n                }\n                else {\n                    vditor[vditor.currentMode].element.parentElement.style.display = \"none\";\n                }\n                vditor.preview.render(vditor);\n                btnElement.classList.add(\"vditor-menu--current\");\n                hidePanel(vditor, [\"subToolbar\", \"hint\", \"popover\"]);\n                setTimeout(function () {\n                    vditor.outline.render(vditor);\n                }, vditor.options.preview.delay + 10);\n            }\n            setPadding(vditor);\n        });\n    };\n    return Preview;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/util/RecordMedia.ts\nvar RecordMedia = /** @class */ (function () {\n    function RecordMedia(e) {\n        this.SAMPLE_RATE = 5000; // 44100 suggested by demos;\n        this.isRecording = false;\n        this.readyFlag = false;\n        this.leftChannel = [];\n        this.rightChannel = [];\n        this.recordingLength = 0;\n        var context;\n        // creates the audio context\n        if (typeof AudioContext !== \"undefined\") {\n            context = new AudioContext();\n        }\n        else if (webkitAudioContext) {\n            context = new webkitAudioContext();\n        }\n        else {\n            return;\n        }\n        this.DEFAULT_SAMPLE_RATE = context.sampleRate;\n        // creates a gain node\n        var volume = context.createGain();\n        // creates an audio node from the microphone incoming stream\n        var audioInput = context.createMediaStreamSource(e);\n        // connect the stream to the gain node\n        audioInput.connect(volume);\n        /* From the spec: The size of the buffer controls how frequently the audioprocess event is\n         dispatched and how many sample-frames need to be processed each call.\n         Lower values for buffer size will result in a lower (better) latency.\n         Higher values will be necessary to avoid audio breakup and glitches */\n        this.recorder = context.createScriptProcessor(2048, 2, 1);\n        // The onaudioprocess event needs to be defined externally, so make sure it is not set:\n        this.recorder.onaudioprocess = null;\n        // we connect the recorder\n        volume.connect(this.recorder);\n        this.recorder.connect(context.destination);\n        this.readyFlag = true;\n    }\n    // Publicly accessible methods:\n    RecordMedia.prototype.cloneChannelData = function (leftChannelData, rightChannelData) {\n        this.leftChannel.push(new Float32Array(leftChannelData));\n        this.rightChannel.push(new Float32Array(rightChannelData));\n        this.recordingLength += 2048;\n    };\n    RecordMedia.prototype.startRecordingNewWavFile = function () {\n        if (this.readyFlag) {\n            this.isRecording = true;\n            this.leftChannel.length = this.rightChannel.length = 0;\n            this.recordingLength = 0;\n        }\n    };\n    RecordMedia.prototype.stopRecording = function () {\n        this.isRecording = false;\n    };\n    RecordMedia.prototype.buildWavFileBlob = function () {\n        // we flat the left and right channels down\n        var leftBuffer = this.mergeBuffers(this.leftChannel);\n        var rightBuffer = this.mergeBuffers(this.rightChannel);\n        // Interleave the left and right channels together:\n        var interleaved = new Float32Array(leftBuffer.length);\n        for (var i = 0; i < leftBuffer.length; ++i) {\n            interleaved[i] = 0.5 * (leftBuffer[i] + rightBuffer[i]);\n        }\n        // Downsample the audio data if necessary:\n        if (this.DEFAULT_SAMPLE_RATE > this.SAMPLE_RATE) {\n            interleaved = this.downSampleBuffer(interleaved, this.SAMPLE_RATE);\n        }\n        var totalByteCount = (44 + interleaved.length * 2);\n        var buffer = new ArrayBuffer(totalByteCount);\n        var view = new DataView(buffer);\n        // Build the RIFF chunk descriptor:\n        this.writeUTFBytes(view, 0, \"RIFF\");\n        view.setUint32(4, totalByteCount, true);\n        this.writeUTFBytes(view, 8, \"WAVE\");\n        // Build the FMT sub-chunk:\n        this.writeUTFBytes(view, 12, \"fmt \"); // subchunk1 ID is format\n        view.setUint32(16, 16, true); // The sub-chunk size is 16.\n        view.setUint16(20, 1, true); // The audio format is 1.\n        view.setUint16(22, 1, true); // Number of interleaved channels.\n        view.setUint32(24, this.SAMPLE_RATE, true); // Sample rate.\n        view.setUint32(28, this.SAMPLE_RATE * 2, true); // Byte rate.\n        view.setUint16(32, 2, true); // Block align\n        view.setUint16(34, 16, true); // Bits per sample.\n        // Build the data sub-chunk:\n        var subChunk2ByteCount = interleaved.length * 2;\n        this.writeUTFBytes(view, 36, \"data\");\n        view.setUint32(40, subChunk2ByteCount, true);\n        // Write the PCM samples to the view:\n        var lng = interleaved.length;\n        var index = 44;\n        var volume = 1;\n        for (var j = 0; j < lng; j++) {\n            view.setInt16(index, interleaved[j] * (0x7FFF * volume), true);\n            index += 2;\n        }\n        return new Blob([view], { type: \"audio/wav\" });\n    };\n    RecordMedia.prototype.downSampleBuffer = function (buffer, rate) {\n        if (rate === this.DEFAULT_SAMPLE_RATE) {\n            return buffer;\n        }\n        if (rate > this.DEFAULT_SAMPLE_RATE) {\n            // throw \"downsampling rate show be smaller than original sample rate\";\n            return buffer;\n        }\n        var sampleRateRatio = this.DEFAULT_SAMPLE_RATE / rate;\n        var newLength = Math.round(buffer.length / sampleRateRatio);\n        var result = new Float32Array(newLength);\n        var offsetResult = 0;\n        var offsetBuffer = 0;\n        while (offsetResult < result.length) {\n            var nextOffsetBuffer = Math.round((offsetResult + 1) * sampleRateRatio);\n            var accum = 0;\n            var count = 0;\n            for (var i = offsetBuffer; i < nextOffsetBuffer && i < buffer.length; i++) {\n                accum += buffer[i];\n                count++;\n            }\n            result[offsetResult] = accum / count;\n            offsetResult++;\n            offsetBuffer = nextOffsetBuffer;\n        }\n        return result;\n    };\n    RecordMedia.prototype.mergeBuffers = function (desiredChannelBuffer) {\n        var result = new Float32Array(this.recordingLength);\n        var offset = 0;\n        var lng = desiredChannelBuffer.length;\n        for (var i = 0; i < lng; ++i) {\n            var buffer = desiredChannelBuffer[i];\n            result.set(buffer, offset);\n            offset += buffer.length;\n        }\n        return result;\n    };\n    RecordMedia.prototype.writeUTFBytes = function (view, offset, value) {\n        var lng = value.length;\n        for (var i = 0; i < lng; i++) {\n            view.setUint8(offset + i, value.charCodeAt(i));\n        }\n    };\n    return RecordMedia;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Record.ts\nvar Record_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar Record = /** @class */ (function (_super) {\n    Record_extends(Record, _super);\n    function Record(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Record.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        var mediaRecorder;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            var editorElement = vditor[vditor.currentMode].element;\n            if (!mediaRecorder) {\n                navigator.mediaDevices.getUserMedia({ audio: true }).then(function (mediaStream) {\n                    mediaRecorder = new RecordMedia(mediaStream);\n                    mediaRecorder.recorder.onaudioprocess = function (e) {\n                        // Do nothing if not recording:\n                        if (!mediaRecorder.isRecording) {\n                            return;\n                        }\n                        // Copy the data from the input buffers;\n                        var left = e.inputBuffer.getChannelData(0);\n                        var right = e.inputBuffer.getChannelData(1);\n                        mediaRecorder.cloneChannelData(left, right);\n                    };\n                    mediaRecorder.startRecordingNewWavFile();\n                    vditor.tip.show(window.VditorI18n.recording);\n                    editorElement.setAttribute(\"contenteditable\", \"false\");\n                    _this.element.children[0].classList.add(\"vditor-menu--current\");\n                }).catch(function () {\n                    vditor.tip.show(window.VditorI18n[\"record-tip\"]);\n                });\n                return;\n            }\n            if (mediaRecorder.isRecording) {\n                mediaRecorder.stopRecording();\n                vditor.tip.hide();\n                var file = new File([mediaRecorder.buildWavFileBlob()], \"record\" + (new Date()).getTime() + \".wav\", { type: \"video/webm\" });\n                uploadFiles(vditor, [file]);\n                _this.element.children[0].classList.remove(\"vditor-menu--current\");\n            }\n            else {\n                vditor.tip.show(window.VditorI18n.recording);\n                editorElement.setAttribute(\"contenteditable\", \"false\");\n                mediaRecorder.startRecordingNewWavFile();\n                _this.element.children[0].classList.add(\"vditor-menu--current\");\n            }\n        });\n    };\n    return Record;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Redo.ts\nvar Redo_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Redo = /** @class */ (function (_super) {\n    Redo_extends(Redo, _super);\n    function Redo(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        disableToolbar({ redo: _this.element }, [\"redo\"]);\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.undo.redo(vditor);\n        });\n        return _this;\n    }\n    return Redo;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Undo.ts\nvar Undo_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Undo = /** @class */ (function (_super) {\n    Undo_extends(Undo, _super);\n    function Undo(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        disableToolbar({ undo: _this.element }, [\"undo\"]);\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.undo.undo(vditor);\n        });\n        return _this;\n    }\n    return Undo;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Upload.ts\nvar Upload_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Upload_Upload = /** @class */ (function (_super) {\n    Upload_extends(Upload, _super);\n    function Upload(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var inputHTML = '<input type=\"file\"';\n        if (vditor.options.upload.multiple) {\n            inputHTML += ' multiple=\"multiple\"';\n        }\n        if (vditor.options.upload.accept) {\n            inputHTML += \" accept=\\\"\" + vditor.options.upload.accept + \"\\\"\";\n        }\n        _this.element.children[0].innerHTML = \"\" + (menuItem.icon || '<svg><use xlink:href=\"#vditor-icon-upload\"></use></svg>') + inputHTML + \">\";\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Upload.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                event.stopPropagation();\n                event.preventDefault();\n                return;\n            }\n        });\n        this.element.querySelector(\"input\").addEventListener(\"change\", function (event) {\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                event.stopPropagation();\n                event.preventDefault();\n                return;\n            }\n            if (event.target.files.length === 0) {\n                return;\n            }\n            uploadFiles(vditor, event.target.files, event.target);\n        });\n    };\n    return Upload;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(vditor) {\n        var _this = this;\n        var options = vditor.options;\n        this.elements = {};\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar\";\n        options.toolbar.forEach(function (menuItem, i) {\n            var itemElement = _this.genItem(vditor, menuItem, i);\n            _this.element.appendChild(itemElement);\n            if (menuItem.toolbar) {\n                var panelElement_1 = document.createElement(\"div\");\n                panelElement_1.className = \"vditor-hint vditor-panel--arrow\";\n                panelElement_1.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n                    panelElement_1.style.display = \"none\";\n                });\n                menuItem.toolbar.forEach(function (subMenuItem, subI) {\n                    subMenuItem.level = 2;\n                    panelElement_1.appendChild(_this.genItem(vditor, subMenuItem, i + subI));\n                });\n                itemElement.appendChild(panelElement_1);\n                toggleSubMenu(vditor, panelElement_1, itemElement.children[0], 2);\n            }\n        });\n        if (vditor.options.toolbarConfig.hide) {\n            this.element.classList.add(\"vditor-toolbar--hide\");\n        }\n        if (vditor.options.toolbarConfig.pin) {\n            this.element.classList.add(\"vditor-toolbar--pin\");\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter = new Counter(vditor);\n            this.element.appendChild(vditor.counter.element);\n        }\n    }\n    Toolbar.prototype.genItem = function (vditor, menuItem, index) {\n        var menuItemObj;\n        switch (menuItem.name) {\n            case \"bold\":\n            case \"italic\":\n            case \"more\":\n            case \"strike\":\n            case \"line\":\n            case \"quote\":\n            case \"list\":\n            case \"ordered-list\":\n            case \"check\":\n            case \"code\":\n            case \"inline-code\":\n            case \"link\":\n            case \"table\":\n                menuItemObj = new MenuItem(vditor, menuItem);\n                break;\n            case \"emoji\":\n                menuItemObj = new Emoji(vditor, menuItem);\n                break;\n            case \"headings\":\n                menuItemObj = new Headings(vditor, menuItem);\n                break;\n            case \"|\":\n                menuItemObj = new Divider();\n                break;\n            case \"br\":\n                menuItemObj = new Br();\n                break;\n            case \"undo\":\n                menuItemObj = new Undo(vditor, menuItem);\n                break;\n            case \"redo\":\n                menuItemObj = new Redo(vditor, menuItem);\n                break;\n            case \"help\":\n                menuItemObj = new Help(vditor, menuItem);\n                break;\n            case \"both\":\n                menuItemObj = new Both(vditor, menuItem);\n                break;\n            case \"preview\":\n                menuItemObj = new Preview_Preview(vditor, menuItem);\n                break;\n            case \"fullscreen\":\n                menuItemObj = new Fullscreen(vditor, menuItem);\n                break;\n            case \"upload\":\n                menuItemObj = new Upload_Upload(vditor, menuItem);\n                break;\n            case \"record\":\n                menuItemObj = new Record(vditor, menuItem);\n                break;\n            case \"info\":\n                menuItemObj = new Info(vditor, menuItem);\n                break;\n            case \"edit-mode\":\n                menuItemObj = new EditMode(vditor, menuItem);\n                break;\n            case \"devtools\":\n                menuItemObj = new Devtools(vditor, menuItem);\n                break;\n            case \"outdent\":\n                menuItemObj = new Outdent(vditor, menuItem);\n                break;\n            case \"indent\":\n                menuItemObj = new Indent(vditor, menuItem);\n                break;\n            case \"outline\":\n                menuItemObj = new Outline_Outline(vditor, menuItem);\n                break;\n            case \"insert-after\":\n                menuItemObj = new InsertAfter(vditor, menuItem);\n                break;\n            case \"insert-before\":\n                menuItemObj = new InsertBefore(vditor, menuItem);\n                break;\n            case \"code-theme\":\n                menuItemObj = new CodeTheme(vditor, menuItem);\n                break;\n            case \"content-theme\":\n                menuItemObj = new ContentTheme(vditor, menuItem);\n                break;\n            case \"export\":\n                menuItemObj = new Export(vditor, menuItem);\n                break;\n            default:\n                menuItemObj = new Custom(vditor, menuItem);\n                break;\n        }\n        if (!menuItemObj) {\n            return;\n        }\n        var key = menuItem.name;\n        if (key === \"br\" || key === \"|\") {\n            key = key + index;\n        }\n        this.elements[key] = menuItemObj.element;\n        return menuItemObj.element;\n    };\n    return Toolbar;\n}());\n\n\n// EXTERNAL MODULE: ./node_modules/diff-match-patch/index.js\nvar diff_match_patch = __webpack_require__(694);\n;// CONCATENATED MODULE: ./src/ts/undo/index.ts\n\n\n\n\n\n\n\n\nvar undo_Undo = /** @class */ (function () {\n    function Undo() {\n        this.stackSize = 50;\n        this.resetStack();\n        // @ts-ignore\n        this.dmp = new diff_match_patch();\n    }\n    Undo.prototype.clearStack = function (vditor) {\n        this.resetStack();\n        this.resetIcon(vditor);\n    };\n    Undo.prototype.resetIcon = function (vditor) {\n        if (!vditor.toolbar) {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        if (this[vditor.currentMode].redoStack.length !== 0) {\n            enableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n    };\n    Undo.prototype.undo = function (vditor) {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length < 2) {\n            return;\n        }\n        var state = this[vditor.currentMode].undoStack.pop();\n        if (!state) {\n            return;\n        }\n        this[vditor.currentMode].redoStack.push(state);\n        this.renderDiff(state, vditor);\n        this[vditor.currentMode].hasUndo = true;\n        // undo 操作后，需要关闭 hint\n        hidePanel(vditor, [\"hint\"]);\n    };\n    Undo.prototype.redo = function (vditor) {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        var state = this[vditor.currentMode].redoStack.pop();\n        if (!state) {\n            return;\n        }\n        this[vditor.currentMode].undoStack.push(state);\n        this.renderDiff(state, vditor, true);\n    };\n    Undo.prototype.recordFirstPosition = function (vditor, event) {\n        if (getSelection().rangeCount === 0) {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length !== 1 || this[vditor.currentMode].undoStack[0].length === 0 ||\n            this[vditor.currentMode].redoStack.length > 0) {\n            return;\n        }\n        if ((0,compatibility/* isFirefox */.vU)() && event.key === \"Backspace\") {\n            // Firefox 第一次删除无效\n            return;\n        }\n        if ((0,compatibility/* isSafari */.G6)()) {\n            // Safari keydown 在 input 之后，不需要重复记录历史\n            return;\n        }\n        var text = this.addCaret(vditor);\n        if (text.replace(\"<wbr>\", \"\").replace(\" vditor-ir__node--expand\", \"\")\n            !== this[vditor.currentMode].undoStack[0][0].diffs[0][1].replace(\"<wbr>\", \"\")) {\n            // 当还不没有存入 undo 栈时，按下 ctrl 后会覆盖 lastText\n            return;\n        }\n        this[vditor.currentMode].undoStack[0][0].diffs[0][1] = text;\n        this[vditor.currentMode].lastText = text;\n        // 不能添加 setSelectionFocus(cloneRange); 否则 windows chrome 首次输入会烂\n    };\n    Undo.prototype.addToUndoStack = function (vditor) {\n        // afterRenderEvent.ts 已经 debounce\n        var text = this.addCaret(vditor, true);\n        var diff = this.dmp.diff_main(text, this[vditor.currentMode].lastText, true);\n        var patchList = this.dmp.patch_make(text, this[vditor.currentMode].lastText, diff);\n        if (patchList.length === 0 && this[vditor.currentMode].undoStack.length > 0) {\n            return;\n        }\n        this[vditor.currentMode].lastText = text;\n        this[vditor.currentMode].undoStack.push(patchList);\n        if (this[vditor.currentMode].undoStack.length > this.stackSize) {\n            this[vditor.currentMode].undoStack.shift();\n        }\n        if (this[vditor.currentMode].hasUndo) {\n            this[vditor.currentMode].redoStack = [];\n            this[vditor.currentMode].hasUndo = false;\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n    };\n    Undo.prototype.renderDiff = function (state, vditor, isRedo) {\n        if (isRedo === void 0) { isRedo = false; }\n        var text;\n        if (isRedo) {\n            var redoPatchList = this.dmp.patch_deepCopy(state).reverse();\n            redoPatchList.forEach(function (patch) {\n                patch.diffs.forEach(function (diff) {\n                    diff[0] = -diff[0];\n                });\n            });\n            text = this.dmp.patch_apply(redoPatchList, this[vditor.currentMode].lastText)[0];\n        }\n        else {\n            text = this.dmp.patch_apply(state, this[vditor.currentMode].lastText)[0];\n        }\n        this[vditor.currentMode].lastText = text;\n        vditor[vditor.currentMode].element.innerHTML = text;\n        if (vditor.currentMode !== \"sv\") {\n            vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n                .forEach(function (blockElement) {\n                processCodeRender(blockElement, vditor);\n            });\n        }\n        if (!vditor[vditor.currentMode].element.querySelector(\"wbr\")) {\n            // Safari 第一次输入没有光标，需手动定位到结尾\n            var range = getSelection().getRangeAt(0);\n            range.setEndBefore(vditor[vditor.currentMode].element);\n            range.collapse(false);\n        }\n        else {\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, vditor[vditor.currentMode].element.ownerDocument.createRange());\n            scrollCenter(vditor);\n        }\n        execAfterRender(vditor, {\n            enableAddUndoStack: false,\n            enableHint: false,\n            enableInput: true,\n        });\n        highlightToolbar(vditor);\n        vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='2']\")\n            .forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        if (this[vditor.currentMode].redoStack.length !== 0) {\n            enableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n    };\n    Undo.prototype.resetStack = function () {\n        this.ir = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n        this.sv = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n        this.wysiwyg = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n    };\n    Undo.prototype.addCaret = function (vditor, setFocus) {\n        if (setFocus === void 0) { setFocus = false; }\n        var cloneRange;\n        if (getSelection().rangeCount !== 0 && !vditor[vditor.currentMode].element.querySelector(\"wbr\")) {\n            var range = getSelection().getRangeAt(0);\n            if (vditor[vditor.currentMode].element.contains(range.startContainer)) {\n                cloneRange = range.cloneRange();\n                var wbrElement = document.createElement(\"span\");\n                wbrElement.className = \"vditor-wbr\";\n                range.insertNode(wbrElement);\n            }\n        }\n        // 移除数学公式、echart 渲染 https://github.com/siyuan-note/siyuan/issues/537\n        var cloneElement = vditor.ir.element.cloneNode(true);\n        cloneElement.querySelectorAll(\".vditor-\" + vditor.currentMode + \"__preview[data-render='1']\")\n            .forEach(function (item) {\n            if (item.firstElementChild.classList.contains(\"language-echarts\") ||\n                item.firstElementChild.classList.contains(\"language-plantuml\") ||\n                item.firstElementChild.classList.contains(\"language-mindmap\")) {\n                item.firstElementChild.removeAttribute(\"_echarts_instance_\");\n                item.firstElementChild.removeAttribute(\"data-processed\");\n                item.firstElementChild.innerHTML = item.previousElementSibling.firstElementChild.innerHTML;\n                item.setAttribute(\"data-render\", \"2\");\n            }\n            if (item.firstElementChild.classList.contains(\"language-math\")) {\n                item.setAttribute(\"data-render\", \"2\");\n                item.firstElementChild.textContent = item.firstElementChild.getAttribute(\"data-math\");\n                item.firstElementChild.removeAttribute(\"data-math\");\n            }\n        });\n        var text = vditor[vditor.currentMode].element.innerHTML;\n        vditor[vditor.currentMode].element.querySelectorAll(\".vditor-wbr\").forEach(function (item) {\n            item.remove();\n            // 使用 item.outerHTML = \"\" 会产生 https://github.com/Vanessa219/vditor/pull/686;\n        });\n        if (setFocus && cloneRange) {\n            (0,selection/* setSelectionFocus */.Hc)(cloneRange);\n        }\n        return text.replace('<span class=\"vditor-wbr\"></span>', \"<wbr>\");\n    };\n    return Undo;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/util/merge.ts\nvar merge = __webpack_require__(224);\n;// CONCATENATED MODULE: ./src/ts/util/Options.ts\n\n\nvar Options = /** @class */ (function () {\n    function Options(options) {\n        this.defaultOptions = {\n            after: undefined,\n            cache: {\n                enable: true,\n            },\n            cdn: constants/* Constants.CDN */.g.CDN,\n            classes: {\n                preview: \"\",\n            },\n            comment: {\n                enable: false,\n            },\n            counter: {\n                enable: false,\n                type: \"markdown\",\n            },\n            debugger: false,\n            fullscreen: {\n                index: 90,\n            },\n            height: \"auto\",\n            hint: {\n                delay: 200,\n                emoji: {\n                    \"+1\": \"👍\",\n                    \"-1\": \"👎\",\n                    \"confused\": \"😕\",\n                    \"eyes\": \"👀️\",\n                    \"heart\": \"❤️\",\n                    \"rocket\": \"🚀️\",\n                    \"smile\": \"😄\",\n                    \"tada\": \"🎉️\",\n                },\n                emojiPath: constants/* Constants.CDN */.g.CDN + \"/dist/images/emoji\",\n                extend: [],\n                parse: true,\n            },\n            icon: \"ant\",\n            lang: \"zh_CN\",\n            mode: \"ir\",\n            outline: {\n                enable: false,\n                position: \"left\",\n            },\n            placeholder: \"\",\n            preview: {\n                actions: [\"desktop\", \"tablet\", \"mobile\", \"mp-wechat\", \"zhihu\"],\n                delay: 1000,\n                hljs: constants/* Constants.HLJS_OPTIONS */.g.HLJS_OPTIONS,\n                markdown: constants/* Constants.MARKDOWN_OPTIONS */.g.MARKDOWN_OPTIONS,\n                math: constants/* Constants.MATH_OPTIONS */.g.MATH_OPTIONS,\n                maxWidth: 800,\n                mode: \"both\",\n                theme: constants/* Constants.THEME_OPTIONS */.g.THEME_OPTIONS,\n            },\n            resize: {\n                enable: false,\n                position: \"bottom\",\n            },\n            theme: \"classic\",\n            toolbar: [\n                \"emoji\",\n                \"headings\",\n                \"bold\",\n                \"italic\",\n                \"strike\",\n                \"link\",\n                \"|\",\n                \"list\",\n                \"ordered-list\",\n                \"check\",\n                \"outdent\",\n                \"indent\",\n                \"|\",\n                \"quote\",\n                \"line\",\n                \"code\",\n                \"inline-code\",\n                \"insert-before\",\n                \"insert-after\",\n                \"|\",\n                \"upload\",\n                \"record\",\n                \"table\",\n                \"|\",\n                \"undo\",\n                \"redo\",\n                \"|\",\n                \"fullscreen\",\n                \"edit-mode\",\n                {\n                    name: \"more\",\n                    toolbar: [\n                        \"both\",\n                        \"code-theme\",\n                        \"content-theme\",\n                        \"export\",\n                        \"outline\",\n                        \"preview\",\n                        \"devtools\",\n                        \"info\",\n                        \"help\",\n                    ],\n                },\n            ],\n            toolbarConfig: {\n                hide: false,\n                pin: false,\n            },\n            typewriterMode: false,\n            undoDelay: 800,\n            upload: {\n                extraData: {},\n                fieldName: \"file[]\",\n                filename: function (name) { return name.replace(/\\W/g, \"\"); },\n                linkToImgUrl: \"\",\n                max: 10 * 1024 * 1024,\n                multiple: true,\n                url: \"\",\n                withCredentials: false,\n            },\n            value: \"\",\n            width: \"auto\",\n        };\n        this.options = options;\n    }\n    Options.prototype.merge = function () {\n        var _a, _b, _c;\n        if (this.options) {\n            if (this.options.toolbar) {\n                this.options.toolbar = this.mergeToolbar(this.options.toolbar);\n            }\n            else {\n                this.options.toolbar = this.mergeToolbar(this.defaultOptions.toolbar);\n            }\n            if ((_b = (_a = this.options.preview) === null || _a === void 0 ? void 0 : _a.theme) === null || _b === void 0 ? void 0 : _b.list) {\n                this.defaultOptions.preview.theme.list = this.options.preview.theme.list;\n            }\n            if ((_c = this.options.hint) === null || _c === void 0 ? void 0 : _c.emoji) {\n                this.defaultOptions.hint.emoji = this.options.hint.emoji;\n            }\n            if (this.options.comment) {\n                this.defaultOptions.comment = this.options.comment;\n            }\n        }\n        var mergedOptions = (0,merge/* merge */.T)(this.defaultOptions, this.options);\n        if (mergedOptions.cache.enable && !mergedOptions.cache.id) {\n            throw new Error(\"need options.cache.id, see https://ld246.com/article/1549638745630#options\");\n        }\n        return mergedOptions;\n    };\n    Options.prototype.mergeToolbar = function (toolbar) {\n        var _this = this;\n        var toolbarItem = [\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-export\"></use></svg>',\n                name: \"export\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘E\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-emoji\"></use></svg>',\n                name: \"emoji\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘H\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-headings\"></use></svg>',\n                name: \"headings\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘B\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-bold\"></use></svg>',\n                name: \"bold\",\n                prefix: \"**\",\n                suffix: \"**\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘I\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-italic\"></use></svg>',\n                name: \"italic\",\n                prefix: \"*\",\n                suffix: \"*\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘D\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-strike\"></use></svg>',\n                name: \"strike\",\n                prefix: \"~~\",\n                suffix: \"~~\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘K\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-link\"></use></svg>',\n                name: \"link\",\n                prefix: \"[\",\n                suffix: \"](https://)\",\n                tipPosition: \"n\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                hotkey: \"⌘L\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-list\"></use></svg>',\n                name: \"list\",\n                prefix: \"* \",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘O\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-ordered-list\"></use></svg>',\n                name: \"ordered-list\",\n                prefix: \"1. \",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘J\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-check\"></use></svg>',\n                name: \"check\",\n                prefix: \"* [ ] \",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘I\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-outdent\"></use></svg>',\n                name: \"outdent\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘O\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-indent\"></use></svg>',\n                name: \"indent\",\n                tipPosition: \"n\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                hotkey: \"⌘;\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-quote\"></use></svg>',\n                name: \"quote\",\n                prefix: \"> \",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘H\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-line\"></use></svg>',\n                name: \"line\",\n                prefix: \"---\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘U\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-code\"></use></svg>',\n                name: \"code\",\n                prefix: \"```\",\n                suffix: \"\\n```\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘G\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-inline-code\"></use></svg>',\n                name: \"inline-code\",\n                prefix: \"`\",\n                suffix: \"`\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘B\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-before\"></use></svg>',\n                name: \"insert-before\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘E\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-after\"></use></svg>',\n                name: \"insert-after\",\n                tipPosition: \"n\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-upload\"></use></svg>',\n                name: \"upload\",\n                tipPosition: \"n\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-record\"></use></svg>',\n                name: \"record\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘M\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-table\"></use></svg>',\n                name: \"table\",\n                prefix: \"| col1\",\n                suffix: \" | col2 | col3 |\\n| --- | --- | --- |\\n|  |  |  |\\n|  |  |  |\",\n                tipPosition: \"n\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                hotkey: \"⌘Z\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-undo\"></use></svg>',\n                name: \"undo\",\n                tipPosition: \"nw\",\n            },\n            {\n                hotkey: \"⌘Y\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-redo\"></use></svg>',\n                name: \"redo\",\n                tipPosition: \"nw\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-more\"></use></svg>',\n                name: \"more\",\n                tipPosition: \"e\",\n            },\n            {\n                hotkey: \"⌘'\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-fullscreen\"></use></svg>',\n                name: \"fullscreen\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-edit\"></use></svg>',\n                name: \"edit-mode\",\n                tipPosition: \"nw\",\n            },\n            {\n                hotkey: \"⌘P\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-both\"></use></svg>',\n                name: \"both\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-preview\"></use></svg>',\n                name: \"preview\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-align-center\"></use></svg>',\n                name: \"outline\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-theme\"></use></svg>',\n                name: \"content-theme\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-code-theme\"></use></svg>',\n                name: \"code-theme\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-bug\"></use></svg>',\n                name: \"devtools\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-info\"></use></svg>',\n                name: \"info\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-help\"></use></svg>',\n                name: \"help\",\n                tipPosition: \"nw\",\n            },\n            {\n                name: \"br\",\n            },\n        ];\n        var toolbarResult = [];\n        toolbar.forEach(function (menuItem) {\n            var currentMenuItem = menuItem;\n            toolbarItem.forEach(function (defaultMenuItem) {\n                if (typeof menuItem === \"string\" &&\n                    defaultMenuItem.name === menuItem) {\n                    currentMenuItem = defaultMenuItem;\n                }\n                if (typeof menuItem === \"object\" &&\n                    defaultMenuItem.name === menuItem.name) {\n                    currentMenuItem = Object.assign({}, defaultMenuItem, menuItem);\n                }\n            });\n            if (menuItem.toolbar) {\n                currentMenuItem.toolbar = _this.mergeToolbar(menuItem.toolbar);\n            }\n            toolbarResult.push(currentMenuItem);\n        });\n        return toolbarResult;\n    };\n    return Options;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar WYSIWYG = /** @class */ (function () {\n    function WYSIWYG(vditor) {\n        var _this = this;\n        this.composingLock = false;\n        this.commentIds = [];\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-wysiwyg\";\n        divElement.innerHTML = \"<pre class=\\\"vditor-reset\\\" placeholder=\\\"\" + vditor.options.placeholder + \"\\\"\\n contenteditable=\\\"true\\\" spellcheck=\\\"false\\\"></pre>\\n<div class=\\\"vditor-panel vditor-panel--none\\\"></div>\\n<div class=\\\"vditor-panel vditor-panel--none\\\">\\n    <button type=\\\"button\\\" aria-label=\\\"\" + window.VditorI18n.comment + \"\\\" class=\\\"vditor-icon vditor-tooltipped vditor-tooltipped__n\\\">\\n        <svg><use xlink:href=\\\"#vditor-icon-comment\\\"></use></svg>\\n    </button>\\n</div>\";\n        this.element = divElement.firstElementChild;\n        this.popover = divElement.firstElementChild.nextElementSibling;\n        this.selectPopover = divElement.lastElementChild;\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        dblclickEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n        if (vditor.options.comment.enable) {\n            this.selectPopover.querySelector(\"button\").onclick = function () {\n                var id = Lute.NewNodeID();\n                var range = getSelection().getRangeAt(0);\n                var rangeClone = range.cloneRange();\n                var contents = range.extractContents();\n                var blockStartElement;\n                var blockEndElement;\n                var removeStart = false;\n                var removeEnd = false;\n                contents.childNodes.forEach(function (item, index) {\n                    var wrap = false;\n                    if (item.nodeType === 3) {\n                        wrap = true;\n                    }\n                    else if (!item.classList.contains(\"vditor-comment\")) {\n                        wrap = true;\n                    }\n                    else if (item.classList.contains(\"vditor-comment\")) {\n                        item.setAttribute(\"data-cmtids\", item.getAttribute(\"data-cmtids\") + \" \" + id);\n                    }\n                    if (wrap) {\n                        if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\"\n                            && index === 0 && rangeClone.startOffset > 0) {\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\" + id + \"\\\">\" + item.innerHTML + \"</span>\";\n                            blockStartElement = item;\n                        }\n                        else if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\"\n                            && index === contents.childNodes.length - 1\n                            && rangeClone.endOffset < rangeClone.endContainer.textContent.length) {\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\" + id + \"\\\">\" + item.innerHTML + \"</span>\";\n                            blockEndElement = item;\n                        }\n                        else if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\") {\n                            if (index === 0) {\n                                removeStart = true;\n                            }\n                            else if (index === contents.childNodes.length - 1) {\n                                removeEnd = true;\n                            }\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\" + id + \"\\\">\" + item.innerHTML + \"</span>\";\n                        }\n                        else {\n                            var commentElement = document.createElement(\"span\");\n                            commentElement.classList.add(\"vditor-comment\");\n                            commentElement.setAttribute(\"data-cmtids\", id);\n                            item.parentNode.insertBefore(commentElement, item);\n                            commentElement.appendChild(item);\n                        }\n                    }\n                });\n                var startElement = (0,hasClosest/* hasClosestBlock */.F9)(rangeClone.startContainer);\n                if (startElement) {\n                    if (blockStartElement) {\n                        startElement.insertAdjacentHTML(\"beforeend\", blockStartElement.innerHTML);\n                        blockStartElement.remove();\n                    }\n                    else if (startElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && removeStart) {\n                        startElement.remove();\n                    }\n                }\n                var endElement = (0,hasClosest/* hasClosestBlock */.F9)(rangeClone.endContainer);\n                if (endElement) {\n                    if (blockEndElement) {\n                        endElement.insertAdjacentHTML(\"afterbegin\", blockEndElement.innerHTML);\n                        blockEndElement.remove();\n                    }\n                    else if (endElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && removeEnd) {\n                        endElement.remove();\n                    }\n                }\n                range.insertNode(contents);\n                vditor.options.comment.add(id, range.toString(), _this.getComments(vditor, true));\n                afterRenderEvent(vditor, {\n                    enableAddUndoStack: true,\n                    enableHint: false,\n                    enableInput: false,\n                });\n                _this.hideComment();\n            };\n        }\n    }\n    WYSIWYG.prototype.getComments = function (vditor, getData) {\n        var _this = this;\n        if (getData === void 0) { getData = false; }\n        if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n            this.commentIds = [];\n            this.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n                _this.commentIds =\n                    _this.commentIds.concat(item.getAttribute(\"data-cmtids\").split(\" \"));\n            });\n            this.commentIds = Array.from(new Set(this.commentIds));\n            var comments_1 = [];\n            if (getData) {\n                this.commentIds.forEach(function (id) {\n                    comments_1.push({\n                        id: id,\n                        top: _this.element.querySelector(\".vditor-comment[data-cmtids=\\\"\" + id + \"\\\"]\").offsetTop,\n                    });\n                });\n                return comments_1;\n            }\n        }\n        else {\n            return [];\n        }\n    };\n    WYSIWYG.prototype.triggerRemoveComment = function (vditor) {\n        var difference = function (a, b) {\n            var s = new Set(b);\n            return a.filter(function (x) { return !s.has(x); });\n        };\n        if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable && vditor.wysiwyg.commentIds.length > 0) {\n            var oldIds = JSON.parse(JSON.stringify(this.commentIds));\n            this.getComments(vditor);\n            var removedIds = difference(oldIds, this.commentIds);\n            if (removedIds.length > 0) {\n                vditor.options.comment.remove(removedIds);\n            }\n        }\n    };\n    WYSIWYG.prototype.showComment = function () {\n        var position = (0,selection/* getCursorPosition */.Ny)(this.element);\n        this.selectPopover.setAttribute(\"style\", \"left:\" + position.left + \"px;display:block;top:\" + Math.max(-8, position.top - 21) + \"px\");\n    };\n    WYSIWYG.prototype.hideComment = function () {\n        this.selectPopover.setAttribute(\"style\", \"display:none\");\n    };\n    WYSIWYG.prototype.copy = function (event, vditor) {\n        var range = getSelection().getRangeAt(0);\n        if (range.toString() === \"\") {\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        var codeElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"CODE\");\n        var codeEndElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.endContainer, \"CODE\");\n        if (codeElement && codeEndElement && codeEndElement.isSameNode(codeElement)) {\n            var codeText = \"\";\n            if (codeElement.parentElement.tagName === \"PRE\") {\n                codeText = range.toString();\n            }\n            else {\n                codeText = \"`\" + range.toString() + \"`\";\n            }\n            event.clipboardData.setData(\"text/plain\", codeText);\n            event.clipboardData.setData(\"text/html\", \"\");\n            return;\n        }\n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"A\");\n        var aEndElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.endContainer, \"A\");\n        if (aElement && aEndElement && aEndElement.isSameNode(aElement)) {\n            var aTitle = aElement.getAttribute(\"title\") || \"\";\n            if (aTitle) {\n                aTitle = \" \\\"\" + aTitle + \"\\\"\";\n            }\n            event.clipboardData.setData(\"text/plain\", \"[\" + range.toString() + \"](\" + aElement.getAttribute(\"href\") + aTitle + \")\");\n            event.clipboardData.setData(\"text/html\", \"\");\n            return;\n        }\n        var tempElement = document.createElement(\"div\");\n        tempElement.appendChild(range.cloneContents());\n        event.clipboardData.setData(\"text/plain\", vditor.lute.VditorDOM2Md(tempElement.innerHTML).trim());\n        event.clipboardData.setData(\"text/html\", \"\");\n    };\n    WYSIWYG.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        window.addEventListener(\"scroll\", function () {\n            hidePanel(vditor, [\"hint\"]);\n            if (_this.popover.style.display !== \"block\" || _this.selectPopover.style.display !== \"block\") {\n                return;\n            }\n            var top = parseInt(_this.popover.getAttribute(\"data-top\"), 10);\n            if (vditor.options.height !== \"auto\") {\n                if (vditor.options.toolbarConfig.pin && vditor.toolbar.element.getBoundingClientRect().top === 0) {\n                    var popoverTop = Math.max(window.scrollY - vditor.element.offsetTop - 8, Math.min(top - vditor.wysiwyg.element.scrollTop, _this.element.clientHeight - 21)) + \"px\";\n                    if (_this.popover.style.display === \"block\") {\n                        _this.popover.style.top = popoverTop;\n                    }\n                    if (_this.selectPopover.style.display === \"block\") {\n                        _this.selectPopover.style.top = popoverTop;\n                    }\n                }\n                return;\n            }\n            else if (!vditor.options.toolbarConfig.pin) {\n                return;\n            }\n            var popoverTop1 = Math.max(top, (window.scrollY - vditor.element.offsetTop - 8)) + \"px\";\n            if (_this.popover.style.display === \"block\") {\n                _this.popover.style.top = popoverTop1;\n            }\n            if (_this.selectPopover.style.display === \"block\") {\n                _this.selectPopover.style.top = popoverTop1;\n            }\n        });\n        this.element.addEventListener(\"scroll\", function () {\n            hidePanel(vditor, [\"hint\"]);\n            if (vditor.options.comment && vditor.options.comment.enable && vditor.options.comment.scroll) {\n                vditor.options.comment.scroll(vditor.wysiwyg.element.scrollTop);\n            }\n            if (_this.popover.style.display !== \"block\") {\n                return;\n            }\n            var top = parseInt(_this.popover.getAttribute(\"data-top\"), 10) - vditor.wysiwyg.element.scrollTop;\n            var max = -8;\n            if (vditor.options.toolbarConfig.pin && vditor.toolbar.element.getBoundingClientRect().top === 0) {\n                max = window.scrollY - vditor.element.offsetTop + max;\n            }\n            var topPx = Math.max(max, Math.min(top, _this.element.clientHeight - 21)) + \"px\";\n            _this.popover.style.top = topPx;\n            _this.selectPopover.style.top = topPx;\n        });\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    var range = (0,selection/* getEditorRange */.zh)(vditor);\n                    var node = document.createElement(\"template\");\n                    node.innerHTML = code;\n                    range.insertNode(node.content.cloneNode(true));\n                    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n                    if (blockElement) {\n                        blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n                    }\n                    else {\n                        vditor.wysiwyg.element.innerHTML = vditor.lute.SpinVditorDOM(vditor.wysiwyg.element.innerHTML);\n                    }\n                    (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n                },\n            });\n        });\n        // 中文处理\n        this.element.addEventListener(\"compositionstart\", function () {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(getSelection().getRangeAt(0).startContainer);\n            if (headingElement && headingElement.textContent === \"\") {\n                // heading 为空删除 https://github.com/Vanessa219/vditor/issues/150\n                renderToc(vditor);\n                return;\n            }\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                input_input(vditor, getSelection().getRangeAt(0).cloneRange(), event);\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 编辑器内容拖拽问题\n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                return;\n            }\n            if (_this.composingLock || event.data === \"‘\" || event.data === \"“\" || event.data === \"《\") {\n                return;\n            }\n            var range = getSelection().getRangeAt(0);\n            var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n            if (!blockElement) {\n                // 没有被块元素包裹\n                modifyPre(vditor, range);\n                blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n            }\n            if (!blockElement) {\n                return;\n            }\n            // 前后空格处理\n            var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.wysiwyg.element, range).start;\n            // 开始可以输入空格\n            var startSpace = true;\n            for (var i = startOffset - 1; i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n                if (blockElement.textContent.charAt(i) !== \" \" &&\n                    // 多个 tab 前删除不形成代码块 https://github.com/Vanessa219/vditor/issues/162 1\n                    blockElement.textContent.charAt(i) !== \"\\t\") {\n                    startSpace = false;\n                    break;\n                }\n            }\n            if (startOffset === 0) {\n                startSpace = false;\n            }\n            // 结尾可以输入空格\n            var endSpace = true;\n            for (var i = startOffset - 1; i < blockElement.textContent.length; i++) {\n                if (blockElement.textContent.charAt(i) !== \" \" && blockElement.textContent.charAt(i) !== \"\\n\") {\n                    endSpace = false;\n                    break;\n                }\n            }\n            var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(getSelection().getRangeAt(0).startContainer);\n            if (headingElement && headingElement.textContent === \"\") {\n                // heading 为空删除 https://github.com/Vanessa219/vditor/issues/150\n                renderToc(vditor);\n                headingElement.remove();\n            }\n            if ((startSpace && blockElement.getAttribute(\"data-type\") !== \"code-block\")\n                || endSpace || isHeadingMD(blockElement.innerHTML) ||\n                (isHrMD(blockElement.innerHTML) && blockElement.previousElementSibling)) {\n                return;\n            }\n            input_input(vditor, range, event);\n        });\n        this.element.addEventListener(\"click\", function (event) {\n            if (event.target.tagName === \"INPUT\") {\n                var checkElement = event.target;\n                if (checkElement.checked) {\n                    checkElement.setAttribute(\"checked\", \"checked\");\n                }\n                else {\n                    checkElement.removeAttribute(\"checked\");\n                }\n                _this.preventInput = true;\n                afterRenderEvent(vditor);\n                return;\n            }\n            if (event.target.tagName === \"IMG\" &&\n                // plantuml 图片渲染不进行提示\n                !event.target.parentElement.classList.contains(\"vditor-wysiwyg__preview\")) {\n                if (event.target.getAttribute(\"data-type\") === \"link-ref\") {\n                    genLinkRefPopover(vditor, event.target);\n                }\n                else {\n                    genImagePopover(event, vditor);\n                }\n                return;\n            }\n            // 打开链接\n            if (event.target.tagName === \"A\") {\n                window.open(event.target.getAttribute(\"href\"));\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.target.isEqualNode(_this.element) && _this.element.lastElementChild && range.collapsed) {\n                var lastRect = _this.element.lastElementChild.getBoundingClientRect();\n                if (event.y > lastRect.top + lastRect.height) {\n                    if (_this.element.lastElementChild.tagName === \"P\" &&\n                        _this.element.lastElementChild.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        range.selectNodeContents(_this.element.lastElementChild);\n                        range.collapse(false);\n                    }\n                    else {\n                        _this.element.insertAdjacentHTML(\"beforeend\", \"<p data-block=\\\"0\\\">\" + constants/* Constants.ZWSP */.g.ZWSP + \"<wbr></p>\");\n                        (0,selection/* setRangeByWbr */.ib)(_this.element, range);\n                    }\n                }\n            }\n            highlightToolbarWYSIWYG(vditor);\n            // 点击后光标落于预览区，需展开代码块\n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(event.target, \"vditor-wysiwyg__preview\");\n            if (!previewElement) {\n                previewElement =\n                    (0,hasClosest/* hasClosestByClassName */.fb)((0,selection/* getEditorRange */.zh)(vditor).startContainer, \"vditor-wysiwyg__preview\");\n            }\n            if (previewElement) {\n                showCode(previewElement, vditor);\n            }\n            clickToc(event, vditor);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            // 除 md 处理、cell 内换行、table 添加新行/列、代码块语言切换、block render 换行、跳出/逐层跳出 blockquote、h6 换行、\n            // 任务列表换行、软换行外需在换行时调整文档位置\n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.wysiwyg.element.innerHTML !== \"\" && vditor.wysiwyg.element.childNodes.length === 1 &&\n                vditor.wysiwyg.element.firstElementChild && vditor.wysiwyg.element.firstElementChild.tagName === \"P\"\n                && vditor.wysiwyg.element.firstElementChild.childElementCount === 0\n                && (vditor.wysiwyg.element.textContent === \"\" || vditor.wysiwyg.element.textContent === \"\\n\")) {\n                // 为空时显示 placeholder\n                vditor.wysiwyg.element.innerHTML = \"\";\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.key === \"Backspace\") {\n                // firefox headings https://github.com/Vanessa219/vditor/issues/211\n                if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.textContent === \"\\n\" && range.startOffset === 1) {\n                    range.startContainer.textContent = \"\";\n                }\n            }\n            // 没有被块元素包裹\n            modifyPre(vditor, range);\n            highlightToolbarWYSIWYG(vditor);\n            if (event.key !== \"ArrowDown\" && event.key !== \"ArrowRight\" && event.key !== \"Backspace\"\n                && event.key !== \"ArrowLeft\" && event.key !== \"ArrowUp\") {\n                return;\n            }\n            if (event.key === \"ArrowLeft\" || event.key === \"ArrowRight\") {\n                vditor.hint.render(vditor);\n            }\n            // 上下左右，删除遇到块预览的处理\n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-wysiwyg__preview\");\n            if (!previewElement && range.startContainer.nodeType !== 3 && range.startOffset > 0) {\n                // table 前删除遇到代码块\n                var blockRenderElement = range.startContainer;\n                if (blockRenderElement.classList.contains(\"vditor-wysiwyg__block\")) {\n                    previewElement = blockRenderElement.lastElementChild;\n                }\n            }\n            if (!previewElement) {\n                return;\n            }\n            var previousElement = previewElement.previousElementSibling;\n            if (previousElement.style.display === \"none\") {\n                if (event.key === \"ArrowDown\" || event.key === \"ArrowRight\") {\n                    showCode(previewElement, vditor);\n                }\n                else {\n                    showCode(previewElement, vditor, false);\n                }\n                return;\n            }\n            var codeElement = previewElement.previousElementSibling;\n            if (codeElement.tagName === \"PRE\") {\n                codeElement = codeElement.firstElementChild;\n            }\n            if (event.key === \"ArrowDown\" || event.key === \"ArrowRight\") {\n                var blockRenderElement = previewElement.parentElement;\n                var nextNode = getRenderElementNextNode(blockRenderElement);\n                if (nextNode && nextNode.nodeType !== 3) {\n                    // 下一节点依旧为代码渲染块\n                    var nextRenderElement = nextNode.querySelector(\".vditor-wysiwyg__preview\");\n                    if (nextRenderElement) {\n                        showCode(nextRenderElement, vditor);\n                        return;\n                    }\n                }\n                // 跳过渲染块，光标移动到下一个节点\n                if (nextNode.nodeType === 3) {\n                    // inline\n                    while (nextNode.textContent.length === 0 && nextNode.nextSibling) {\n                        // https://github.com/Vanessa219/vditor/issues/100 2\n                        nextNode = nextNode.nextSibling;\n                    }\n                    range.setStart(nextNode, 1);\n                }\n                else {\n                    // block\n                    range.setStart(nextNode.firstChild, 0);\n                }\n            }\n            else {\n                range.selectNodeContents(codeElement);\n                range.collapse(false);\n            }\n        });\n    };\n    return WYSIWYG;\n}());\n\n\n;// CONCATENATED MODULE: ./src/index.ts\nvar src_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Vditor = /** @class */ (function (_super) {\n    src_extends(Vditor, _super);\n    /**\n     * @param id 要挂载 Vditor 的元素或者元素 ID。\n     * @param options Vditor 参数\n     */\n    function Vditor(id, options) {\n        var _this = _super.call(this) || this;\n        _this.version = constants/* VDITOR_VERSION */.H;\n        if (typeof id === \"string\") {\n            if (!options) {\n                options = {\n                    cache: {\n                        id: \"vditor\" + id,\n                    },\n                };\n            }\n            else if (!options.cache) {\n                options.cache = { id: \"vditor\" + id };\n            }\n            else if (!options.cache.id) {\n                options.cache.id = \"vditor\" + id;\n            }\n            id = document.getElementById(id);\n        }\n        var getOptions = new Options(options);\n        var mergedOptions = getOptions.merge();\n        // 支持自定义国际化\n        if (!mergedOptions.i18n) {\n            if (![\"en_US\", \"ja_JP\", \"ko_KR\", \"ru_RU\", \"zh_CN\", \"zh_TW\"].includes(mergedOptions.lang)) {\n                throw new Error(\"options.lang error, see https://ld246.com/article/1549638745630#options\");\n            }\n            else {\n                (0,addScript/* addScript */.G)(mergedOptions.cdn + \"/dist/js/i18n/\" + mergedOptions.lang + \".js\", \"vditorI18nScript\").then(function () {\n                    _this.init(id, mergedOptions);\n                });\n            }\n        }\n        else {\n            window.VditorI18n = mergedOptions.i18n;\n            _this.init(id, mergedOptions);\n        }\n        return _this;\n    }\n    /** 设置主题 */\n    Vditor.prototype.setTheme = function (theme, contentTheme, codeTheme, contentThemePath) {\n        this.vditor.options.theme = theme;\n        setTheme(this.vditor);\n        if (contentTheme) {\n            this.vditor.options.preview.theme.current = contentTheme;\n            (0,setContentTheme/* setContentTheme */.Z)(contentTheme, contentThemePath || this.vditor.options.preview.theme.path);\n        }\n        if (codeTheme) {\n            this.vditor.options.preview.hljs.style = codeTheme;\n            (0,setCodeTheme/* setCodeTheme */.Y)(codeTheme, this.vditor.options.cdn);\n        }\n    };\n    /** 获取 Markdown 内容 */\n    Vditor.prototype.getValue = function () {\n        return getMarkdown(this.vditor);\n    };\n    /** 获取编辑器当前编辑模式 */\n    Vditor.prototype.getCurrentMode = function () {\n        return this.vditor.currentMode;\n    };\n    /** 聚焦到编辑器 */\n    Vditor.prototype.focus = function () {\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.focus();\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            this.vditor.wysiwyg.element.focus();\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.element.focus();\n        }\n    };\n    /** 让编辑器失焦 */\n    Vditor.prototype.blur = function () {\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.blur();\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            this.vditor.wysiwyg.element.blur();\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.element.blur();\n        }\n    };\n    /** 禁用编辑器 */\n    Vditor.prototype.disabled = function () {\n        hidePanel(this.vditor, [\"subToolbar\", \"hint\", \"popover\"]);\n        disableToolbar(this.vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"undo\", \"redo\", \"fullscreen\", \"edit-mode\"]));\n        this.vditor[this.vditor.currentMode].element.setAttribute(\"contenteditable\", \"false\");\n    };\n    /** 解除编辑器禁用 */\n    Vditor.prototype.enable = function () {\n        enableToolbar(this.vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"undo\", \"redo\", \"fullscreen\", \"edit-mode\"]));\n        this.vditor.undo.resetIcon(this.vditor);\n        this.vditor[this.vditor.currentMode].element.setAttribute(\"contenteditable\", \"true\");\n    };\n    /** 返回选中的字符串 */\n    Vditor.prototype.getSelection = function () {\n        if (this.vditor.currentMode === \"wysiwyg\") {\n            return getSelectText(this.vditor.wysiwyg.element);\n        }\n        else if (this.vditor.currentMode === \"sv\") {\n            return getSelectText(this.vditor.sv.element);\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            return getSelectText(this.vditor.ir.element);\n        }\n    };\n    /** 设置预览区域内容 */\n    Vditor.prototype.renderPreview = function (value) {\n        this.vditor.preview.render(this.vditor, value);\n    };\n    /** 获取焦点位置 */\n    Vditor.prototype.getCursorPosition = function () {\n        return (0,selection/* getCursorPosition */.Ny)(this.vditor[this.vditor.currentMode].element);\n    };\n    /** 上传是否还在进行中 */\n    Vditor.prototype.isUploading = function () {\n        return this.vditor.upload.isUploading;\n    };\n    /** 清除缓存 */\n    Vditor.prototype.clearCache = function () {\n        localStorage.removeItem(this.vditor.options.cache.id);\n    };\n    /** 禁用缓存 */\n    Vditor.prototype.disabledCache = function () {\n        this.vditor.options.cache.enable = false;\n    };\n    /** 启用缓存 */\n    Vditor.prototype.enableCache = function () {\n        if (!this.vditor.options.cache.id) {\n            throw new Error(\"need options.cache.id, see https://ld246.com/article/1549638745630#options\");\n        }\n        this.vditor.options.cache.enable = true;\n    };\n    /** HTML 转 md */\n    Vditor.prototype.html2md = function (value) {\n        return this.vditor.lute.HTML2Md(value);\n    };\n    /** markdown 转 JSON 输出 */\n    Vditor.prototype.exportJSON = function (value) {\n        return this.vditor.lute.RenderJSON(value);\n    };\n    /** 获取 HTML */\n    Vditor.prototype.getHTML = function () {\n        return getHTML(this.vditor);\n    };\n    /** 消息提示。time 为 0 将一直显示 */\n    Vditor.prototype.tip = function (text, time) {\n        this.vditor.tip.show(text, time);\n    };\n    /** 设置预览模式 */\n    Vditor.prototype.setPreviewMode = function (mode) {\n        setPreviewMode(mode, this.vditor);\n    };\n    /** 删除选中内容 */\n    Vditor.prototype.deleteValue = function () {\n        if (window.getSelection().isCollapsed) {\n            return;\n        }\n        document.execCommand(\"delete\", false);\n    };\n    /** 更新选中内容 */\n    Vditor.prototype.updateValue = function (value) {\n        document.execCommand(\"insertHTML\", false, value);\n    };\n    /** 在焦点处插入内容，并默认进行 Markdown 渲染 */\n    Vditor.prototype.insertValue = function (value, render) {\n        if (render === void 0) { render = true; }\n        var range = (0,selection/* getEditorRange */.zh)(this.vditor);\n        range.collapse(true);\n        var tmpElement = document.createElement(\"template\");\n        tmpElement.innerHTML = value;\n        range.insertNode(tmpElement.content.cloneNode(true));\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.preventInput = true;\n            if (render) {\n                inputEvent(this.vditor);\n            }\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            this.vditor.wysiwyg.preventInput = true;\n            if (render) {\n                input_input(this.vditor, getSelection().getRangeAt(0));\n            }\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.preventInput = true;\n            if (render) {\n                input(this.vditor, getSelection().getRangeAt(0), true);\n            }\n        }\n    };\n    /** 设置编辑器内容 */\n    Vditor.prototype.setValue = function (markdown, clearStack) {\n        var _this = this;\n        if (clearStack === void 0) { clearStack = false; }\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.innerHTML = this.vditor.lute.SpinVditorSVDOM(markdown);\n            processAfterRender(this.vditor, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            renderDomByMd(this.vditor, markdown, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        else {\n            this.vditor.ir.element.innerHTML = this.vditor.lute.Md2VditorIRDOM(markdown);\n            this.vditor.ir.element\n                .querySelectorAll(\".vditor-ir__preview[data-render='2']\")\n                .forEach(function (item) {\n                processCodeRender(item, _this.vditor);\n            });\n            process_processAfterRender(this.vditor, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        this.vditor.outline.render(this.vditor);\n        if (!markdown) {\n            hidePanel(this.vditor, [\"emoji\", \"headings\", \"submenu\", \"hint\"]);\n            if (this.vditor.wysiwyg.popover) {\n                this.vditor.wysiwyg.popover.style.display = \"none\";\n            }\n            this.clearCache();\n        }\n        if (clearStack) {\n            this.clearStack();\n        }\n    };\n    /** 清空 undo & redo 栈 */\n    Vditor.prototype.clearStack = function () {\n        this.vditor.undo.clearStack(this.vditor);\n        this.vditor.undo.addToUndoStack(this.vditor);\n    };\n    /** 销毁编辑器 */\n    Vditor.prototype.destroy = function () {\n        this.vditor.element.innerHTML = this.vditor.originalInnerHTML;\n        this.vditor.element.classList.remove(\"vditor\");\n        this.vditor.element.removeAttribute(\"style\");\n        document.getElementById(\"vditorIconScript\").remove();\n        this.clearCache();\n    };\n    /** 获取评论 ID */\n    Vditor.prototype.getCommentIds = function () {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return [];\n        }\n        return this.vditor.wysiwyg.getComments(this.vditor, true);\n    };\n    /** 高亮评论 */\n    Vditor.prototype.hlCommentIds = function (ids) {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var hlItem = function (item) {\n            item.classList.remove(\"vditor-comment--hover\");\n            ids.forEach(function (id) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(id) > -1) {\n                    item.classList.add(\"vditor-comment--hover\");\n                }\n            });\n        };\n        this.vditor.wysiwyg.element\n            .querySelectorAll(\".vditor-comment\")\n            .forEach(function (item) {\n            hlItem(item);\n        });\n        if (this.vditor.preview.element.style.display !== \"none\") {\n            this.vditor.preview.element\n                .querySelectorAll(\".vditor-comment\")\n                .forEach(function (item) {\n                hlItem(item);\n            });\n        }\n    };\n    /** 取消评论高亮 */\n    Vditor.prototype.unHlCommentIds = function (ids) {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var unHlItem = function (item) {\n            ids.forEach(function (id) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(id) > -1) {\n                    item.classList.remove(\"vditor-comment--hover\");\n                }\n            });\n        };\n        this.vditor.wysiwyg.element\n            .querySelectorAll(\".vditor-comment\")\n            .forEach(function (item) {\n            unHlItem(item);\n        });\n        if (this.vditor.preview.element.style.display !== \"none\") {\n            this.vditor.preview.element\n                .querySelectorAll(\".vditor-comment\")\n                .forEach(function (item) {\n                unHlItem(item);\n            });\n        }\n    };\n    /** 删除评论 */\n    Vditor.prototype.removeCommentIds = function (removeIds) {\n        var _this = this;\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var removeItem = function (item, removeId) {\n            var ids = item.getAttribute(\"data-cmtids\").split(\" \");\n            ids.find(function (id, index) {\n                if (id === removeId) {\n                    ids.splice(index, 1);\n                    return true;\n                }\n            });\n            if (ids.length === 0) {\n                item.outerHTML = item.innerHTML;\n                (0,selection/* getEditorRange */.zh)(_this.vditor).collapse(true);\n            }\n            else {\n                item.setAttribute(\"data-cmtids\", ids.join(\" \"));\n            }\n        };\n        removeIds.forEach(function (removeId) {\n            _this.vditor.wysiwyg.element\n                .querySelectorAll(\".vditor-comment\")\n                .forEach(function (item) {\n                removeItem(item, removeId);\n            });\n            if (_this.vditor.preview.element.style.display !== \"none\") {\n                _this.vditor.preview.element\n                    .querySelectorAll(\".vditor-comment\")\n                    .forEach(function (item) {\n                    removeItem(item, removeId);\n                });\n            }\n        });\n        afterRenderEvent(this.vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n    };\n    Vditor.prototype.init = function (id, mergedOptions) {\n        var _this = this;\n        this.vditor = {\n            currentMode: mergedOptions.mode,\n            element: id,\n            hint: new Hint(mergedOptions.hint.extend),\n            lute: undefined,\n            options: mergedOptions,\n            originalInnerHTML: id.innerHTML,\n            outline: new Outline(window.VditorI18n.outline),\n            tip: new Tip(),\n        };\n        this.vditor.sv = new Editor(this.vditor);\n        this.vditor.undo = new undo_Undo();\n        this.vditor.wysiwyg = new WYSIWYG(this.vditor);\n        this.vditor.ir = new IR(this.vditor);\n        this.vditor.toolbar = new Toolbar(this.vditor);\n        if (mergedOptions.resize.enable) {\n            this.vditor.resize = new Resize(this.vditor);\n        }\n        if (this.vditor.toolbar.elements.devtools) {\n            this.vditor.devtools = new DevTools();\n        }\n        if (mergedOptions.upload.url || mergedOptions.upload.handler) {\n            this.vditor.upload = new Upload();\n        }\n        (0,addScript/* addScript */.G)(mergedOptions._lutePath ||\n            mergedOptions.cdn + \"/dist/js/lute/lute.min.js\", \"vditorLuteScript\").then(function () {\n            _this.vditor.lute = (0,setLute/* setLute */.X)({\n                autoSpace: _this.vditor.options.preview.markdown.autoSpace,\n                codeBlockPreview: _this.vditor.options.preview.markdown\n                    .codeBlockPreview,\n                emojiSite: _this.vditor.options.hint.emojiPath,\n                emojis: _this.vditor.options.hint.emoji,\n                fixTermTypo: _this.vditor.options.preview.markdown.fixTermTypo,\n                footnotes: _this.vditor.options.preview.markdown.footnotes,\n                headingAnchor: false,\n                inlineMathDigit: _this.vditor.options.preview.math.inlineDigit,\n                linkBase: _this.vditor.options.preview.markdown.linkBase,\n                linkPrefix: _this.vditor.options.preview.markdown.linkPrefix,\n                listStyle: _this.vditor.options.preview.markdown.listStyle,\n                mark: _this.vditor.options.preview.markdown.mark,\n                mathBlockPreview: _this.vditor.options.preview.markdown\n                    .mathBlockPreview,\n                paragraphBeginningSpace: _this.vditor.options.preview.markdown\n                    .paragraphBeginningSpace,\n                sanitize: _this.vditor.options.preview.markdown.sanitize,\n                toc: _this.vditor.options.preview.markdown.toc,\n            });\n            _this.vditor.preview = new Preview(_this.vditor);\n            initUI(_this.vditor);\n            if (mergedOptions.after) {\n                mergedOptions.after();\n            }\n            if (mergedOptions.icon) {\n                // 防止初始化 2 个编辑器时加载 2 次\n                (0,addScript/* addScriptSync */.J)(mergedOptions.cdn + \"/dist/js/icons/\" + mergedOptions.icon + \".js\", \"vditorIconScript\");\n            }\n        });\n    };\n    return Vditor;\n}(method.default));\n/* harmony default export */ const src = (Vditor);\n\n})();\n\n__webpack_exports__ = __webpack_exports__.default;\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});"],"sourceRoot":""}